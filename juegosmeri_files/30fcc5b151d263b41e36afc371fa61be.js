!function(){let e,t=window,n=!0,o={},a=function(){},s=function(){},i=function(){},r=function(){};try{e=window.top}catch(o){n=!1,e=t}e.__wmass||(e.__wmass={});let c,l="outxurl",d="outxgam",f="outxcon",m={},u={forceDmpId:{anyof:"string"},forceDmpPKey:{anyof:"string"}},p="sijai",g=(void 0!==e.orientation||navigator.userAgent.indexOf("IEMobile"),e.innerWidth||e.document.documentElement&&0!==e.document.documentElement.clientWidth&&e.document.documentElement.clientWidth||e.document.getElementsByTagName("body")[0].clientWidth,"_papns"),b=[];try{e.__wmass.logger||(e.__wmass.logger=(t="",n="")=>{let a,s,i,r,c=[],l=[],d=[],f=[],m=()=>{let e=new Date,t=e.getMilliseconds().toString();return`${e.toLocaleTimeString()}:${t.padStart(4,"0")}`},u=e=>{let t={info:1,log:2,warn:3,error:4}[o.enableLog];return!0===o.enableLog||t>=e};if(a=s=i=r=function(){},e.console){let o=`${"%cWemass"}${t}`,p=["display: inline-block; color: #fff; background: #92c01f; padding: 1px 4px; border-radius: 3px;",n];e.console.info&&(a=function(){let e=u(1),t=o+"%c INFO",n=[...p,"display: inline-block; color: #111 background: #e3e3e3; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,m(),...a];if(e){for(;c.length>0;)c.shift()();console.info.apply(console,s)}else c.push(console.info.bind(console,...s))}),e.console.log&&(s=function(){let e=u(2),t=o+"%c LOG",n=[...p,"display: inline-block; color: #111 background: #3c3c3b; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,m(),...a];if(e){for(;l.length>0;)l.shift()();console.log.apply(console,s)}else l.push(console.log.bind(console,...s))}),e.console.warn&&(i=function(){let e=u(3),t=o+"%c WARN",n=[...p,"display: inline-block; color: #111 background: orange; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,m(),...a];if(e){for(;d.length>0;)d.shift()();console.warn.apply(console,s)}else d.push(console.warn.bind(console,...s))}),e.console.error&&(r=function(){let e=u(4),t=o+"%c ERROR",n=[...p,"display: inline-block; color: #111 background: red; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,m(),...a];if(e){for(;f.length>0;)f.shift()();console.error.apply(console,s)}else f.push(console.error.bind(console,...s))})}return[a,s,i,r]}),[a,s,i,r]=e.__wmass.logger("%cDMP","display: inline-block; color: #fff; background: #658; padding: 1px 4px; border-radius: 3px;")}catch(e){}let _=[];e.__wmass.getSegments=function(e){var t=function(){let e={},t=(t="permutive",n=g)=>{let o=[];try{o=JSON.parse(window.localStorage.getItem(n)||"[]").slice(0,250).map(String)}catch(e){o=[]}o.length>0&&(e[t]=o)};return L()||(-1===_.indexOf(d)&&T()&&_.push(d),-1===_.indexOf(l)&&j()&&_.push(l),-1===_.indexOf(f)&&S()&&_.push(f)),t(),"array"===h(b)&&b.length>0&&t(...b),_.length>0&&(e.wirr=_,s("segmentos de wemass declarados",JSON.stringify(e))),e};if(!e||!e.callback||"function"!=typeof e.callback)return t();a("llamando a getSegments con callback");var n=e.callback,o=500,i=100,r=function(){var e=t(),a=i<o?i:o;e.permutive&&e.wirr||o<=0?n(e):(o-=a,setTimeout(r,a))};"number"==typeof e.timeout&&(o=e.timeout),"number"==typeof e.interval&&(i=e.interval),r()},s("funcion getSegments sobreescrita");let y=t=>{let n=t+"=",o=e.document.cookie.split(";");for(let e of o){for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n))return e.substring(n.length,e.length)}return null},h=(e,t)=>{var n,o=Object.prototype.toString.call(e);return t=t||{},n||void 0!==e||(n="undefined"),n||null!==e||(n="null"),!n&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)&&(n="buffer"),n||"object"!=typeof window||e!==window||(n="global"),n||"object"!=typeof global||e!==global||(n="global"),!n&&"number"==typeof e&&isNaN(e)&&(n="nan"),!n&&"object"==typeof e&&"[object Number]"==o&&isNaN(e)&&(n="nan"),n||"object"!=typeof e||"Event]"!=o.substr(-6)||(n="event"),n||"[object HTML"!=o.substr(0,12)||(n="html"),n||"[object Node"!=o.substr(0,12)||(n="html"),n||(n=o.match(/\[object\s*([^\]]+)\]/)[1].toLowerCase()),"object"==n&&t.pojoOnly&&e.constructor&&"Object"==(n=e.constructor.name||"unknown")&&(n="object"),n},w=(e,t,n)=>{let o=new Date,a=1e3,s={B:()=>{a*=0},M:e=>{a*=60*e},H:e=>{a*=3600*e},D:e=>{a*=86400*e},X:()=>{a*=864e5}};for(let e=0;e<t.length;e++)t[e]in s&&s[t[e]](parseInt(t.replace(t[e],""))||1);a+=o.getTime(),o.setTime(a),document.cookie=`${n}=${e}; path=/; domain=${location.hostname}; expires=${o.toUTCString()}; samesite=none; secure`};try{e.__wmass.testMode||(e.__wmass.testMode=function(t={},n="wmsstst"){let o=e=>{let t=["raPreviewMode=0; Max-Age=0; path=/; samesite=None; domain=.richaudience.com; secure","apn_prebid_debug=0; Max-Age=0; samesite=none; secure"];for(let e of t)document.cookie=e;!1===e?w(e,"B",n):w(JSON.stringify(e),"H",n)},s=(e=>{let t={enableLog:{values:[!0,"info","log","warn","error"],cookie:!0}};for(let n in e)t[n]||(t[n]=e[n]);return t})(t);return(t={})=>{if(!1===t)return o(!1),{};if("object"===h(t)){let i=((...e)=>{let t={};for(let n of e)if("object"===h(n))for(let e in n)t[e]||(t[e]=n[e]);return t})(t,(()=>{let e=y(n);if("string"===h(e))try{return JSON.parse(e)}catch(t){console.log(t,"error > valor de wmsstst = "+e)}return{}})(),(()=>{let t="wmsstst",n=e.location.search.replace("?","");if(-1===n.indexOf(t))return{};let o=n.split("&"),s={};for(let e of o)if(-1!==e.indexOf(t))if(e===t)s[enableTestCreatives]=!0;else{let[t,n]=e.replace("wmsstst.","").split("=");0===t.indexOf("key.")?(t=t.replace("key.",""),s.keywords||(s.keywords={}),s.keywords[t]||(s.keywords[t]=[]),-1===s.keywords[t].indexOf(n)&&s.keywords[t].push(n)):("true"===n&&(n=!0),"string"===h(n)&&s[t]?("string"===h(s[t])&&(s[t]=[s[t]]),s[t].push(n)):s[t]=n)}return a("parametros wemass detectados",s),s})()),r={},c={};for(let e in i)if(s[e]){let t=!1,n=i[e],o=s[e],{values:a,cookie:l=!1,anyof:d}=o,f=h(a),m=h(d),u=h(n);switch("string"===m&&u===d&&(t=!0),f){case"array":a.indexOf(n)>-1&&(t=!0);break;case"boolean":t=!0===n;case"function":t=a(n)}!0===t&&(c[e]=n,!0===l&&(r[e]=n))}return Object.keys(r).length>0&&o(r),c}}}),o=new e.__wmass.testMode(u,"30fcc5b151d263b41e36afc371fa61be")()}catch(e){}let{pathname:x,hostname:v,search:k}=e.location;v=v.toLowerCase(),x=x.toLowerCase(),s("Loading Wemass DMP Tag PRISA~DMP");let O,C,S=()=>!1,T=()=>{if(e.googletag&&e.googletag.pubads){let t,n=["pos"],o=["intext"];try{t=e.googletag.pubads().getSlots()}catch(e){t=[]}for(let e of t)for(let t of n){let n=e.getTargeting(t).pop();if(o.indexOf(n)>-1)return!0}}return!1},j=()=>!1,L=()=>!1,N=e=>"addon"===e?function(t,n={},...o){n.page||(n.page={});let s=n.page.type;["articulo","noticia","article","otros"].indexOf(s)>-1&&!n.page.classifications_watson&&(n.page.classifications_watson={categories:"$alchemy_taxonomy",keywords:"$alchemy_keywords",sentiment:"$alchemy_document_sentiment"}),_.length>0&&(_=[]),a(`Llamando a __wmass.dmp.${e} con argumentos`,[t,n,...o]),c[e].apply(null,[t,n,...o])}:"identify"===e?function(t=[],...n){let o=h(t);("array"===o||"string"===o)&&t.length>0&&(a(`Llamando a __wmass.dmp.${e} con argumentos`,[t,...n]),c[e].apply(null,[t,...n]))}:function(){a(`Llamando a __wmass.dmp.${e} con argumentos`,arguments),c[e].apply(null,arguments)},E=(e,n={})=>{let o="string"===h(e);if(o&&(e=n.useNs?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)),null!=typeof n)for(let o in n)if("string"===h(o)){let a=n[o],s=h(a);switch(o){case"T":e.appendChild(document.createTextNode(a));break;case"com":e.appendChild(document.createComment(a));break;case"Ct":e.style.cssText=a;break;case"Cn":if("string"===s||"array"===s){let t,n=[];if("string"===s?t=[a]:"array"===s&&(t=a),"array"===h(t))for(let e of t)"string"===h(e)&&("."===e.charAt(0)&&(e=e.substr(1)),n.push(e));n.length>0&&e.classList.add(...n)}break;case"H":e.innerHTML=a;break;case"St":t.attachEvent&&!t.opera?e.styleSheet.cssText=a:E(e,{T:a});break;default:"useNs"!==o&&(n.useNs?e.setAttributeNS(null,o,a):e.setAttribute(o,a))}}if(o)return e},M=(n,o,i,r,l)=>{if(!e.__wmass.dmp){if((v.indexOf("as.com")>-1||v.indexOf("ejerciciosencasa.as.com")>-1||v.indexOf("esports.as.com")>-1||v.indexOf("elpais.com")>-1||v.indexOf("cadenadial.com")>-1||v.indexOf("cadenaser.com")>-1||v.indexOf("elcomidista.elpais.com")>-1||v.indexOf("cat.elpais.com")>-1||v.indexOf("motor.elpais.com")>-1||v.indexOf("smoda.elpais.com")>-1||v.indexOf("verne.elpais.com")>-1||v.indexOf("elviajero.elpais.com")>-1||v.indexOf("cincodias.elpais.com")>-1||v.indexOf("euribor.com.es")>-1||v.indexOf("retina.elpais.com")>-1||v.indexOf("huffingtonpost.es")>-1||v.indexOf("play.kebuena.es")>-1||v.indexOf("librotea.elpais.com")>-1||v.indexOf("los40.com")>-1||v.indexOf("maxima.fm")>-1||v.indexOf("radiole.com")>-1||v.indexOf("strambotic.com")>-1)&&e.__wmass.bff.push($),"string"===h(i)&&i.length>0&&"string"===h(r)&&r.length>0){s(`cargando dmp projectId: ${i}, key: ${r}`),"object"!==h(m)&&(m={}),e.__wmass.dmp=e.__wmass.dmp||{};let n=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"];if(!e[o]){e[o]={},c=e[o],c.q=[],c.config=l||{},c.config.projectId=i,c.config.apiKey=r,c.config.environment=c.config.environment||"production","permutive"!==o&&(g=o+"_papns",c.config.stateNamespace=o);for(let e of n)c[e]=function(e){return function(){let t=Array.prototype.slice.call(arguments,0);c.q.push({functionName:e,arguments:t})}}(e)}a("iniciando permutive"),((e="about:blank",n="asyncScript",o=t)=>{let a=E("script",{src:e,async:"async",Cn:[n]});(o.document.body||o.document.head).appendChild(a)})(`https://cdn.permutive.com/${i}-web.js`);for(let t of n)!e.__wmass.dmp[t]&&c[t]&&(e.__wmass.dmp[t]=N(t))}e.__wmass.dmp.ready((function(){a("permutive initialised")}),"initialised"),e.__wmass.dmp.ready((function(){a("permutive realtime")}),"realtime")}},$=()=>{let t=((t=!1)=>{try{let n=null;return!1!==t&&(e.localStorage?n=e.localStorage.getItem(t):navigator.cookieEnabled&&(n=y(t))),n}catch(e){}return null})(p),n=t=>{let{data:a,origin:s,source:r}=t;"https://wemass.io"===s&&(e.removeEventListener("message",n),o(a),i.parentNode.removeChild(i))},o=t=>{((t,n)=>{try{if(e.localStorage)e.localStorage.setItem(t,n);else{if(!navigator.cookieEnabled)return!1;w(n,"X",t)}}catch(e){}})(p,t),a("UniqueId: "+t),__wmass.dmp.identify([{id:t,tag:"wmssId"}])},s="_wmss_messenger",i=E("iframe",{src:"about:blank",id:s,name:s,scrolling:"no",border:"no",src:"https://wemass.io/messenger",Ct:"width:0px;height:0px;border:0px;"});t?o(t):(e.addEventListener("message",n),document.body.appendChild(i))},D=()=>{if(s("permisos suficientes obtenidos o no habia CMP. Iniciando"),M(e.document,"permutive","28986622-e6be-473d-9a8f-e603a25f3c66","390f11db-6eea-42eb-9ef9-4d27b1bb2bab",m),"array"===h(e.__wmass.bff)&&e.__wmass.bff.length>0){a("Ejecutando funciones en el buffer");for(let t of e.__wmass.bff)"function"===h(t)&&t()}"object"!==h(e.__wmass.bff)&&(e.__wmass.bff={push:function(e){"function"===h(e)&&e()}})},I=(e={},t={},n=!1)=>{let o=!0,a=h(n);for(let s in e)t.hasOwnProperty(s)&&!0===t[s]?e[s]=t[s]:o=!1,!1===o&&"object"===a&&!0===n[s]&&(e[s]=n[s],o=!0);return!1===o&&r("Consentimiento insuficiente. Obtenido:",e),o},A={getVendorConsents:e=>{try{let t,n=!0,{purposeConsents:o}=e;t=!n||I({1:!1,2:!1,3:!1,5:!1},o),!0===t&&D()}catch(e){r(e)}}},P={addEventListener:(t,n)=>{if(n){let n,o=!0,{eventStatus:a,listenerId:i,purpose:{consents:r={},legitimateInterests:c={}}={}}=t;s("Evento DMP purposes: ejecutado. Status: "+a),"tcloaded"!==a&&"useractioncomplete"!==a||(n=!o||I({1:!1,3:!1,4:!1,7:!1,10:!1},r),n&&(D(),e.__tcfapi("removeEventListener",2,(e=>{e&&s("Evento DMP purposes eliminado")}),i)))}}},W={milis:!1,callback:D};e.__wmass.bff||(e.__wmass.bff=[]),(({cmpCallbackTcf1:t={},cmpCallbackTcf2:n={},cmpTimeout:o={}})=>{let{milis:a=!1,callback:i}=o,c=h(i);if(e.__cmp||e.__tcfapi){if(e.__wmass.consentData||(e.__wmass.consentData={}),C=e.__wmass.consentData,e.__tcfapi)if(s("TCF v2 CMP detectado"),O=2,"object"===h(n)){if(!C.getTCData){let t=(t,n)=>{n&&(s("TCF v2 generic eventListener ejecutado. Estatus: "+t.eventStatus),("tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus)&&"string"===h(t.tcString)&&t.tcString.length>0&&(s("TCF v2 generic eventListener tcdataString disponible: "+t.tcString),C.getTCData=t,e.__tcfapi("removeEventListener",2,(e=>{e&&s("TCF v2 generic eventListener event removed")}),t.listenerId)))};e.__tcfapi("addEventListener",2,t)}for(let t in n){let o=n[t],a=h(o);"function"===a?e.__tcfapi(t,2,o):r(`tcfversion 2 callback para ${t} es de tipo  ${a} se esperaba una funcion`)}}else r("Wemass CMP module required, tcfversion 2 detected but no cmpCallbackTcf2 set");else if(e.__cmp)if(s("TCF v1 CMP detectado"),O=1,"object"===h(t)){C.getConsentData||e.__cmp("getConsentData",null,(e=>{C.getConsentData=e})),C.getVendorConsents||e.__cmp("getVendorConsents",null,(e=>{C.getVendorConsents=e}));for(let n in t){let o=t[n],a=h(o);"function"===a?e.__cmp(n,null,o):r(`tcfversion 1 callback para ${n} es de tipo  ${a} se esperaba una funcion`)}}else r("Wemass CMP module required, tcfversion 1 detected but no cmpCallbackTcf1 set");0!=a&&"number"===h(a)&&(o.timer=setTimeout(i,a))}else"function"===c&&i()})({cmpCallbackTcf1:A,cmpCallbackTcf2:P,cmpTimeout:W})}();