(()=>{var e={924:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},264:(e,t,n)=>{e.exports=n(588)},588:(e,t,n)=>{e=n.nmd(e);var i=n(924),r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof A?t:A,a=Object.create(r.prototype),o=new D(i||[]);return a._invoke=function(e,t,n){var i=h;return function(r,a){if(i===v)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw a;return M()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var c=d(e,t,n);if("normal"===c.type){if(i=n.done?p:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=p,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",v="executing",p="completed",m={};function A(){}function y(){}function g(){}var b={};b[o]=function(){return this};var E=Object.getPrototypeOf,k=E&&E(E(P([])));k&&k!==n&&r.call(k,o)&&(b=k);var T=g.prototype=A.prototype=Object.create(b);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,s,c){var u=d(e[a],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===i(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var a;this._invoke=function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=d(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return y.prototype=T.constructor=g,g.constructor=y,y.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},I(C.prototype),C.prototype[s]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new C(l(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(T),u(T,c,"Generator"),T[o]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=P,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}("object"===i(e)?e.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i](a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}function a(e){return function(e){if(Array.isArray(e))return t(e)}(e)||i(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}n.r(e),n.d(e,{deviceDetector:()=>ln,globalObject:()=>bt});var s=Object.prototype.toString;function c(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s.call(e)}function u(e){return"[object Array]"===c(e)}function l(e){return"function"==typeof e}function d(e){return null!==e&&("object"===o(e)||l(e))}function h(e){return d(e)&&!l(e)&&!u(e)}function f(e,t){if(null!=e)if("object"!==o(e)&&(e=[e]),u(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function v(){var e={};function t(t,n){h(t)?"object"===o(e[n])&&"object"===o(t)?e[n]=v(e[n],t):"object"===o(t)&&(e[n]=v({},t)):e[n]=t}for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach((function(e){f(e,t)})),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}function g(e,t,n,i,r,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){g(a,i,r,o,s,"next",e)}function s(e){g(a,i,r,o,s,"throw",e)}o(void 0)}))}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}var I=n(264),C=n.n(I);function w(e){return void 0===e}function R(e){var t=o(e);return"string"===t||"object"===t&&null!=e&&!Array.isArray(e)&&"[object String]"===c(e)}function S(e){return"number"==typeof e}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(!R(e))return!1;var n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},i=n[t];return i&&i.test(e)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!R(e))throw new Error("".concat(t," should be a valid non-empty string!"))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!l(e))throw new Error("".concat(t," should be a function!"))}var x=function(){function e(){E(this,e),this.setMode(!1)}return T(e,[{key:"setMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.debug=!0===e&&e}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"log":t,i=e.style,r=void 0===i?"font-weight: bold":i,o=e.args,s=void 0===o?[]:o;if(this.debug){var c,u="SM-".concat(n.toUpperCase(),":");null===(c=console[n]||console.log)||void 0===c||c.apply(console,["%c".concat(u),r].concat(a(s)))}}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log({type:"info",style:"color: blue; font-weight: bold",args:t})}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log({type:"warn",args:t})}},{key:"warnDeprecation",value:function(){for(var e="\n*\n",t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.log({type:"warn",style:"font-weight: bold; color: #ff0000;",args:["Calling deprecated function ".concat(e)].concat(n,[e])})}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log({type:"error",args:t})}}]),e}();var O=new x;O.wrapWithName=function(e){P(e,"loggerName");var t=e.toUpperCase();return{info:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return O.info.apply(O,["[".concat(t,"]")].concat(n))},error:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return O.error.apply(O,["[".concat(t,"]")].concat(n))},warning:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return O.warning.apply(O,["[".concat(t,"]")].concat(n))},warnDeprecation:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return O.warnDeprecation.apply(O,["[".concat(t,"]")].concat(n))}}};const L=O;var V,N={TAGS:["smsh","smtag","smtags","smt"],RATIO:["smratio","smr","smrt"]},F="sm",U="client",_=[].concat(["4:3","16:9"],["76:135","163:288"]),B={DEFAULT:"d",INTEGRATION:"s"},W={VAST:"v",BANNER:"b"},z={VIDEO:"Video",SOCIAL:"SocialAd",SCROLLER:"Scroller",IMAGE:"AdImage",DISPLAY:"Display",PROGRAMMATIC_DISPLAY:"SSP",SURVEY:"Survey"},G=1,H=1,j=0,Y="sm",Z="cmpValues",K="random",X="referrerUrl",Q="category",q="categoryEncode",J="gdprApplies",$="consentString",ee="width",te="height",ne="supplyChain",ie="targeting",re=(p(V={},K,"random"),p(V,X,"request.referrerurl"),p(V,Q,"page_category"),p(V,q,"page_category.encode"),p(V,J,"gdpr"),p(V,$,"gdpr_consent"),p(V,ee,"request.width"),p(V,te,"request.height"),p(V,ne,"supply_chain"),p(V,ie,"VALUE"),V),ae=/(\${)([\w_.()]+)(})/gi;function oe(e){return l(e)?function(){return!e.apply(void 0,arguments)}:!e}var se=function(e){try{return decodeURIComponent(e)}catch(t){return e}},ce=function(e){return"string"==typeof e&&se(e)!==e};var ue={encode:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oe(t)&&ce(e)?e:encodeURIComponent(e)},decode:se};function le(e){return w(e)||null===e}var de=X,he=q,fe=K;const ve=function(e){var t=e.str,n=e.values,i=void 0===n?{}:n,r=e.pattern,a=void 0===r?ae:r,o=e.macros,s=void 0===o?re:o;P(t);var c=function(e){var t;return y({},(p(t={},he,ue.encode(e.category)),p(t,de,ue.encode(window.location.href,!0)),p(t,fe,Math.abs(Math.floor(1e9*Math.random()))),t),e)}(i);return t.replace(a,(function(e,t,n){var i=Object.keys(s).find((function(e){return s[e]===n})),r=c[i];return le(r)?e:r}))};function pe(e){return S(e)&&!Number.isNaN(e)}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};try{return e()}catch(e){return t(e)}}function Ae(e,t){return function n(i){return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var c=[].concat(a(i),o);return c.length>=e?t.apply(void 0,a(c)):n(c)}}([])}function ye(e){return Ae(e.length,e)}function ge(e){if(!l(e))throw new Error("reverseArgs argument must be a function");return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,a(n.reverse()))}}function be(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!l(e))throw new Error("pipe requires at least one function argument");return function(){var t=e.apply(void 0,arguments);return n.reduce((function(e,t){return t(e)}),t)}}function Ee(){if(!arguments.length)throw new Error("compose requires at least one argument");return ge(be).apply(void 0,arguments)}function ke(e){if(Array.isArray(e))return e}function Te(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ie(e,t){return ke(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||r(e,t)||Te()}function Ce(e,t){if(u(t))return t.map(e);if(h(t))return Object.entries(t).reduce((function(t,n){var i=Ie(n,2),r=i[0],a=i[1];return y(t,p({},r,e(a,r)))}),{});throw new Error("Cannot apply map to ".concat(t))}function we(){var e=window;try{for(;e.parent&&e!==e.parent&&e.parent.location.href;)e=e.parent}catch(e){}return e}var Re=window;function Se(e){return"object"===("undefined"==typeof Node?"undefined":o(Node))?e instanceof Node:e&&"object"===o(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function De(e){return"object"===("undefined"==typeof HTMLElement?"undefined":o(HTMLElement))?e instanceof HTMLElement:e&&"object"===o(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function Pe(e){if(!De(e))return{};var t=e.getBoundingClientRect(),n=t.top,i=t.left,r=t.width,a=t.height,o=function(){var e={},t=e.x,n=e.y;if(void 0!==Re.pageXOffset){var i="CSS1Compat"===(Re.document.compatMode||"")?Re.document.documentElement:Re.document.body;t=i.scrollLeft,n=i.scrollTop}else t=Re.pageXOffset,n=Re.pageYOffset;return{x:t,y:n}}(),s=o.x;return{top:o.y+n,left:s+i,width:r,height:a}}function Me(e){var t=e.children,n=e.childNodes;return w(t)?Array.from(n).filter((function(e){return e.nodeType===Node.ELEMENT_NODE})):Array.from(t)}function xe(e,t){e.addEventListener("click",t)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=void 0===t?"div":t,i=e.name,r=void 0===i?null:i,a=e.prefix,o=void 0===a?Y:a,s=e.id,c=void 0===s?null:s,u=e.style,l=void 0===u?null:u,h=e.content,v=void 0===h?null:h,p=e.events,m=void 0===p?null:p,y=e.children,g=A({},e.attributes),b=Re.document.createElement(n),E=o?"".concat(o,"-"):"";if(r){var k="".concat(E).concat(r).concat(g.class?" ".concat(g.class):"");delete g.class,g=A({class:k},g)}return c&&(g=A({id:"".concat(E).concat(r?"".concat(r,"-"):"").concat(c)},g)),f(g,(function(e,t){"data"===t&&d(e)?f(e,(function(e,t){b.setAttribute("data-".concat(t),e)})):b.setAttribute(t,e)})),v&&(b.innerHTML=v),l&&We(b,l),m&&f(m,(function(e,t){"click"===t?xe(b,e):b.addEventListener(t,e)})),y&&Le(b,y),b}function Le(e,t){Se(e)&&t&&(u(t)?t:[t]).forEach((function(t){De(t)?e.appendChild(t):d(t)&&e.appendChild(Oe(t))}))}function Ve(e){De(e)&&e.parentNode&&e.parentNode.removeChild(e)}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.tagName,i=e.attributes,r=void 0===i?[]:i,a=e.childNodes,o=void 0===a?[]:a,s=document.createElement(n);return Array.from(r).forEach((function(e){var t=e.name,n=e.value;return s.setAttribute(t,n)})),t&&Array.from(o).forEach((function(e){var n=e.nodeType===Node.TEXT_NODE?e.cloneNode(t):Ne(e,t);s.appendChild(n)})),s}var Fe=function(e){return e.replace(/\r?\n|\r/g,"").replace(/\s\s+/g," ").trim()};function Ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.overwrite,r=void 0!==i&&i,a=n.concat,o=void 0!==a&&a,s=n.wind,c=void 0===s?Re:s;if(!oe(e)&&!oe(R(t))){var u="".concat(Y,"-").concat(e),l=c.document.getElementById(u),d=Fe(t),h=function(e){if(e.styleSheet)e.styleSheet.cssText+=d;else{var t=c.document.createTextNode(d);e.appendChild(t)}return e},f=function(){return Fe(l.textContent).includes(d)};if(l&&oe(r))o&&oe(f())&&h(l);else{r&&Ve(l);var v=ye(Le)(c.document.head),p={type:"style",attributes:{id:u,type:"text/css"}};Ee(v,h,Oe)(p)}}}function _e(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(De(e)&&R(t)&&(n||r)&&(!r||!["add","remove"].includes(t)||(e.className="","remove"!==t))){var o=u(n)?n:[n];(i=e.classList)[t].apply(i,a(o))}}function Be(e){return Ce((function(e,t){return function(e){return["line-height"].every((function(t){return oe(e.includes(t))}))}(t)&&function(e){return["top","left","right","bottom","width","height","margin","padding","border"].some((function(t){return e.includes(t)}))}(t)&&pe(e)?"".concat(e,"px"):e}),e)}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(De(e)){n&&e.removeAttribute("style");var i=Be(t);y(e.style,i)}}function ze(e){if(De(e)){var t=Re.getComputedStyle(e),n=e.clientWidth,i=e.clientHeight;return{height:i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),width:n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}}return null}function Ge(e,t){var n,i="inner".concat(t),r="client".concat(t);return e[i]?n=e[i]:e.document&&e.document.documentElement&&e.document.documentElement[r]&&(n=e.document.documentElement[r]),n}function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;return Ge(e,"Width")}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;return Ge(e,"Height")}function Ye(e){if(oe(De(e)))return null;var t=e.getBoundingClientRect(),n=function e(t,n){var i=me((function(){return t.defaultView.frameElement}));if(oe(i))return n;var r=i.getBoundingClientRect().top;return e(i.ownerDocument,n+r)}(Re.document,t.top),i=t.height+n,r=je(we());return{isIntersecting:n>=0&&n<=r||i>=0&&i<=r,isInViewport:n>=0&&i<=r,isAbove:n>r,isBelow:i<0}}function Ze(e){return R(e)&&""!==e}function Ke(e){return new Promise((function(t){try{P(e);var n=new Image(1,1);n.addEventListener("load",(function(){t(!0)})),n.addEventListener("error",(function(e){L.warning("",e),t(!1)})),n.src=e}catch(e){L.warning("",e),t(!1)}}))}function Xe(e){return new Promise((function(t){try{P(e);var n=Oe({type:"script",attributes:{async:!0,src:e},events:{load:function(){t(!0)},error:function(e){L.warning("",e),t(!1)}}});Le(document.body,n)}catch(e){L.warning("",e),t(!1)}}))}function Qe(e){var t=e.ap,n=e.it,i=e.tp,r=e.pb,o=e.pos,s=e.loop,c=e.pbt,u=e.pbid,l=e.errorMsg,d=[].concat(a(Ze(t)?["ap=".concat(t)]:[]),a(Ze(n)?["it=".concat(n)]:[]),a(Ze(i)?["tp=".concat(i)]:[]),a(S(r)?["pb=".concat(r)]:[]),a(S(o)?["pos=".concat(o)]:[]),a(S(s)?["loop=".concat(s)]:[]),a(Ze(c)?["pbt=".concat(c)]:[]),a(Ze(u)?["pbid=".concat(u)]:[]),a(Ze(l)?["err=".concat(l)]:[])).join("&");return Ke("".concat("https://track.sunmedia.tv","/?").concat(d))}var qe="SCRIPT",Je="IMAGE",$e="HTML",et=/(\[ad\.)([\w]+)(])/gi,tt={adSystem:"system",adTitle:"title",category:"category",advertiser:"advertiser",pricing:"pricing",adServingId:"servingid"};function nt(e){var t=e.data,n=e.macroValues,i=e.adDataValues,r=t;return r=ve({str:r,values:n}),r=ve({str:r,values:i,pattern:et,macros:tt})}function it(e){return rt.apply(this,arguments)}function rt(){return(rt=b(C().mark((function e(t){var n,i,r,a,o,s,c,u,l,d,h,v,p;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,i=void 0===n?"":n,r=t.type,a=void 0===r?Je:r,o=t.macroValues,s=void 0===o?{}:o,c=t.adDataValues,u=void 0===c?{}:c,P(i),d=(l={}).jsElements,h=l.js,v=l.uri,p=document.createElement("div"),e.t0=a.toUpperCase(),e.next=e.t0===Je?7:e.t0===$e?9:e.t0===qe?13:17;break;case 7:return v=nt({data:i,macroValues:s,adDataValues:u}),e.abrupt("return",Ke(v));case 9:return(p=document.createElement("div")).innerHTML=nt({data:i,macroValues:s,adDataValues:u}),document.body.appendChild(p),e.abrupt("break",18);case 13:return p.innerHTML=nt({data:i,macroValues:s,adDataValues:u}),(d=p.getElementsByTagName("script"))&&d.length>0&&(f(Array.from(d),(function(e){h=document.createElement("script"),e.src?h.src=e.src:window.eval(e.innerHTML)})),document.getElementsByTagName("head")[0].appendChild(h)),e.abrupt("break",18);case 17:throw new Error("Unknown data type.");case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return pe(e)&&e>0}var ot={OPPORTUNITY:{key:"opportunity",val:"op"},REQUEST:{key:"request",val:"req"},REQUEST_ERROR:{key:"requestError",val:"reqe"},MAX_REQUESTS_REACHED:{key:"maxRequestsReached",val:"maxreq"},EFFECTIVE:{key:"effective",val:"ef"},INVENTORY:{key:"inventory",val:"inv"},UNFILLED:{key:"unfilled",val:"unf"},START:{key:"start",val:"st"},IMPRESSION:{key:"impression",val:"imp"},FIRST_QUARTILE:{key:"firstQuartile",val:"fq"},MIDPOINT:{key:"midpoint",val:"mp"},THIRD_QUARTILE:{key:"thirdQuartile",val:"tq"},COMPLETE:{key:"complete",val:"co"},SKIP:{key:"skip",val:"sk"},CLICK:{key:"click",val:"clk"},MUTE:{key:"mute",val:"mu"},UNMUTE:{key:"unmute",val:"um"},PAUSE:{key:"pause",val:"pa"},REWIND:{key:"rewind",val:"rw"},PLAYER_EXPAND:{key:"playerExpand",val:"pe"},PLAYER_COLLAPSE:{key:"playerCollapse",val:"pc"},ACCEPT_INVITATION_LINEAR:{key:"acceptInvitationLinear",val:"ai"},TIME_SPENT_VIEWING:{key:"timeSpentViewing",val:"ts"},OTHER_AD_INTERACTION:{key:"otherAdInteraction",val:"oa"},PROGRESS:{key:"progress",val:"pr"},CREATIVE_VIEW:{key:"creativeView",val:"cv"},ACCEPT_INVITATION:{key:"acceptInvitation",val:"ac"},MINIMIZE:{key:"minimize",val:"mi"},CLOSE:{key:"close",val:"cl"},OVERLAY_VIEW_DURATION:{key:"overlayViewDuration",val:"ov"},VIEWABILITY:{key:"viewability",val:"vw"},ERROR:{key:"error",val:"err"},RESUMED:{key:"resumed",val:"rs"},CLOSE_MODE:{key:"closeMode",val:"mc"},NOVIEWABILITY:{key:"noviewability",val:"nvw"},AD_LOADED:{key:"adLoaded",val:"adl"},AD_STARTED:{key:"AdStarted",val:"adt"},AD_RESUMED:{key:"adResumed",val:"adr"},AD_STOPPED:{key:"adStopped",val:"ads"},AD_PLAYING:{key:"adPlaying",val:"adp"},AD_EXPAND:{key:"adExpand",val:"ad"},AD_COLLAPSE:{key:"adCollapse",val:"ao"},AD_SIZE_CHANGE:{key:"adSizeChange",val:"asz"},AD_EXPANDED_CHANGE:{key:"adExpandedChange",val:"aec"},AD_VIDEO_START:{key:"adVideoStart",val:"avs"},AD_VIDEO_COMPLETE:{key:"adVideoComplete",val:"avc"},AD_VOLUME_CHANGE:{key:"adVolumeChange",val:"avh"},AD_SECOND_CREATIVE_OPENED:{key:"AdSecondCreativeOpened",val:"asco"},AD_ELAPSED_TIME:{key:"AdElapsedTime",val:"aet"},NATIVE_REQUEST:{key:"nativeRequest",val:"nreq"},NATIVE_IMPRESSION:{key:"nativeImpression",val:"nimp"},NATIVE_UNFILLED:{key:"nativeUnfilled",val:"nunf"},NATIVE_CREATIVE_IMPRESSION:{key:"nativeCreativeImpression",val:"ncimp"},NATIVE_CREATIVE_UNFILLED:{key:"nativeCreativeUnfilled",val:"ncunf"},NATIVE_CREATIVE_CLICK:{key:"nativeCreativeClick",val:"ncclk"},PLAYER_IMPRESSION:{key:"playerImpression",val:"vimp"},CONTAINER_SIZE_ERROR:{key:"sizerr",val:"sizerr"},ALTERNATIVE:{key:"alternative",val:"alt"},REMINDER:{key:"reminder",val:"rem"}},st={},ct={};function ut(e){return ct[e]}Object.keys(ot).forEach((function(e){var t=ot[e],n=t.key,i=t.val;st[e]=n,ct[n]=i}));const lt={Type:{UI:{PLAY_CLICKED:"UIPlayClicked",SKIP_CLICKED:"UISkipClicked",CLOSE_CLICKED:"UICloseClicked",RESTART_CLICKED:"UIRestartClicked",VOLUME_CHANGED:"UIVolumeChanged",FULLSCREEN_CHANGED:"UIFullscreenChanged"},SDK:{AD_PRELOAD:"SMAdPreload",AD_FACTORY:"SMAdFactory",AD_FACTORY_PROGRAMMATIC_DISPLAY:"SMAdFactorySSPVpaidSize",RESIZE_PROGRAMMATIC_DISPLAY:"SMResizeProgrammaticDisplay",NO_MORE_TAGS:"SMNoMoreTags",REQUEST:"SMRequest",REQUEST_ERROR:"SMRequestError",MAX_REQUESTS_REACHED:"SMMaxRequestsReached",UPDATE_OPTIONS:"SMUpdateOptions",BROADCAST:"SMBroadcast",CLOSE:"SMClosed"},DWH:y({},st),VAST:{IMPRESSION:"impression",CLICK_TRACKING:"clickTracking",ERROR:"error",VIEWABLE:"viewable",NOT_VIEWABLE:"notViewable",VIEWABILITY_UNDETERMINED:"viewabilityUndetermined",CREATIVE_VIEW:"creativeView",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",MUTE:"mute",UNMUTE:"unmute",PAUSE:"pause",REWIND:"rewind",RESUME:"resume",SKIP:"skip",CLOSE:"close",CLOSE_LINEAR:"closeLinear",FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"exitFullscreen",EXPAND:"expand",COLLAPSE:"collapse",PLAYER_EXPAND:"playerExpand",PLAYER_COLLAPSE:"playerCollapse",USER_INTERACT:"userInteract"},VPAID:{AD_LOADED:"AdLoaded",AD_STARTED:"AdStarted",AD_STOPPED:"AdStopped",AD_SKIPPED:"AdSkipped",AD_SKIPPABLE_STATE_CHANGE:"AdSkippableStateChange",AD_SIZE_CHANGE:"AdSizeChange",AD_LINEAR_CHANGE:"AdLinearChange",AD_DURATION_CHANGE:"AdDurationChange",AD_EXPANDED_CHANGE:"AdExpandedChange",AD_VOLUME_CHANGE:"AdVolumeChange",AD_IMPRESSION:"AdImpression",AD_VIDEO_START:"AdVideoStart",AD_VIDEO_FIRST_QUARTILE:"AdVideoFirstQuartile",AD_VIDEO_MIDPOINT:"AdVideoMidpoint",AD_VIDEO_THIRD_QUARTILE:"AdVideoThirdQuartile",AD_VIDEO_COMPLETE:"AdVideoComplete",AD_CLICK_THRU:"AdClickThru",AD_INTERACTION:"AdInteraction",AD_USER_ACCEPT_INVITATION:"AdUserAcceptInvitation",AD_USER_MINIMIZE:"AdUserMinimize",AD_USER_CLOSE:"AdUserClose",AD_PAUSED:"AdPaused",AD_PLAYING:"AdPlaying",AD_LOG:"AdLog",AD_ERROR:"AdError",AD_VIEWABILITY_VIEWABLE:"AdViewabilityViewable",AD_VIEWABILITY_NOT_VIEWABLE:"AdViewabilityNotViewable",AD_VIEWABILITY_UNDETERMINED:"AdViewabilityUndetermined"},FORMAT:{CREATED:"SMFormatCreated",ENGAGE:"SMFormatEngaged",CLICK:"SMFormatClicked",CLICK_ON_PLAY:"SMFormatClickedOnPlay",DESTROYED:"SMFormatDestroyed"}}};var dt={CLIENT:0,SUNMEDIA:1},ht=[lt.Type.DWH.OPPORTUNITY,lt.Type.DWH.REQUEST,lt.Type.DWH.EFFECTIVE,lt.Type.DWH.UNFILLED],ft=function(){var e=b(C().mark((function e(t,n,i,r){var a,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.info("Firing tracking for ".concat(t," Default event")),!((a=n.filter((function(e){return t===e.event}))).length>0)){e.next=5;break}return o=Ce((function(e){return it({type:e.type,data:e.data,macroValues:i,adDataValues:r})}),a),e.abrupt("return",Promise.all(o));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),vt=function(){function e(t){var n=this,i=t.it,r=t.app,a=t.pos,o=t.defaultTrackers;E(this,e),this.it=i,this.app=r,this.pos=a,this.defaultTrackers=[],f(o,(function(e){var t=e.event,i=e.type,r=e.data,a=ut(t);w(a)||n.defaultTrackers.push({event:a,type:i,data:r})})),this.loop=1,this.silent=!1,this.macroValues={},this.trackersLog=[],this.firedTrackerByName={},f(lt.Type.DWH,(function(e){n.firedTrackerByName["".concat(e,"-").concat(1)]=0,n.firedTrackerByName["".concat(e,"-").concat(0)]=0}))}var t,n,i;return T(e,[{key:"setMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.silent=e}},{key:"setLoop",value:function(e){w(e)||(this.loop=e)}},{key:"logTracker",value:function(e){this.trackersLog.push(e)}},{key:"hasBeenFired",value:function(e,t){return at(this.firedTrackerByName["".concat(e,"-").concat(t)])}},{key:"_fire",value:(i=b(C().mark((function e(t){var n,i,r,a,o,s,c,u=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:{},i=u.length>2&&void 0!==u[2]?u[2]:{},r=u.length>3&&void 0!==u[3]?u[3]:{},a=n.tp,o=n.pb,this.firedTrackerByName["".concat(t,"-").concat(o)]+=1,this.logTracker(t),!1!==this.silent){e.next=10;break}return s=Qe(A({loop:this.loop,pos:this.pos,ap:this.app,it:this.it},n)),c=ft(a,this.defaultTrackers,i,r),e.abrupt("return",Promise.all([s,c]).then((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return[e].concat(n)})));case 10:return e.abrupt("return",Promise.resolve([]));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_fireOnlyOnce",value:(n=b(C().mark((function e(t,n,i,r){var a;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.pb,this.firedTrackerByName["".concat(t,"-").concat(a)]){e.next=3;break}return e.abrupt("return",this._fire(t,n,i,r));case 3:return e.abrupt("return",Promise.reject());case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,i,r){return n.apply(this,arguments)})},{key:"fire",value:(t=b(C().mark((function e(t){var n,i,r,a,o,s,c,u,l,d=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},i=ut(t),r=n.pb,!w(i)&&!w(r)){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:if(a=n.pbt,o=n.pbid,s=n.macroValues,c=n.adDataValues,u=n.errorMsg,l={tp:i,pb:r,pbt:a,pbid:o,errorMsg:u},!ht.includes(t)){e.next=9;break}return e.abrupt("return",this._fireOnlyOnce(t,l,s,c));case 9:return e.abrupt("return",this._fire(t,l,s,c));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"create",value:function(t){var n=new e(t);return n.PB_CHOICES=dt,n}}]),e}(),pt=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!D(e))throw new Error("".concat(t," should be a valid UUID!"))}(e,"uuid")},mt=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!S(e))throw new Error("".concat(t," should be a number!"))}(e,"instanceIndex")},At=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null===e||w(e))throw new Error("".concat(t," is required!"))}(e,"instance")},yt=function(e){if(!pe(e)&&!Ze(e))throw new Error('"api" should be a valid number or string!')},gt=function(){function e(){E(this,e),this.wind=we(),this.wind.__sm__=this.wind.__sm__||{}}return T(e,[{key:"register",value:function(e){At(e);var t=e.instanceIndex,n=e.config.it;pt(n),mt(t),this.wind.__sm__.instances=this.wind.__sm__.instances||[];if(this.wind.__sm__.instances.some((function(e){return e.instanceIndex===t&&e.config.it===n})))throw new Error("Integration already exists");this.wind.__sm__.instances.push(e)}},{key:"removeByApi",value:function(e){yt(e);this.wind.__sm__.instances=this.wind.__sm__.instances.filter(oe((function(t){return t.api===e})))}},{key:"fetchInstancesOfPlugin",value:function(e){var t;return function(e){P(e,"platformPlugin")}(e),(null===(t=this.wind.__sm__.instances)||void 0===t?void 0:t.filter((function(t){return t.config.platformPlugin===e})))||[]}},{key:"fetchInstancesOfIntegration",value:function(e){var t;return pt(e),(null===(t=this.wind.__sm__.instances)||void 0===t?void 0:t.filter((function(t){return t.config.it===e})))||[]}},{key:"fetchAllInstances",value:function(){return a(this.wind.__sm__.instances||[])}},{key:"fetchInstance",value:function(e,t){var n;return pt(e),mt(t),null===(n=this.wind.__sm__.instances)||void 0===n?void 0:n.find((function(n){return n.config.it===e&&n.instanceIndex===t}))}},{key:"fetchInstanceByApi",value:function(e){var t;return yt(e),null===(t=this.wind.__sm__.instances)||void 0===t?void 0:t.find((function(t){return t.api===e}))}},{key:"nextInstanceIndex",value:function(e){var t=this.fetchInstancesOfIntegration(e),n=0;return t.forEach((function(e){n=Math.max(e.instanceIndex+1,n)})),n}},{key:"getState",value:function(e){var t=this.wind.__sm__.store,n=void 0===t?{}:t;return n[e]?A({},n[e]):void 0}},{key:"setState",value:function(e,t){this.wind.__sm__.store=this.wind.__sm__.store||{},this.wind.__sm__.store[e]=A({},t)}}]),e}();var bt=new gt;var Et=Ae(2,Ce);var kt=Ae(2,(function(e,t){if(u(t))return t.filter(e);if(h(t))return Object.entries(t).reduce((function(t,n){var i=Ie(n,2),r=i[0],a=i[1];return A(A({},t),e(a,r)&&p({},r,a))}),{});throw new Error("Cannot apply filter to ".concat(t))}));function Tt(){}function It(e){return d(e)?Object.entries(e).map((function(e){var t=Ie(e,2);return p({},t[0],t[1])})):[]}function Ct(e){if(!d(e))return e;var t,n,i,r,a,o;return u(e)?t=e.map((function(e){return Ct(e)})):l(e)?(a=(r=e).__isClone?r.__clonedFrom:r,o=a.bind({}),f(a,(function(e,t){o[t]=e})),o.__isClone=!0,o.__clonedFrom=a,t=o):d(e)?(i=(n=e).constructor?new n.constructor:{},f(n,(function(e,t){i[t]=Ct(e)})),t=i):t=JSON.parse(JSON.stringify(e)),t}function wt(e,t){var n=(e||{}).callback;if(Ze(n)&&l(window[n]))try{L.info("Fire options callback",{callback:n,payload:t}),window[n](t)}catch(e){L.error("Fire options callback",{err:e})}}function Rt(e){return St.apply(this,arguments)}function St(){return St=b(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],n={},e.next=4,Promise.all(t.map((function(e){return e().catch((function(e){return L.error("calling service",e)}))})));case 4:return e.sent.forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,i=e.data;R(t)&&d(i)&&(n[t]=i)})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=new Promise((function(e,i){t=setTimeout((function(){i(new Error("Promise timed out in ".concat(n," ms")))}),n)}));return Promise.race([e,i]).then((function(e){return clearTimeout(t),e})).catch((function(e){throw clearTimeout(t),e}))}function Pt(e){return/^([a-z][a-z\d+-.]*:)?\/\//i.test(e)}function Mt(){var e={};function t(t,n){e[n]=h(t)?Mt(e[n],t):e[n]=t}for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach((function(e){f(e,t)})),e}const xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,e),this.defaults=t}return T(e,[{key:"dispatchRequest",value:function(e){if(e.baseURL&&e.url&&!Pt(e.url)){var t=e.baseURL.replace(/\/+$/,""),n=e.url.replace(/^\/+/,"");e.url="".concat(t,"/").concat(n)}return e.headers=e.headers||{},f(e.transformRequest,(function(t){e.data=t(e.data,e.headers)})),e.headers=Mt(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),f(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||this.defaults.adapter)(e).then((function(t){return f(e.transformResponse,(function(e){t.data=e(t.data,t.headers)})),t}),(function(t){return t&&t.response&&f(e.transformResponse,(function(e){t.response.data=e(t.response.data,t.response.headers)})),Promise.reject(t)}))}},{key:"request",value:function(e){return e=R(e)?{url:e}:e||{},(e=Mt(this.defaults,e)).method=e.method?e.method.toLowerCase():"get",this.dispatchRequest(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(Mt(t,{method:"GET",url:e}))}}]),e}();function Ot(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function Lt(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vt(e){var t=[];return f(e,(function(e,n){if(null!==e&&!w(e)){var i=n,r=e;u(e)?i="".concat(n,"[]"):r=[e],f(r,(function(e){var n=e;!function(e){return"[object Date]"===c(e)}(e)?d(e)&&(n=JSON.stringify(e)):n=e.toISOString(),t.push("".concat(Lt(i),"=").concat(Lt(n)))}))}})),t.join("&")}function Nt(e){var t,n,i,r={$:(t=e,n=t.attributes,i={},f(n,(function(e){var t=e.name,n=e.value;i[t]=n})),i)},a=Me(e);return a.length>0?f(a,(function(e){var t=e.tagName;r[t]=r[t]||[],r[t].push(Nt(e))})):r._=e.textContent.trim(),r}function Ft(e){var t=e.firstChild;return p({},t.tagName,Nt(t))}const Ut=function(e){var t;return DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)),Ft(t)};function _t(e,t){!w(e)&&w(e["Content-Type"])&&(e["Content-Type"]=t)}var Bt=new xt({adapter:function(e){return new Promise((function(t,n){var i=e.data,r=e.headers,a=new XMLHttpRequest,o=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vt;if(!t)return e;var r=e;if(n=Ot(t)?t.toString():i(t)){var a=e.indexOf("#");-1!==a&&(r=e.slice(0,a)),r+=(-1===e.indexOf("?")?"?":"&")+n}return r}(e.url,e.params,e.paramsSerializer);if(a.open(e.method.toUpperCase(),o,!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in a?a.getAllResponseHeaders():null,r={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:i,config:e,request:a},o=r.config.validateStatus;!o||o(r.status)?t(r):n(new Error("Request failed with status code ".concat(r.status))),a=null}},a.onabort=function(){a&&(n(new Error("Request aborted")),a=null)},a.onerror=function(){n(new Error("Network Error")),a=null},a.ontimeout=function(){n(new Error("timeout of ".concat(e.timeout,"ms exceeded"))),a=null},"setRequestHeader"in a&&f(r,(function(e,t){w(i)&&"content-type"===t.toLowerCase()?delete r[t]:a.setRequestHeader(t,e)})),e.withCredentials&&(a.withCredentials=!0),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}void 0===i&&(i=null),a.send(i)}))},transformRequest:[function(e,t){return Ot(e)?(_t(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):d(e)?(_t(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if(R(e))try{e=JSON.parse(e)}catch(e){}return e},function(e){if(R(e))try{e=Ut(e)}catch(e){}return e}],timeout:0,maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}});Bt.create=function(e){var t=v(Bt.defaults,e);return new xt(t)};const Wt=Bt;var zt={};var Gt=Wt.create({transformResponse:[function(e){if(R(e))try{t=function(e){var t=[],n=e;return 0!==n.indexOf('"use strict"')&&(n="'use strict';".concat(n)),n=n.replace(/export default/,"exports.default =").replace(/export\s*\{([\s\S]*?)\}/gi,(function(e,t){var n="";return t.split(",").forEach((function(e){var t=e.trim().split(" as ");n+="exports.".concat(t[1]||t[0]," = ").concat(t[0],";")})),n})).replace(/export\s+(const|function|class|let|var)\s+(.+?)(?=(\(|\s|=))/gi,(function(e,n,i){return t.push(i)&&"".concat(n," ").concat(i)})),t.forEach((function(e){n+="exports.".concat(e," = ").concat(e,";")})),n}(e),n={},new Function("exports",t)(n),e=n}catch(e){}var t,n;return e}]});const Ht=function(e,t){return function(e){return/(https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/.test(e)}(e)?Dt(function(e){return zt[e]?Promise.reject(zt[e]):Gt.get(e).then((function(t){var n=t.data;return zt[e]=n,n}))}(e),t):Promise.reject(new Error("Invalid url"))};function jt(e,t){var n=R(e)?e.trim():null,i=function(e){return Ee(oe,Ze)(e)};if(i(n)||i(t))return Promise.resolve(null);var r="".concat("https://static.sunmedia.tv","/").concat(t,"/extras/").concat(n,"/extra.js");return Ht(r,"7000").then((function(e){return e.default||e})).catch((function(e){return L.error("Importing the extra",e),null}))}function Yt(e,t){var n=t.document.getElementsByTagName("script");return Array.from(n).find((function(t){return t.src.includes("".concat(e,".js"))}))}function Zt(e,t){var n=t.excludeNodeTagNames,i=1,r=1,a=(e||{}).parentElement;return Array.from((null==a?void 0:a.children)||[]).forEach((function(t){var a=t.tagName.toLowerCase();n.includes(a)||(i+=1),t===e&&(r=i)})),r}var Kt="1.0,1",Xt=function(e){return"!".concat("sunmedia.tv",",").concat(e,",").concat("1",",").concat("",",").concat("",",").concat("")};function Qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt;P(e,"publisherId"),P(t,"prefix");var n=Xt(e);return"".concat(t).concat(n)}function qt(e){var t,n,i=[];((n=navigator.userAgent||navigator.vendor||window.opera).indexOf("FBAN")>-1||n.indexOf("FBAV")>-1)&&i.push("FB");var r,a=(r=null==e||null===(t=e.main)||void 0===t?void 0:t.temp)?Math.round(r-273.15):r;return a&&i.push("T".concat(a)),i.length>0?i.join(","):null}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){return $t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$t(e,t)}function en(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}function tn(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?Jt(e):t}function nn(e){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nn(e)}var rn=function(e){P(e,"Event name")},an=function(e){M(e,"Handler")};const on=function(){function e(t){E(this,e),this.logger=t||L,this.listeners={}}return T(e,[{key:"on",value:function(e,t){rn(e),an(t);var n=this.listeners[e];n||(n=[],this.listeners[e]=n),n.push(t)}},{key:"once",value:function(e,t){var n=this;an(t);var i=function i(r){n.off(e,i),t.call(n,r)};this.on(e,i)}},{key:"off",value:function(e,t){rn(e),an(t);var n=this.listeners[e];if(n){var i=n.indexOf(t);n.splice(i,1),0===n.length&&delete this.listeners[e]}}},{key:"offAll",value:function(e){w(e)?this.listeners={}:(rn(e),this.listeners[e]=[],delete this.listeners[e])}},{key:"emit",value:function(e,t){var n=this;rn(e);var i=this.listeners[e];i&&i.forEach((function(e){try{e.call(n,t)}catch(e){n.logger.error({message:"Calling event listener",error:e})}}))}},{key:"hasListeners",value:function(e){return rn(e),u(this.listeners[e])&&this.listeners[e].length>0}}]),e}();var sn=function(){function e(t){E(this,e),this.wind=t||window,this.smuAgent=this.wind.navigator.userAgent.toLowerCase()}return T(e,[{key:"find",value:function(e){return-1!==this.smuAgent.indexOf(e)}},{key:"getBrowser",value:function(){return this.isIE()?"ie":this.isEdge()?"edge":this.isChrome()?"chrome":this.isFirefoxOS()?"firefox":this.isSafari()?"safari":this.isOpera()?"opera":this.smuAgent.match(/webkit/gi)?"webkit":this.smuAgent.match(/gecko/gi)?"gecko":null}},{key:"getOS",value:function(){return this.isWindows()?"windows":this.isMacOS()?"macos":this.isIOs()?"ios":this.isAndroid()?"android":this.isLinux()?"linux":this.isBlackberry()?"blackberry":this.isMeego()?"meego":null}},{key:"isDesktop",value:function(){return!this.isMobile()&&!this.isTablet()}},{key:"isMobile",value:function(){return this.isAndroidPhone()||this.isIPhone()||this.isIPod()||this.isWindowsPhone()||this.isBlackberryPhone()||this.isFirefoxOSAndroid()||this.isMeego()}},{key:"isTablet",value:function(){return this.isIPad()||this.isAndroidTablet()||this.isBlackberryTablet()||this.isWindowsTablet()}},{key:"isIOs",value:function(){return this.isIPhone()||this.isIPod()||this.isIPad()}},{key:"isIPhone",value:function(){return!this.isWindows()&&this.find("iphone")}},{key:"isIPod",value:function(){return this.find("ipod")}},{key:"isIPad",value:function(){return this.find("ipad")}},{key:"isAndroid",value:function(){return!this.isWindows()&&this.find("android")}},{key:"isAndroidPhone",value:function(){return this.isAndroid()&&this.find("mobile")}},{key:"isAndroidTablet",value:function(){return this.isAndroid()&&!this.find("mobile")}},{key:"isBlackberry",value:function(){return this.find("blackberry")||this.find("bb10")||this.find("rim")}},{key:"isBlackberryPhone",value:function(){return this.isBlackberry()&&!this.find("tablet")}},{key:"isBlackberryTablet",value:function(){return this.isBlackberry()&&this.find("tablet")}},{key:"isLinux",value:function(){return this.find("linux")}},{key:"isMacOS",value:function(){return this.find("macintosh")}},{key:"isWindows",value:function(){return this.find("windows")}},{key:"isWindowsPhone",value:function(){return this.isWindows()&&this.find("phone")}},{key:"isWindowsTablet",value:function(){return this.isWindows()&&this.find("touch")&&!this.isWindowsPhone()}},{key:"isFirefoxOS",value:function(){return this.find("firefox")}},{key:"isFirefoxOSAndroid",value:function(){return this.isFirefoxOS()&&this.find("android")}},{key:"isMeego",value:function(){return this.find("meego")}},{key:"isIE",value:function(){return this.find("msie")||this.find("trident")}},{key:"isEdge",value:function(){return this.find("edge/")||this.find("edg/")}},{key:"isChrome",value:function(){return(this.find("chrome")||this.find("crios"))&&/Google Inc/.test(navigator.vendor)&&!this.isOpera()}},{key:"isSafari",value:function(){return this.find("safari")&&!this.isOpera()}},{key:"isOpera",value:function(){return this.find("opera")||this.find("opr")}}]),e}();var cn,un,ln=((un=new sn(cn)).device=un.isDesktop()?"desktop":"mobile",un.browser=un.getBrowser(),un.os=un.getOS(),un);function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var hn={get:function(e,t,n){return Reflect.has(e,t)?Reflect.get(e,t,n):function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.emit.apply(e,[t].concat(i))}}},fn=function(t){en(i,t);var n=dn(i);function i(e,t){var r;if(E(this,i),!e)throw new Error("A plugin is required!");return(r=n.call(this)).plugin=e,r.addMany(t),tn(r,new Proxy(Jt(r),hn))}return T(i,[{key:"addMany",value:function(e){var t=this;u(e)?e.forEach((function(e){var n=Ie(Object.entries(e)[0],2),i=n[0],r=n[1];t.add(i,r)})):f(e,(function(e,n){t.add(n,e)}))}},{key:"add",value:function(e,t){this.on(e,t)}},{key:"emit",value:function(t){for(var n=this,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o=this.listeners[t];o&&o.forEach((function(i){i.call.apply(i,[null,n.plugin,e].concat(r)),L.info('Hook "'.concat(t,'" was called'))}))}}],[{key:"beforeCreate",value:function(t,n){var i=function(e){return l(e.beforeCreate)};return(t||[]).filter(i).forEach((function(t){return t.beforeCreate(n,e)})),t.filter(oe(i))}}]),i}(on);const vn=fn;var pn=["true","1","yes"],mn=["false","0","no"];function An(e){if(!R(e))throw new Error("stringToBoolean expects one argument of type string");var t=e.toLowerCase().trim();return!!pn.includes(t)||!mn.includes(t)&&null}var yn=Q,gn=J;const bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=A({},e);return null!=e&&e[yn]&&(t[yn]=ue.decode(e[yn])),null!=e&&e[gn]&&(t[gn]=An(e[gn])?H:j),t};function En(e){return!0===e||!1===e||"[object Boolean]"===c(e)}const kn=function(e,t){if(oe(!!re[e]))return!1;var n=Ze(t)&&oe(t.match(ae)||"undefined"===t||"null"===t);return!oe(n)&&(e!==J||!oe(En(An(t))))};var Tn=function(){function e(t){var n=t.pluginFactory,i=t.config,r=t.services,a=t.components,o=t.genericExtras,s=t.currentScript,c=t.validateIntegration;E(this,e),this.app="smptf",this.pluginFactory=n,this.config=i,this.services=r,this.components=a,this.genericExtras=o,this.currentScript=s,this.validateIntegration=c,this.hooks=[]}var t,n;return T(e,[{key:"init",value:(n=b(C().mark((function e(){var t,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.config&&D(this.config.it)){e.next=3;break}throw new Error("Invalid config");case 3:return e.next=5,Rt(this.services);case 5:return t=e.sent,y(this.config,t),e.next=9,this.loadExtra();case 9:n=e.sent,this.hooks=this.setHooks(n),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),wt(this.config.options,{status:"SunMediaEnd",ads:0}),L.error(e.t0),e.abrupt("return");case 18:try{this.hooks=vn.beforeCreate(this.hooks,this.config),this.validateIntegration(this.config),this.createPluginInstances()}catch(e){L.error(e)}case 19:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return n.apply(this,arguments)})},{key:"loadExtra",value:(t=b(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jt(this.config.options.extra,this.config.path));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setHooks",value:function(t){var n=this,i=t||{},r=Ee(function(e){if(!l(e))throw new Error("flatMap argument must be a function");return function(t){return t.flatMap(e)}}(It),Et((function(e){return e.hooks}))),o=r(this.components),s=this.config.options.genericExtras||i.generics||[],c=Ee(r,Et((function(e){return n.genericExtras[e]||{}})))(s),u=It(i.hooks),d=[{afterClose:e.onInstanceClose}];return[].concat(d,a(o),a(c),a(u))}},{key:"createPluginInstances",value:function(){var e=this,t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(null==e||!e.it)throw new Error("Wrong arguments passed in");var i=null!=t&&t.parentElement?t:Yt(e.it,n);return i?{element:i,containerElem:i.parentElement,position:Zt(i,e.options),macros:A({},i.dataset)}:null}(this.config,this.currentScript),n=null==t?void 0:t.element.getAttribute("data-publisher");n&&(this.config.publisher=n);var i=this.setMacroValues(null==t?void 0:t.macros);(this.config.integrationInstances||[{}]).forEach((function(n){var r=n.index,a=null;try{(a=e.createInstance(r,i,t)).hooksManager.addMany(e.hooks),a.hooksManager.beforeInit(),a.init()}catch(e){a&&l(a.close)&&a.close(),e.extra?L.info("Plugin stopped by extra"):L.error("Creating or Initializing the plugin instance",e)}}))}},{key:"setMacroValues",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Q,i=ne,r=ie,a=Ee(bn,kt(ge(kn)))(t),o=bn(A((p(e={},n,this.config.category),p(e,i,Qt(this.config.publisher)),p(e,r,qt(this.config.geoTarget)),e),this.config.geoTarget)),s=A(A({},o),a);return Ct(s)}},{key:"createInstance",value:function(e,t,n){var i,r=(new Date).getTime().toString(),a=Ct(this.config),o=(i={app:this.app,it:a.it,pos:e,defaultTrackers:a.defaultTrackers},vt.create(i)),s=this.pluginFactory.create({api:r,instanceIndex:e,config:a,appTrackingEvents:o,macroValues:t,integrationScript:n});return bt.register(s),s}}],[{key:"onInstanceClose",value:function(e){try{bt.removeByApi(e.api),L.info("Instance closed",e)}catch(e){L.error("On instance close",e)}}},{key:"create",value:function(t){var n=t.pluginFactory,i=t.config,r=void 0===i?{}:i,a=t.services,o=void 0===a?[]:a,s=t.components,c=void 0===s?[]:s,u=t.genericExtras,l=void 0===u?{}:u,d=t.currentScript,h=t.validateIntegration,f=void 0===h?Tt:h;return L.setMode(r.DEBUG),L.info("DEBUG",r.DEBUG),new e({pluginFactory:n,config:r,services:o,components:c,genericExtras:l,currentScript:d,validateIntegration:f})}}]),e}();const In=Tn;function Cn(e,t){var n=l(e)?e:function(){return e};return function(){return n.apply(void 0,arguments)?t.apply(void 0,arguments):void 0}}function wn(e,t){return Object.entries(e).every((function(e){var n=Ie(e,2),i=n[0],r=n[1];return t[i]===r}))}var Rn={SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe"},Sn={SUBSCRIBE:"on",UNSUBSCRIBE:"off"},Dn=function(e){return l(e[Rn.SUBSCRIBE])&&l(e[Rn.UNSUBSCRIBE])},Pn=function(e){var t=Dn(e)?Rn:Sn,n=t.UNSUBSCRIBE;return{subscribeFn:e[t.SUBSCRIBE].bind(e),unsubscribeFn:e[n].bind(e)}};function Mn(e,t,n,i){return function(r){return function(a,o){if(!d(a))throw new Error("No listeners provided");var s=l(o),c=Dn(i);f(a,(function(i,a){var u=function(){if(!c||!s||n[a]){s&&(c?delete n[a]:o(a));for(var r,u,l=t.logWrapper?L.wrapWithName(t.logWrapper):L,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];if(l.info.apply(l,[a].concat(h)),t.emitHooks&&e.hooksManager)(r=e.hooksManager).emit.apply(r,["before".concat(a)].concat(h));if(i.apply(e,h),t.emitHooks&&e.hooksManager)(u=e.hooksManager).emit.apply(u,["after".concat(a)].concat(h));t.propagate&&e.emit&&e.emit.apply(e,[a].concat(h))}};r(a,u,e),n[a]=u}))}}}function xn(e){if(!d(e))throw new Error("The context needs to be provided");return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!d(t))throw new Error("No emitter provided");var i={},r=Pn(t),a=r.subscribeFn,o=r.unsubscribeFn,s=Mn(e,n,i,t),c=s(a),u=function(e){o(e,i[e]),delete i[e]},l=function(e){return c(e,u)},h=function(){return Object.keys(i).forEach(u)},f=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i[e]?i[e].apply(i,n):void 0};return{subscribe:c,subscribeOnce:l,unsubscribe:u,unsubscribeAll:h,emitEvent:f}}}function On(e){return R(e)?parseInt(e,10):e}function Ln(e){return/^\d+\:\d+$/gm.test(e)}var Vn={width:function(e,t){var n=On(e);if(!pe(n)||!Ln(t))return null;var i=Ie(t.split(":"),2);return n*i[0]/i[1]},height:function(e,t){var n=On(e);if(!pe(n)||!Ln(t))return null;var i=Ie(t.split(":"),2),r=i[0];return n*i[1]/r},ratio:function(e,t){var n=On(e),i=On(t);if(!pe(n)||!pe(i))return null;var r=function(e){return On(e.toFixed(3))},a=function(e){return e*Math.pow(10,3)},o=function e(t,n){return 0===n?t:e(n,t%n)}(n=a(r(n)),i=a(r(i)));return"".concat(n/o,":").concat(i/o)}},Nn=function(e){return Vn[e]||function(){return null}};function Fn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};M(n,"listener"),P(t,"event");var r=function r(){i()&&(e.removeEventListener(t,r),n())};return e.addEventListener(t,r),r}function Un(e){return _n.apply(this,arguments)}function _n(){return(_n=b(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,t);return Math.round(e*n)/n}function Wn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zn(e,t,n){return zn=Wn()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&$t(r,n.prototype),r},zn.apply(null,arguments)}var Gn=function(){function e(t){E(this,e),this.target=t}return T(e,[{key:"getTarget",value:function(){return this.target}},{key:"hasNativeSupport",value:function(){return!1}},{key:"createObserver",value:function(){throw new Error("Not implemented!")}},{key:"createInterval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return setInterval(e,t)}},{key:"subscribe",value:function(e){var t,n;(M(e,"callback"),this.hasNativeSupport())?t=this.createObserver(e):t=function(e){return{disconnect:function(){clearInterval(e)}}}(this.createInterval(e));return n=t,{unsubscribe:function(){n.disconnect()}}}},{key:"subscribeOnce",value:function(e){M(e,"callback");var t=this.subscribe((function(){t.unsubscribe(),e()}));return t}}]),e}();function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var jn="attributes",Yn=function(e){en(n,e);var t=Hn(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"hasNativeSupport",value:function(){return!0}},{key:"createObserver",value:function(e){var t=this.getTarget(),n=new MutationObserver((function(t){t.some((function(t){var n=t.attributeName,i=t.oldValue,r=t.type,a=t.target;return r===jn&&i!==a[n]&&(e(),!0)}))}));return n.observe(t,{attributes:!0,childList:!1,subtree:!1,attributeFilter:["src"],attributeOldValue:!0}),n}}],[{key:"createObservable",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zn(n,t)}}]),n}(Gn),Zn={FLASH:/\/x-shockwave-flash/i,IMAGE:/^image\/(gif|jpeg|jpg|png)$/i,HTTPS:/^https:?\/\//i,VPAID:/vpaid/i,JS:/javascript/i},Kn=("".concat("https://services.sunmedia.tv","/spd/vpaid.js"),{ADFORM:"https://s1.adform.net/banners/scripts/video/VPAIDWrapper.min.js"}),Xn="https://vast.adsafeprotected.com/vast?anId=925802",Qn="videoplaza.tv",qn=20,Jn=10,$n=5e3,ei="Reached maximum number of requests allowed (".concat($n,")"),ti="sm-skip-cross",ni="sm-counter-number",ii="\n@import url('https://fonts.googleapis.com/css?family=Lato');\n\n.sm-ui-container {\n    position: relative;\n    overflow: hidden;\n    min-height: 0;\n    height: 100%;\n    width: 100%;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    outline: none;\n    cursor: pointer;\n}\n\n.sm-ui-container .sm-media {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 3;\n    display: none;\n}\n.sm-ui-container .sm-media.sm-visible {\n    display: block;\n}\n\n.sm-ui-container .sm-media .sm-video {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: auto;\n    background-color: #000;\n    object-fit: contain;\n    visibility: hidden;\n}\n.sm-ui-container .sm-controls {\n    float: none;\n    cursor: pointer;\n    display: none;\n    z-index: 8;\n    position: absolute;\n    background-size: contain;\n    background-repeat: no-repeat;\n    box-sizing: border-box;\n}\n.sm-ad-container.sm-moving .sm-ui-container .sm-controls {\n    visibility: hidden;\n}\n.sm-ui-container .sm-controls.sm-visible {\n    display: block;\n}\n.sm-ui-container .sm-controls.sm-play {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAABCFBMVEUAAAD///////4AAAD+/v4yMjIAAAAAAAAAAAAAAAAAAAD5+fnw8PD+/fz9/fxoaGhbW1v7+/re3t7Q0NC8vLz8/Pz8+/v39/fy8vLt7e3s7Ozk5OTb29vJycmnp6eXl5d8fHxKSkoWFhb19fXh4eHW1tbAwMC6urqtra2fn5+MjIz4+Pj39/f19fXx8fHp6eno6Ojb29vU1NSvr6/0mDH//v7///7//////fz1oUL++PH97t73sGH0mzb96tX2pk31nTv//Pj+9u36zJj5w4X4vHn2q1X++vT+8eP848X73bv60aL5yZL3tWr1pEn+9Oj84cP727b72bL61Kn3uHD2rVr85sz85MlUJu7kAAAANHRSTlMm/f0A/C4kIRMKAuG9+PM6NumSe2bt7NTHuLKejnNXTEEyKdSZhGpjWlFH29XPwqynjYJcGlQq3QAAAipJREFUaN7t2mdu20AQhuHhiqpUtVpiy3Isl8ROT7apU122inty/5tk/WuQA3wEEvC9wANQs1pRGEokErlMmlClMzknOCWbImSp7KuSJXTZBOVShC6VowzBc0aa4DkjLi4uLu4fK5+nCDImXyJ4nhGfTwidp3qiXiNQrOympnhMmFiRy74SR6cEiRU5/q1EPkkcQnFtlHeGmgFWhrOJCN4Th1Bcz2vj8wygFLmc6sI5zwBIkfsbJd7yDIAUGT5Zr3lNLoTCzaz42CYOo8jnO+1XicCKHExNsZVEK7L7OgNllMLMgxXNEkrhtlYHH+CKXPREsQpX5KBvxAVckd2R8g9LKIWZWyW+lNGKHG5XptFGKdzc6splB6bwDCj/AK7I8UiLr2W0IoduBvLv0IoMNyvdOEEp3MLNQA2uyN1aFQ46aEUu3QwcwRX50jMBWhnOe+6RgZXwUZmgRiCFz794UwKfytnEPa0kQZX9vfL4bgYpu74Wh0mCKuHGisYPRiDKeKTE2RX4Flvc8YFHKd1HKyrHHazysnaH5JoIovBXivYv0L+Tb60IaoRVBlPt8yWMUcJZj1+TUMr4RolmmwiqLFa68K1EHEDpPk108ZI4hLL85Q4Jf+wYZW518bxMHEDZP0xMHf1vz2D094sxRNlaXf9+ShxAGd9bL/hJkFjpK753UXlGVKpohHzz6YrgtVoUFxcXF/e/FMluTzR7StHsXEWyPxbRLlw0e31/AII+8glq6EtVAAAAAElFTkSuQmCC');\n    transform: translateX(-50%);\n    z-index: 9;\n    left: 50%;\n    bottom: 1%;\n    height: 11%;\n    width: 0;\n    padding-right: 8%;\n    min-width: 30px;\n    min-height: 30px;\n    max-width: 45px;\n    max-height: 45px;\n\n}\n.sm-ui-container .sm-controls.sm-skip {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAABlCAMAAAAGY+3HAAAAWlBMVEUAAADf39/9/f2cnJytra1NTU36+vqoqKgAAAD4+Pj09PTr6+v5+fnOzs5/f3+ysrKjo6P8/Pz7+/vv7+/BwcH+/v7m5ubY2Nh2dnYAAAAAAAAAAABOTk7///9dlaOYAAAAHXRSTlMmk/NPWTTlVwDZya7heUFcUu3nvGr6oYU+IhMKNDuKZ8kAAAO3SURBVHja7ZzrjqsgEIAHEF1vaNVetlve/zWPlVqkI243h81pOfP9aBpsjF9mGAabAB8j50+Ihs/z1WjU+oLI+Bq14rMavUYtiJAPOEOEnCGianEnTimCIAiCIAiCIAiCIAjCIOsy1Vd4wRREgmRcLygaWMLGIQYWdOlFEal+4BCBluAaUb69lrxNqrJuRtgtcuzdtdik0Uu4UZvgqXd49g34ZAWW2qThe2s1c2ws5TQkX0wrYcn2NZyDuVtDJq3hxbTYvspgnazaszWtAhymssFeTCupNM/Wrbiukie0ir/QqnM9wvsaQpNxnWdr47nxxVpcAgZr2ZnHxfKS/SpyPZMOEBj8/H7bwda9bS1shbUER71KQHC2+XPzYp6kV99oYSusdbBWv+RV6S5xrTq9XkmYNpTD91oyt1ZYy1DUTTOUeqKBUFiLXbb03BlPzMVMBzPPlU8LWXm0+AATavppCqFJdrpqYaat9A5b3UNgyZnwaWErrMWFe9dfqIeV3gswiL3NQIzs9ZL0qLAWtsJabtZJbpqy0LT7uW4ko2ELGzSFdmASP7uxyiVsaJVo0kJ4xJh57dVvzEcB26hD6kQMZZq12tAanFs64Qs7v3bJ7fN7xNFOMlQXBJ9sJWxq4b3BEUJj4pTWqYnZM6i6v3s5HXzPzajY0sI9mLkanuSaWmnyo3dQ6cO+n2lL/hpaUP+8ysrSKFwetPjUOLyEluB6b+fJs5hMHFyt0hSN5gW0kk7zmqP+Au9LXKTzlobNOSlM1fjnWqLTnTCfW1q4xylMvj2uSEcz7NVKcSWsITjZFCcTs8w/90Yk1nKj1S/GG3+BV+jdgYDQtNU8qwRf9ocr7y3qTS37XXGbhkjrcZU6oPiF2nNltj/0xStdyUKJSsasaNMQa7nGoLj9adAViy86eI5WL6cgHN0xVOCZE8fBp6XLh32BCm+VOvut1ON14SgNBV6OmRMDLn1auriJiNy1DNYNpsmDp6czPGpjoe4DRlQhLVtjeq+W5uXQNHWpbU6Go81HB2yar9aNQhvwfwtYa16rh1Utrh24CGy113mCI5ijXdc8CzAl+LTknIZYi5WezU2wfXHr2VdmvibQhYFXC4Y5DbHWsi0+BM7AU6er1reSdacndseFAKz1kIb1qhaokk93OCoIzGnfed/Bd9xoIdSx/5v/xLF8eE6nH13CvKbWM5AWaUF0kNY7QVrvRKRaBEEQBEEQBEEQBEEQ/w1RHmD1GesZapGeeBfr+YTxeX19fER69ucfzEOOkuTWtYUAAAAASUVORK5CYII=');\n    top: 2%;\n    left: 0.7%;\n    width: 16%;\n    height: 10%;\n    min-width: 56px;\n    min-height: 26px;\n    max-width: 85px;\n    max-height: 40px;\n}\n.sm-ui-container .sm-controls.sm-skip-cross {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDUgNzkuMTY0NTkwLCAyMDIwLzEyLzA5LTExOjU3OjQ0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDhUMDk6Mjc6MDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTA4VDEyOjI2OjMyKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTA4VDEyOjI2OjMyKzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMSIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRvdCBHYWluIDE1JSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0OGMyMTEwZS1iYzQ2LTRhNzAtOWVkMy0zN2NjYTJhZDU3MTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NWJiY2M0YjQtMjY1Zi00YzgyLWJiNWMtZjljNzEzNjRlNDZiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWJiY2M0YjQtMjY1Zi00YzgyLWJiNWMtZjljNzEzNjRlNDZiIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1YmJjYzRiNC0yNjVmLTRjODItYmI1Yy1mOWM3MTM2NGU0NmIiIHN0RXZ0OndoZW49IjIwMjEtMDItMDhUMDk6Mjc6MDcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4xIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0OGMyMTEwZS1iYzQ2LTRhNzAtOWVkMy0zN2NjYTJhZDU3MTAiIHN0RXZ0OndoZW49IjIwMjEtMDItMDhUMTI6MjY6MzIrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4xIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv9bcmgAAACdSURBVDiN7ZNLEoMgEERfUzmZ4KUjHE06C81GUPPZpFLOcmoezXSDzPsVPmAu6Cvotm0kZ0Yt6QkDwXfQoZKVmGxgBRukfz0likWggieitgMNVDBBickVnBnVnttRKswEJeRCFNRXIBAzXhdxZ2THcrlQlSj21oVdyJkokEZK5++o7S1JgTEg53PLB2eGFQmAFJ+RHSmd14+/8n+EHjIPOOda016cAAAAAElFTkSuQmCC');\n    top: 10px;\n    left: inherit;\n    right: 10px;\n    width: 20px;\n    height: 20px;\n    min-width: 20px;\n    min-height: 20px;\n}\n.sm-ui-container .sm-controls.sm-label {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAAPFBMVEUAAADf398AAACysrL9/f35+fnr6+v39/fNzc1/f39NTU3BwcH09PTl5eWcnJzY2Njv7+8AAAAAAAD///+0QK99AAAAE3RSTlMmkwBc8uWu13hBNGrJoU+FvBMKsepXMwAAAd9JREFUaN7tmuuOwiAQRkGgFEpbdd7/XZdLKlBaV1BMdjPnj5eaHKYfHTCBXCw30o+bE1jLnfTlbi39JFFjLaQ71nEj3bEOBEEQBEEQBPlvMOpg5AWopdEiwSHJC4ClTbJAYOlqGSAwdLVwCPCelhEsvp6xo8W4MnxBpp9F+VJCOKqbZfbTK0y0uZtFAICIr6dP7bq8YZl8DVtNEynQM4eAYc2Wq89jy+dazkAOkbXRomJvkUf5j5BB2yyrH2L6NmMCDzfGRFVb9qBiWSLPhPtSWbx3TRbmw0gjYsUsHx5O2Wh5NJbYavalmOSzaLJocOjs/uhd9KyIqa1RFpWln2UZY9MiOeVDlfllWrajlkWS71eaJWtarCy+JXtJI7624YmFNVg4HME/axnhmPGjFnNiMZ+0KHDQHHCoxDK9aZmPtnoyXTJlsXzSaovYMiiyEskcFOUgqhdJ0Ic9Z0p+woqbXL1IXp9/zV0xer+hrs5+OilRJTHITaMH8NQukvzsUV3T7PgY/AICtdkPZ21H7P4OGGO4F9ZZGDjY8ytlf5gqLHHEv1e5iKz3VFk0nG9Y53yKa7p5zELqLIo61IvX2PrYwVILQRAEQRAEQZC/z3fOKV1If75zfuxLZ+G+c67vB3fdN7CN6+nmAAAAAElFTkSuQmCC');\n    top: 2%;\n    right: 1.5%;\n    height: 10%;\n    width: 0;\n    padding-right: 8%;\n    min-width: 25px;\n    min-height: 25px;\n    max-width: 40px;\n    max-height: 40px;\n}\n.sm-ui-container .sm-controls.sm-volume {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAAvVBMVEUAAAD9/f38/Pz+/v7s7OwaGhr+/v739/cAAAD39/f9/f0wMDD8/Pz9/f37+/vNzc3Q0ND7+/vV1dX8/Pz5+fnw8PC9vb3Ly8uMjIxnZ2ff39/4+Pju7u7S0tL5+fnCwsL39/f19fXy8vLz8/NVVVVFRUX////v7+/Y2Njr6+usrKybm5t9fX0AAAAAAAAAAAD8/Pz19fXx8fHIyMg7Ozvn5+dycnLp6enb29u3t7elpaXi4uKxsbGXl5fk5ORvx7c5AAAAP3RSTlMm9uz4sir61gDY8i7t9Od4e+mC8eS+ZnRGOZPctn7ga9rTxso1Mf27hq1YTkAhEwrvzcFxL6I9p4thU5pcS5yLjhx7AAAEGElEQVRo3u2aaXPaMBCGtV5LrmXZxhcYbMx9kzaQkLPt//9ZNR3S8dE41MiZ6QzvJ5gxPKxWu6zeEfmS6usNaUo3X4+AlPKNNKtvKaUMkY9JKaRxpYyvpHGljBvSuFLGVVddddVV0kUHgzZpWtR1vNHpdWi/Hnr9dZdKp3S0+Vw5vW5PFM49YWnxcmNIZBh9Hedz7w9FcG4Cgun5C/tBGqWlITL2FkvYf1yMR77jpSRTGT115eTEHiLqAEo+vo0b6w5HFCN3KgFyjETvKCmlqO4gTkyGlrq+eCfYGqDukhOlqBfVB+TacnZZ4t0hotYy3qMQ2l44iP6qe1kkiHqLkAylqG5PA+aswvqRtHTEoWvkKGWtJx5T4vCSxGsdQj6gkE0smIi3Nbewjqi79GMKCVXBnMN93eXSbErOoJBt7LGkX7Pi9fSDZ1FIOAYcrf85EvsYSd84l0IGQ8bj6i7Q7qkFBT6ibhNSooRqZEWT3rqYBNpTmNWqpAQCoSBEzaV/owQcATw/aBUKcboHGFe2aJ/NixQ+6pwgxVgS4XFAcPYDI78gCTpuFUVBUAvqtclR5bzQWdg+7BwTQevRXCpVDpNSpyl/x/lPTAcLC5n/mkv3s4/OnURKqpmtAUty0RgBmLFEyumvGXA4yPVWgclWMoWsdwj7bCK6EXq2bAqxfSZ6uYoAUKVT7leAo2wwS46adApZW0xkd9XmllmGdAoJTDO7RIbDxEY+peXhMLuZI/Q68imhgk62MifAe/Ip1MfcEgXAH+VTSAS3z5m3MZirBigJeFnKohEKtfD2R27FzAZWLBTozBrPfssDPZ8m70465X5h8mxVzhwUP6RT2j5a2d/+0kSHmcUmjLPd8qmBbkmXTn6eoAGYK9mUtoYQZEN5SKraGFEYlEaYjyj0eQJMH+R2nMBoWzWPsepxrEyZLnXAaJl96H4PXK2eLatGyzLF6IwVxKhHiztu8C9zcpCcxuQyhXZf7JWmIOOjp2mueGITJtNaI3+ZshwJjyNDK/5emPp9dPo1jy9ligUA3AruCuX3cJzGu3WOYnqHlij9caIHTy+0+PxPwfxOPWdEc+mZFXUXMa7O6phiv72R8yg/xoC7F1JDtPP7kGycQQkDziKb1FP/ZF18fBJPm/FPo7Z5cbJhqinfF4Ip6sOlllI15XnHmbXaXm6P0fcpD68RMuewlWD1ueIdCr3bK4jJYSrDttT43ynrhXVsaO69FAsWGZYpXXtvAQP/cSPJTsb5XBTc0eViqJiIyq4zk2WN6/O59WYf9R+D3dAS3AQwnZ1bn1HuApE1fiuOsTBNQATzNlEHMyJT7Xb7D0Xh3q2wNLUVUtKUtvbr4WkQGuSqq6666qr/6t7NzSfdU/pCmtfn3B/7pLtwn3Ov7xeYwU213Se1GAAAAABJRU5ErkJggg==');\n    right: 1.5%;\n    bottom: 1.5%;\n    height: 10%;\n    width: 0;\n    padding-right: 8%;\n    min-width: 30px;\n    min-height: 30px;\n    max-width: 40px;\n    max-height: 40px;\n}\n.sm-ui-container.sm-volume-off .sm-controls.sm-volume {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAAXVBMVEUAAAD8/Pz+/v7+/v6KioqFhYX7+/vu7u5/f3/r6+sAAADv7+/s7Oz////p6enw8PDx8fH9/f10dHT39/fs7OwAAAAAAAAAAAAAAAC8vLz5+fn09PTt7e3o6Oi8vLw06Bc/AAAAH3RSTlMm7vz4RUTqtkGsALqx/qi9wfE+2bAkIRMKZeDNsqVm/TFS9QAAAgJJREFUaN7tmttu4jAURbft40tKEgIJ12n7/585ONLoTIG0qsiOFMnrkZcl42PvDTLebpyOYHE8ZcHNcj6AyeGcLWewOd8sB7A5vOEEPiccweeIQqFQKKwU6boINim65goyEk3T7MBlXwVLt6TO2OCcARNfGWuqHdciMVjT7Q3VItHYUCVQLak21kQPqsVvskRAtaS88bWAZdGVbBKoFhnyCHtQLVKHcSVUi2yMDYMH1ZLaMG78c4tcLoJf89GbO3bOho1gwnL501f+eUTEdtLS28beE1rBpKV3ZvtEI21w02lnGnu/lmtMmLRIPkitf9zLYMM3FmswiVoUvzX2YTVSGxva9LpFNW0+TPLloyGPvmAei64mRIFufB79WjCrBb4K+br+EnaDYFaLRo+uxGw8ZrZojP7beJONM1u0EkgOO13JrBatNzGNEVEnkCxjVTPbUSJgWHQEnNOI4FiQOtc0Lnqs3/L/N7bu3b+f5PWeymc3zDpvy6mbf30p9kIis9tFY78rSq83JW19j6Vv5tb30U8V2Ncb7M9lfMoin59C+GGhFsKPpK0nWyCDzhHLomeCatHzTbXoXUW16L1LtWiGUC2ah1SLZjvToj1lR7Ro53KWZ9ER4P/TixQD06LZ6OwVdPbv7y0KhUKhsG4WeduzzDulRd5cLfN+bKG3cMu86/sLjm0XKsolsPgAAAAASUVORK5CYII=');\n}\n.sm-ui-container .sm-controls.sm-fullscreen {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAAVFBMVEUAAAD9/f3s7Oz8/Pzs7Oz+/v6Li4uFhYUAAADw8PB9fX38/Pzr6+vu7u7o6Oj////09PS8vLy8vLwAAAAAAAD+/v7q6urR0dHR0dH5+fn39/fw8PC48N3zAAAAHHRSTlMm87DssftFRAC7QO6staT+y2ZlEwr2rH184tfBhd2mLwAAAcVJREFUaN7t2kuSqzAMhWEFIbktG0OShrz2v89rJlfVoXrmk0GX/w18xaOwUZm+alfCdd2BqnwTtu+q4BBnqkLwqnEleNXo9Xq93l9I72U4VO7aVrksfHpPhG9wReZZSltFb2X8UXysVRkImsUkq5ywSsgs6XHCKhZZOEasomNFsg1QxXYkBoIqIVZkNIIqlnnmUQml+JVEI6iiQxLOgaCKTSwpGkEVrQgPgaCK5YpMSlDFXjtiBFVCTjNnJZDizyS9jCCKI/srbARVwsaSpkBQJcT/b5dXmEtTpLCk/IbQfVluzb9d4fCozmdth+iWhEsgbJfnmiIKcWV5blDE73+v1/s9vVyU0IXtuZwJXIhpfQIVX082Rd5/X0/a5Quewxs3XE988T5uiVpdiW9Exp+3a/JdPUDxvXCalKCKvZJwRaCKZp5TDgRS/CeIfS+MUXRHsiMQJQy+TYUpFpP/BAEUH+AMfiUQxQ7fLoCiI8+QB++KD3C89ooPcLz2iuUdUfIASvQBDqqqPA6feoAiqw9wUA0yz+sjgkfrpSpyeotb78XuLBXBKT5aP1Ru/Rev1+v1/kafOaf0Rfg+c37sQ2fhPnOu7x9D6RMZzfZBwAAAAABJRU5ErkJggg==');\n    right: 11%;\n    bottom: 1.5%;\n    height: 10%;\n    width: 0;\n    padding-right: 8%;\n    min-width: 30px;\n    min-height: 30px;\n    max-width: 40px;\n    max-height: 40px;\n}\n.sm-ui-container.sm-fullscreen-on .sm-controls.sm-fullscreen {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGUAAABlCAMAAABjot39AAAAVFBMVEUAAAD9/f3s7Oz8/Pzs7Oz+/v6Li4uFhYUAAADw8PB9fX38/Pzr6+vu7u7o6Oj////09PS8vLy8vLwAAAAAAAD+/v7q6urR0dHR0dH5+fn39/fw8PC48N3zAAAAHHRSTlMm87DssftFRAC7QO6staT+y2ZlEwr2rH184tfBhd2mLwAAAcNJREFUaN7t2klygzAQheFGTbesAYEH8HT/e0Zk02U7lWx4Xjj6L/CVoFA1KtGudiRcxxWoyomwnaqCQ4ypCsGrxpHgVaPVarVan5oeDkro/HKb9gTOhzTf0IovLGlR7PP3gYWDp+26TNP5GV4qUrZEqDCXJ2RgSWFThFzX9Y+Pa0jC2RNUiZklDUpQJd6TcEWgimYeU/YEVeLAwvdIhFR0RbIhEMU7tneCUmJIFbGVQBSfWZJTsgBKfNi7QIr2PLK9eIwSe9hKTPGhIr2tBKLEvCJKFkAJ3y8+koVQri9bPUCRWRJoJabIOM7X4B4qF91WKVWR7ineeha7sFQErei59C+Vs1Kr9R/TS3E18BZymLh7ToTPcGXdugp4CwnXuSqOQNlwN0sHU2y4u3Y4xYa7gFW0r0iODqjYcIdUbLhDKjHzyL0SVPE23OEUdTbcwZQ4sA13KEUrws4TVInZfkxhSryvSCSo4nMaOSuhFDuKukeCKIYkO5FAKX5hSYMnlGJf/KB/HPBtcZqa9afDyg36/TRV93vdDtEl2WkqrMNtTgGFmDLdFiBiz7/9urVardbn9p57SjvC9577Y2+6C/eee31fNSMTGckQyNEAAAAASUVORK5CYII=');\n}\n.sm-ui-container .sm-controls.sm-counter {\n    border-radius: 100%;\n    z-index: 5;\n    bottom: 1%;\n    left: 2%;\n    width: 10%;\n    height: auto;\n    min-width: 32px;\n    min-height: 32px;\n    max-width: 40px;\n    max-height: 40px;\n}\n.sm-ui-container .sm-controls.sm-counter .".concat(ni," {\n    font-family: 'Lato', sans-serif;\n    font-size: 10px;\n    fill: #ffffff;\n}\n"),ri='\n  <svg viewport="0 0 100 100" viewBox="0 0 34 34">\n    <defs>\n      <linearGradient id="gradient_bg" x1="0%" x2="100%" y1="100%" y2="0%">\n        <stop offset="0%" stop-color="#333" stop-opacity="0.3"></stop>\n        <stop offset="100%" stop-color="#333" stop-opacity="0"></stop>\n      </linearGradient>\n    </defs>\n    <circle r="12" cx="17" cy="17" stroke="url(#gradient_bg)" fill="#333" fill-opacity="0.2"></circle>\n    <circle r="12" cx="17" cy="17" stroke="#F49831" fill-opacity="0"></circle>\n    <text class="'.concat(ni,'" style="" text-anchor="middle" y="21" x="17"> </text>\n  </svg>');function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var oi="sm-visible",si=function(e){e.style.removeProperty("display")},ci=function(e){We(e,{display:"none"})},ui=function(e){_e(e,"add",oi)},li=function(e){_e(e,"remove",oi)},di=function(e){en(n,e);var t=ai(n);function n(e){var i,r=e.$adContainer;return E(this,n),(i=t.call(this)).$adContainer=r,i.device=i.$adContainer.getAttribute("data-device"),Ue("ui-styles",ii),i.uiContainerElem=null,i.mediaLayerElem=null,i.videoElem=null,i.controlElems={},i.isMuted=null,i.isInFullscreenMode=!1,i.videoSlotSubscription=null,i.createUIElements(),i.changeFullscreenMode=i.changeFullscreenMode.bind(Jt(i)),i}return T(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setVideoSettings(e),this.createVideoControls(),this.isMuted&&_e(this.uiContainerElem,"add","sm-volume-off"),Le(this.uiContainerElem,[this.mediaLayerElem].concat(a(Object.values(this.controlElems)))),Le(this.$adContainer,this.uiContainerElem),this.counterNumberElem=this.$adContainer.querySelector(".".concat(ni))}},{key:"setVideoSettings",value:function(e){var t=e.muted,n=e.autoplay;this.isMuted=t,this.videoElem.muted=this.isMuted,this.videoElem.autoplay=n}},{key:"createUIElements",value:function(){var e=this;this.uiContainerElem=Oe({name:"ui-container"});this.videoElem=Oe({type:"video",name:"video",attributes:{width:"100%",playsinline:"","webkit-playsinline":""}}),this.videoSlotSubscription=Yn.createObservable(this.videoElem).subscribe((function(){var t=e.videoElem.getAttribute("src");if(t){var n,i;if(t===(null===(n=window)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.href))return;e.displayVideo()}else e.hideVideo()}));var t={name:"media",children:[this.videoElem]};this.mediaLayerElem=Oe(t)}},{key:"createVideoControls",value:function(){var e=this,t={class:"sm-controls"},n={name:"play",attributes:t,events:{click:function(){e.hidePlayControl(),e.emit(lt.Type.UI.PLAY_CLICKED)}}};this.controlElems.play=Oe(n);var i={name:"skip",attributes:t,events:{click:function(){return e.emit(lt.Type.UI.SKIP_CLICKED)}}};this.controlElems.skip=Oe(i);var r={name:"label",attributes:t};this.controlElems.label=Oe(r);var a={name:"volume",attributes:t,events:{click:function(){return e.onVolumeChange()}}};if(this.controlElems.volume=Oe(a),"desktop"===this.device){var o={name:"fullscreen",attributes:t,events:{click:function(){return e.isInFullscreenMode?e.exitFullscreen():e.requestFullscreen()}}};this.controlElems.fullscreen=Oe(o),this.subscribeToFullscreenChanges()}var s={name:"counter",attributes:t,content:ri};this.controlElems.counter=Oe(s)}},{key:"onStateChange",value:function(e,t){return _e(this.uiContainerElem,e?"remove":"add",t),!e}},{key:"onVolumeChange",value:function(){this.isMuted=this.onStateChange(this.isMuted,"sm-volume-off"),this.videoElem.muted=this.isMuted,this.emit(lt.Type.UI.VOLUME_CHANGED,{muted:this.isMuted})}},{key:"changeFullscreenMode",value:function(){this.isInFullscreenMode=this.onStateChange(this.isInFullscreenMode,"sm-fullscreen-on"),this.emit(lt.Type.UI.FULLSCREEN_CHANGED,{changedToFullscreen:this.isInFullscreenMode})}},{key:"subscribeToFullscreenChanges",value:function(){var e,t=this,n=["mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenchange"].find((function(e){return"on".concat(e)in t.uiContainerElem}));n&&(null===(e=this.uiContainerElem)||void 0===e||e.addEventListener(n,this.changeFullscreenMode))}},{key:"unsubscribeToFullscreenChanges",value:function(){var e,t=this,n=["mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenchange"].find((function(e){return"on".concat(e)in t.uiContainerElem}));n&&(null===(e=this.uiContainerElem)||void 0===e||e.removeEventListener(n,this.changeFullscreenMode))}},{key:"updateVideoPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=A(A({},this.controlElems),{},{videoPlayer:this.videoElem}),n=function(t){var n={enable:!0,disable:!1};return function(i){var r;return e[i]===n[t]||(null===(r=e[i])||void 0===r?void 0:r.enabled)===n[t]}};f(t,(function(t,i){var r,a,o,s;(n("disable")(i)?ci(t):n("enable")(i)&&si(t),null!==(r=e[i])&&void 0!==r&&r.style)&&We(t,null===(o=e[i])||void 0===o?void 0:o.style);null!==(a=e[i])&&void 0!==a&&a.class&&_e(t,"add",null===(s=e[i])||void 0===s?void 0:s.class)}))}},{key:"resetVideoPlayer",value:function(e){this.videoElem.removeAttribute("style"),f(this.controlElems,(function(e){e.removeAttribute("style")})),_e(this.controlElems.skip,"remove",ti),e&&this.updateVideoPlayer(e)}},{key:"displayVideo",value:function(){We(this.videoElem,{visibility:"visible"})}},{key:"resetVideoSource",value:function(){this.videoElem.setAttribute("src","")}},{key:"displayInitialControls",value:function(){var e=["play","skip"];f(this.controlElems,(function(t,n){e.includes(n)||ui(t)}))}},{key:"hideControls",value:function(){f(this.controlElems,(function(e){li(e)}))}},{key:"displaySkipControl",value:function(){ui(this.controlElems.skip)}},{key:"hideSkipControl",value:function(){li(this.controlElems.skip)}},{key:"hideVideo",value:function(){We(this.videoElem,{visibility:"hidden"})}},{key:"displayPlayControl",value:function(){ui(this.controlElems.play)}},{key:"hidePlayControl",value:function(){li(this.controlElems.play)}},{key:"displayMediaLayer",value:function(){ui(this.mediaLayerElem)}},{key:"hideMediaLayer",value:function(){li(this.mediaLayerElem)}},{key:"requestFullscreen",value:function(){this.isInFullscreenMode||(this.uiContainerElem.requestFullScreen?this.uiContainerElem.requestFullScreen():this.uiContainerElem.mozRequestFullScreen?this.uiContainerElem.mozRequestFullScreen():this.uiContainerElem.webkitRequestFullScreen&&this.uiContainerElem.webkitRequestFullScreen())}},{key:"exitFullscreen",value:function(){this.isInFullscreenMode&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}},{key:"updateRemainingTime",value:function(e){var t=this;if(e<=0)return clearTimeout(this.counterLastSecondTimeout),li(this.controlElems.counter),void(this.counterNumberElem.textContent="");Number(this.counterNumberElem.textContent)!==e&&(this.counterNumberElem.textContent=pe(e)?e:0,1===e&&(this.counterLastSecondTimeout=setTimeout((function(){t.updateRemainingTime(0)}),1e3)))}},{key:"destroy",value:function(){var e,t;clearTimeout(this.counterLastSecondTimeout),this.unsubscribeToFullscreenChanges(),null===(e=(t=this.videoSlotSubscription).unsubscribe)||void 0===e||e.call(t),this.$adContainer=null,this.uiContainerElem=null,this.mediaLayerElem=null,this.videoElem=null,this.controlElems=null,this.counterNumberElem=null}}],[{key:"create",value:function(e){return new n({$adContainer:e.$adContainer})}}]),n}(on);const hi={playerUIFactory:function(e){return di.create(e)}};function fi(){return l(URL)}var vi=function(){function e(){E(this,e),this.trackers=[]}var t;return T(e,[{key:"add",value:function(e){var t=e.event,n=e.url;this.trackers.push({event:t,url:n})}},{key:"concat",value:function(t){if(!(t instanceof e))throw new Error("trackingEvents argument value must be an instance of TrackingEvents");this.trackers=[].concat(a(this.trackers),a(t.trackers))}},{key:"getTrackersFor",value:function(e){return P(e,"event"),this.trackers.filter((function(t){return e===t.event}))}},{key:"fire",value:(t=b(C().mark((function e(t){var n,i,r,a,o=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:function(e){return e},L.info("Firing tracking for ".concat(t," VAST event")),!((i=this.getTrackersFor(t)).length>0)){e.next=7;break}return r=function(e){return fi()?new URL(e).pathname.includes(".js"):e.includes(".js")},a=Ce((function(e){var t=e.url;return Ee(r(t)?Xe:Ke,n)(t)}),i),e.abrupt("return",Promise.all(a));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"create",value:function(){return new e}}]),e}(),pi=function(){return vi.create()};var mi={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",204:"Ad category was required but not provided.",300:"General Wrapper error.",301:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)",302:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response.",303:"No Ads VAST response after one or more Wrappers.",304:"InLine response returned ad unit that failed to result in ad display within defined time limit.",400:"General Linear error. Video player is unable to display the Linear Ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Timeout of MediaFile URI.",403:"Couldn't find MediaFile that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn't display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc.",406:"Mezzanine was required but not provided. Ad not served.",407:"Mezzanine is in the process of being downloaded for the first time. Download may take several hours. Ad will not be served until mezzanine is downloaded and transcoded.",408:"Conditional ad rejected.",409:"Interactive unit in the InteractiveCreativeFile node was not executed.",410:"Verification unit in the Verification node was not executed.",411:"Mezzanine was provided as required, but file did not meet required specification. Ad not served.",500:"General NonLinearAds error.",501:"Unable to display NonLinearAd Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large).",502:"Unable to fetch NonLinearAds/NonLinearAd resource.",503:"Couldn't find NonLinearAd resource with supported type.",600:"General CompanionAds error.",601:"Unable to display CompanionAd because creative dimensions do not fit within CompanionAd display area (i.e., no available space).",602:"Unable to display Required CompanionAd.",603:"Unable to fetch CompanionAds/CompanionAd resource.",604:"Couldn't find CompanionAd resource with supported type.",900:"Undefined Error.",901:"General VPAID error."},Ai=function(e){if(w(e)||w(mi[e]))throw new Error("Invalid vast error code: ".concat(e))},yi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(this,e),Ai(t),this.code=t,this.data=n,this.message=mi[this.code]}return T(e,[{key:"toString",value:function(){return"[".concat(this.code,"] ").concat(this.message)}}]),e}(),gi=L.wrapWithName("VIDEOPLAZA MANAGER"),bi=function(e){if(R(e)){var t=e.indexOf("&amp;")>-1?e.replace(/&amp;/g,"&"):e;return t.indexOf("videoplaza")>-1&&t.indexOf("s=")>-1?t.replace(/%2F/g,"/"):t}return null},Ei=function(e){var t=e.event,n=e.fromList,i=e.adTrackingEvents;n.length>0&&f(n,(function(e){var n=bi((null==e?void 0:e.value)||e);R(n)&&i.add({event:t,url:n})}))},ki=function(e){var t=pi(),n=[],i=[],r=[],o={},s=e.error,c=e.impression,l=e.creatives;w(s)||f(u(s)?s:[s],(function(e){var i=bi((null==e?void 0:e.value)||e);i.includes(Qn)?n.push(i):t.add({event:lt.Type.VAST.ERROR,url:i})}));if(!w(c)){var d=u(c)?c:[c];Ei({event:lt.Type.VAST.IMPRESSION,fromList:d,adTrackingEvents:t})}if(!w(l)){var h=l.creative,v=(void 0===h?[]:h).shift().linear;if(!w(v)){var p=v.trackingEvents,m=void 0===p?{}:p,A=v.videoClicks,y=void 0===A?{}:A;i=v.mediaFiles,r=v.adParameters,function(e,t){e.tracking.length>0&&f(e.tracking,(function(e){var n=e.event,i=e.value,r=bi(i);R(r)&&t.add({event:n,url:r})}))}(m,t);var g=y.clickTracking,b=void 0===g?[]:g,E=y.customClick,k=void 0===E?[]:E;o=y.clickThrough,Ei({event:lt.Type.VAST.CLICK_TRACKING,fromList:[].concat(a(Ce((function(e){return e.value}),b)),a(Ce((function(e){return e.value}),k))),adTrackingEvents:t});var T=new RegExp("\\be=".concat(qn,"\\b"),"g");Ei({event:lt.Type.VAST.USER_INTERACT,fromList:b.filter((function(e){var t=e.value;return t.includes(Qn)&&!!t.match(T)})).map((function(e){return e.value.replace(T,"e=".concat(Jn))})),adTrackingEvents:t})}}return{adTrackingEvents:t,videoplazaErrors:n,mediaFiles:i,adParameters:r,clickThrough:o}},Ti=function(e,t){var n,i,r,o,s,c,u=JSON.parse(e).insertionPoint.shift().slot,l=(void 0===u?[]:u).shift().vast.ad.shift().inLine.creatives.creative.shift().linear.adParameters.value,d=JSON.parse(l).ad;return gi.info(d),n=d,r=(i=t).isSunmedia,o=i.trafficType,s=[],c=[],f(n,(function(e){var t=e.wrapper,n=e.inLine;if(w(n)&&w(t))throw new yi(101);var i,u=!1;if(w(t)){var l=i=n,d=l.creatives,h=l.impression;!d&&h&&(i.error=h,delete i.impression)}else u=!0,i=t;var f=ki(i),v=f.adTrackingEvents,p=f.videoplazaErrors,m=f.clickThrough,A=f.mediaFiles,y=f.adParameters;if(c=[].concat(a(c),a(p)),u){var g=i.vastadTagURI;if(R(g)){var b={url:g.replace(/&amp;/g,"&"),isSunmedia:r,trafficType:o};s.push({isWrapper:u,ad:{tag:b,trackingEvents:v}})}}else try{var E,k=[];null!=A&&null!==(E=A.mediaFile)&&void 0!==E&&E.length&&(k=A.mediaFile.map((function(e){var t={$:{},_:null};return Object.entries(e).forEach((function(e){var n=Ie(e,2),i=n[0],r=n[1];"value"===i?t._=r:t.$[i]=r})),t})),s.push({isWrapper:u,ad:{mediaFile:k,parameters:y,trackingEvents:v,clickThroughUrl:(null==m?void 0:m.value)||m}}))}catch(e){L.error("Adding a videoplaza inline to the adPod",e)}})),c=c.filter((function(e,t,n){return n.indexOf(e)===t})),{adPod:s,podErrors:c}},Ii=function(){function e(t){var n=t.adData,i=t.fromAdTag,r=t.adParametersData,a=t.vastManager;E(this,e);var o=Ti(r,i),s=o.adPod,c=o.podErrors;this.adPod=s,this.podErrors=c,this.vastManager=a,this.currentIndex=0,this.videoplazaTag=i,this.adData=n,this.emptyWaterfallErrorFired=!1}var t;return T(e,[{key:"hasNext",value:function(){return this.currentIndex<this.adPod.length}},{key:"nextAdFromPod",value:function(){try{var e=this.adPod[this.currentIndex];return this.currentIndex+=1,e}catch(e){return!1}}},{key:"loadAds",value:(t=b(C().mark((function e(){var t,n,i,r,a,o,s,c,u,l;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasNext()){e.next=28;break}if(t=null,n=this.nextAdFromPod(),e.prev=3,!n.isWrapper){e.next=14;break}return i=n.ad,r=i.tag,a=i.trackingEvents,gi.info("loading waterfall ads from...",r),this.vastManager.init([r]),e.next=10,this.vastManager.loadAds();case 10:(t=e.sent).adTrackingEvents.concat(a),e.next=18;break;case 14:return o=n.ad,s=o.mediaFile,c=o.parameters,u=o.trackingEvents,l=o.clickThroughUrl,e.next=17,this.vastManager.setLinearMediaFile({linear:{MediaFiles:[{MediaFile:s}],AdParameters:c},companionAds:[],trackingEvents:u,clickThroughUrl:l,adData:this.adData});case 17:t=e.sent;case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(3);case 22:if(!t){e.next=25;break}return t.initialAdTag=this.videoplazaTag,e.abrupt("return",t);case 25:n.ad.trackingEvents.fire(lt.Type.VAST.ERROR),e.next=0;break;case 28:return this.fireEmptyWaterfallError(),e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,this,[[3,20]])}))),function(){return t.apply(this,arguments)})},{key:"fireEmptyWaterfallError",value:function(){if(!this.emptyWaterfallErrorFired){this.emptyWaterfallErrorFired=!0,gi.info("FIRE WATERFALL ERRORS",this.podErrors);var e=pi();f(this.podErrors,(function(t){e.add({event:lt.Type.VAST.ERROR,url:t})})),e.fire(lt.Type.VAST.ERROR)}}}]),e}();const Ci={isVPAID:function(e){var t=e.apiFramework;return t&&Zn.VPAID.test(t)},isJavascript:function(e){var t=e.type;return Zn.JS.test(t)},isFlash:function(e){var t=e.type;return Zn.FLASH.test(t)},isVideoplaza:function(e){return e.url.indexOf("passback_vpaid/passback_vpaid")>-1},isYoutube:function(e){return e.url.indexOf("www.youtube.com")>-1},isNoVideoReminder:function(e){return e.url.indexOf("https://novideoreminder.com/")>-1},isImage:function(e){return Zn.IMAGE.test(e)},isHttps:function(e){return Zn.HTTPS.test(e)}};var wi=function(e){return"script"===(e||"").toLowerCase()};function Ri(e,t){return Dt(new Promise((function(n){var i=e.cloneNode(!0);e.onload&&(i.onloadpre=e.onload),i.onload=function(){return n()},Le(t,i)})),1e3)}function Si(e,t){var n=e.content;return new Promise((function(e){if(null==n)throw new Error("Missing content for resource");var i={width:"100%",height:"100%"},r=Oe({type:"iframe",name:"resource-html",style:A({},i),attributes:A(A({},i),{},{scrolling:"no",frameborder:"0"})});r.onload=b(C().mark((function t(){var i,a,o,s,c,u;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.contentDocument,a=r.contentWindow,i.body.style.margin="0 auto",o=Oe({content:decodeURIComponent(n)}),s=Ne(o,!0),c=s.childNodes,(u=Array.from(c)).filter((function(e){var t=e.nodeName;return oe(wi(t))})).forEach((function(e){return Le(i.body,e.cloneNode(!0))})),t.prev=6,t.next=9,Promise.allSettled([u.filter((function(e){var t=e.nodeName,n=e.src;return wi(t)&&n})).map((function(e){return Ri(e,i.body)}))]);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),L.error("loading external scripts",t.t0);case 14:u.filter((function(e){var t=e.nodeName,n=e.src;return wi(t)&&oe(n)})).forEach((function(e){var t=e.innerHTML;return a.eval(t)})),e(r);case 16:case"end":return t.stop()}}),t,null,[[6,11]])}))),Le(t,r)}))}function Di(e,t){var n=e.$,i=e.content;return new Promise((function(e,r){var a=n.creativeType;if(null==i||null==a||""===a||!Ci.isImage(a))throw new Error("We only support images for StaticResource");var o=Oe({type:"img",name:"resource-img",style:{width:"100%",height:"100%",cursor:"pointer"},attributes:{src:i}});o.onerror=function(e){r(e)},o.onload=function(){e(o)},Le(t,o)}))}function Pi(e,t){var n=e.content;return new Promise((function(e,i){if(null==n)throw new Error("Missing content for resource");var r={width:"100%",height:"100%"},a=Oe({type:"iframe",name:"resource-iframe",style:A({},r),attributes:A(A({},r),{},{src:n,scrolling:"no",frameborder:"0"})});a.onerror=function(e){i(e)},a.onload=function(){e(a)},Le(t,a)}))}function Mi(e){return xi.apply(this,arguments)}function xi(){return(xi=b(C().mark((function e(t){var n,i,r,a,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.htmlResource,i=t.staticResource,r=t.iframeResource,a=t.resourceSlot,o=null,null==n){e.next=8;break}return e.next=5,Si(n,a);case 5:o=e.sent,e.next=18;break;case 8:if(null==i){e.next=14;break}return e.next=11,Di(i,a);case 11:o=e.sent,e.next=18;break;case 14:if(null==r){e.next=18;break}return e.next=17,Pi(r,a);case 17:o=e.sent;case 18:if(!o){e.next=20;break}return e.abrupt("return",o);case 20:throw new Error("Unknown type of resource");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oi="end-card",Li="default",Vi="Remember",Ni="Main",Fi=function(){function e(t){E(this,e),this.staticResource=t.staticResource,this.iframeResource=t.iframeResource,this.htmlResource=t.htmlResource,this.altText=t.altText,this.clickThroughUrl=t.clickThroughUrl,this.trackingEvents=t.trackingEvents;var n=t.$,i=n.width,r=n.height,a=n.id,o=n.adSlotId,s=n.pxratio,c=void 0===s?0:s,u=n.renderingMode,l=void 0===u?Li:u;this.height=parseInt(r,10),this.width=parseInt(i,10),this.id=a,this.adSlotId=o,this.pxratio=c,this.renderingMode=l,this.id!==Ni&&this.id!==Vi||(this.renderingMode=Oi),w(this.id)&&(this.id=Ni),w(this.adSlotId)&&(this.adSlotId=this.id)}var t;return T(e,[{key:"isRemember",get:function(){return this.id===Vi}},{key:"isEndcard",get:function(){return this.renderingMode===Oi}},{key:"loadAd",value:(t=b(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi({staticResource:this.staticResource,iframeResource:this.iframeResource,htmlResource:this.htmlResource,resourceSlot:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function Ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var _i="none",Bi=L.wrapWithName("COMPANION ADS"),Wi=function(e,t){f(e,(function(e){var n=window.document.getElementById(e.adSlotId);n?e.startAd(n,t):Bi.warning("missing companion container for id: ".concat(e.adSlotId))}))},zi=function(e){en(n,e);var t=Ui(n);function n(e){var i,r,a=e.required,o=void 0===a?_i:a,s=e.companionList,c=void 0===s?[]:s;return E(this,n),(i=t.call(this)).required=o,i.companions=c,i.ratio=(r=1,void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?r=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(r=window.devicePixelRatio),Math.floor(r)),i.endcardCompanions=[],i.alongsideCompanions=[],f(i.companions,(function(e){var t=new Fi(e);t.pxratio&&1!==i.ratio&&t.pxratio!==i.ratio||(t.isEndcard?i.endcardCompanions.push(t):i.alongsideCompanions.push(t))})),i}return T(n,[{key:"startAlongside",value:function(e){Wi(this.alongsideCompanions,e)}},{key:"startEndcard",value:function(e){Wi(this.endcardCompanions,e)}}],[{key:"create",value:function(e){return new n({required:e.required,companionList:e.companionList})}}]),n}(on);const Gi={companionAdsFactory:function(e){return zi.create(e)}};function Hi(e,t,n){return new Promise((function(i){Le(t,e),Fn(e,"load",(function(){return i(e.contentWindow)})),e.contentWindow.document.open().write(n),e.contentWindow.document.close()}))}function ji(e){return Yi.apply(this,arguments)}function Yi(){return Yi=b(C().mark((function e(t){var n,i,r,o,s,c,u,l=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},i=n.args,r=void 0===i?[]:i,o=n.attempts,s=void 0===o?5:o,c=n.delay,u=void 0===c?500:c,e.prev=1,e.next=4,t.apply(void 0,a(r));case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(s-1)){e.next=13;break}return e.next=12,Un(u);case 12:return e.abrupt("return",ji(t,{args:r,attempts:s-1,delay:u}));case 13:throw new Error("Max attempts reached");case 14:case"end":return e.stop()}}),e,null,[[1,7]])}))),Yi.apply(this,arguments)}function Zi(e){var t=e.adMediaUrl,n=e.adParameters,i=Object.values(Kn);return![t,n].some((function(e){return e&&i.some((function(t){return e.includes(t)}))}))}function Ki(e){return new Promise((function(t,n){var i=e.contentWindow.getVPAIDAd;l(i)?t(i):n()}))}function Xi(){return Oe({type:"iframe",name:"vpaid-iframe",style:{display:"block",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",border:"0px"},attributes:{scrolling:"no",width:"100%",title:"vpaid-iframe"}})}function Qi(e){return qi.apply(this,arguments)}function qi(){return(qi=b(C().mark((function e(t){var n,i,r,a,o,s,c,u;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slot,i=t.adParameters,r=t.adMediaUrl,a=Zi({adMediaUrl:r,adParameters:i}),o='\n    <!doctype html>\n    <html style="height:100%;"><head>\n      <meta charset=utf-8></meta>\n      <meta content="width=device-width,minimum-scale=1,initial-scale=1" name=viewport>\n    </head><body style="margin:0px;height:100%;">\n      <script>var inDapIF = '.concat(a,';<\/script>\n      <script src="').concat(r,'"><\/script>\n    </body></html>'),s=Xi(),e.next=6,Hi(s,n,o);case 6:return c=e.sent,e.next=9,ji(Ki,{args:[s],attemps:5,delay:200});case 9:return u=e.sent,e.abrupt("return",{creative:u(),vpaidSlot:c.document.body});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(e,t,n){return Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},Ji(e,t,n||e)}function $i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var er=function(e){en(n,e);var t=$i(n);function n(e){var i,r=e.url;return E(this,n),(i=t.call(this)).adMediaUrl=r,i.quartiles=null,i.firstQuartileEventFired=!1,i.midpointEventFired=!1,i.thirdQuartileEventFired=!1,i.videoCompleteEventFired=!1,i.slot=null,i.videoSlot=null,i.adLinear=null,i.adWidth=null,i.adHeight=null,i.adExpanded=null,i.adSkippableState=null,i.adRemainingTime=null,i.adCurrentTime=0,i.adDuration=null,i.adVolume=null,i.adCompanions=null,i.adIcons=null,i}return T(n,[{key:"getAdQuartiles",value:function(){if(null==this.quartiles){var e=Math.round(this.adDuration/4);this.quartiles=[e,2*e,3*e]}return this.quartiles}},{key:"getAdLinear",value:function(){return this.adLinear}},{key:"getAdWidth",value:function(){return this.adWidth}},{key:"getAdHeight",value:function(){return this.adHeight}},{key:"getAdExpanded",value:function(){return this.adExpanded}},{key:"getAdSkippableState",value:function(){return this.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.adRemainingTime=this.adDuration-this.adCurrentTime,this.adRemainingTime}},{key:"getAdCurrentTime",value:function(){return this.adCurrentTime}},{key:"getAdDuration",value:function(){return this.adDuration}},{key:"getAdCompanions",value:function(){return this.adCompanions}},{key:"getAdIcons",value:function(){return this.adIcons}},{key:"getAdVolume",value:function(){return this.adVolume}},{key:"setAdVolume",value:function(e){this.adVolume!==e&&(this.adVolume=e,this.emit(lt.Type.VPAID.AD_VOLUME_CHANGE))}},{key:"handshakeVersion",value:function(){this.emit(lt.Type.VPAID.AD_LOG,{method:"handshakeVersion",crea:this})}},{key:"initAd",value:function(e,t,n,i,r,a){var o=a.slot,s=a.videoSlot;this.slot=o,this.videoSlot=s,this.emit(lt.Type.VPAID.AD_LOADED)}},{key:"startAd",value:function(){this.emit(lt.Type.VPAID.AD_STARTED)}},{key:"stopAd",value:function(){this.emit(lt.Type.VPAID.AD_STOPPED)}},{key:"resizeAd",value:function(e,t,n){this.emit(lt.Type.VPAID.AD_LOG,{method:"resizeAd",args:[e,t,n],crea:this})}},{key:"pauseAd",value:function(){this.emit(lt.Type.VPAID.AD_PAUSED)}},{key:"resumeAd",value:function(){this.emit(lt.Type.VPAID.AD_PLAYING)}},{key:"expandAd",value:function(){this.emit(lt.Type.VPAID.AD_LOG,{method:"expandAd",crea:this})}},{key:"collapseAd",value:function(){this.emit(lt.Type.VPAID.AD_LOG,{method:"collapseAd",crea:this})}},{key:"skipAd",value:function(){this.emit(lt.Type.VPAID.AD_SKIPPED)}},{key:"subscribe",value:function(e,t,n){this.on(t,e.bind(n))}},{key:"unsubscribe",value:function(e,t){this.off(t,e)}},{key:"emitAdVideoComplete",value:function(){this.videoCompleteEventFired=!0,this.emit(lt.Type.VPAID.AD_VIDEO_COMPLETE)}},{key:"tick",value:function(e){if(e>0&&this.adDuration>0&&e<=this.adDuration){var t=Math.round(e);t>this.adCurrentTime&&(this.adCurrentTime=t);var n=Ie(this.getAdQuartiles(),3),i=n[0],r=n[1],a=n[2];this.adCurrentTime>=i&&!this.firstQuartileEventFired?(this.firstQuartileEventFired=!0,this.emit(lt.Type.VPAID.AD_VIDEO_FIRST_QUARTILE)):this.adCurrentTime>=r&&!this.midpointEventFired?(this.midpointEventFired=!0,this.emit(lt.Type.VPAID.AD_VIDEO_MIDPOINT)):this.adCurrentTime>=a&&!this.thirdQuartileEventFired?(this.thirdQuartileEventFired=!0,this.emit(lt.Type.VPAID.AD_VIDEO_THIRD_QUARTILE)):this.adCurrentTime>=this.adDuration&&!this.videoCompleteEventFired&&this.emitAdVideoComplete()}}}]),n}(on);function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var nr={ERROR:"error",DURATION_CHANGE:"durationchange",LOAD_METADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",ENDED:"ended",VOLUME_CHANGE:"volumechange",TIME_UPDATE:"timeupdate"},ir=function(e){en(n,e);var t=tr(n);function n(e){var i,r=e.url;return E(this,n),(i=t.call(this,{url:r})).adSkippableState=!0,i.onClick=i.onClick.bind(Jt(i)),i.callbacks={},i.callbacks[nr.ERROR]=i.onPlaybackError.bind(Jt(i)),i.callbacks[nr.DURATION_CHANGE]=i.onDurationChange.bind(Jt(i)),i.callbacks[nr.LOAD_METADATA]=i.onLoadedmetadataPlay.bind(Jt(i)),i.callbacks[nr.PAUSE]=i.onPause.bind(Jt(i)),i.callbacks[nr.PLAY]=i.onPlay.bind(Jt(i)),i.callbacks[nr.PLAYING]=i.onPlaying.bind(Jt(i)),i.callbacks[nr.ENDED]=i.onEnded.bind(Jt(i)),i.callbacks[nr.VOLUME_CHANGE]=i.onVolumeChange.bind(Jt(i)),i.callbacks[nr.TIME_UPDATE]=i.onTimeupdate.bind(Jt(i)),i}return T(n,[{key:"setAdVolume",value:function(e){this.videoSlot.muted=0===e,this.videoSlot.volume=e}},{key:"destroyAd",value:function(){var e=this;this.slot.removeEventListener("click",this.onClick,!1),f(this.callbacks,(function(t,n){e.videoSlot.removeEventListener(n,t)})),this.videoSlot.removeAttribute("src"),this.videoSlot.load()}},{key:"initAd",value:function(e,t,i,r,a,o){var s=o.slot,c=o.videoSlot;s.addEventListener("click",this.onClick,!1),f(this.callbacks,(function(e,t){c.addEventListener(t,e,!1)})),Ji(nn(n.prototype),"initAd",this).call(this,e,t,i,r,a,o)}},{key:"startAd",value:function(){var e,t,n,i;!0!=(e=this.adMediaUrl,t=this.videoSlot,n=e.split(".").pop(),i=n.indexOf("?"),n=i>-1?n.substr(0,i):n,!t.canPlayType||""!==t.canPlayType("video/".concat(n)))?this.emit(lt.Type.VPAID.AD_ERROR,{message:"Video can not play"}):(this.videoSlot.src=this.adMediaUrl,this.videoSlot.load())}},{key:"stopAd",value:function(){this.destroyAd(),Ji(nn(n.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.destroyAd(),Ji(nn(n.prototype),"skipAd",this).call(this)}},{key:"pauseAd",value:function(){this.videoSlot.pause()}},{key:"resumeAd",value:function(){var e=this,t=this.videoSlot.play();w(t)||t.then((function(){e.emit(lt.Type.VPAID.AD_LOG,{method:"resumeAd",message:"Automatic playback started!",crea:e})})).catch((function(t){e.emit(lt.Type.VPAID.AD_LOG,{method:"resumeAd",message:"Automatic playback failed!",error:t,crea:e})}))}},{key:"onClick",value:function(){this.emit(lt.Type.VPAID.AD_CLICK_THRU),this.pauseAd()}},{key:"removeEventListener",value:function(e){this.videoSlot.removeEventListener(e,this.callbacks[e])}},{key:"onPlaybackError",value:function(e){this.emit(lt.Type.VPAID.AD_ERROR,{DOMEvent:e}),this.stopAd()}},{key:"onDurationChange",value:function(){this.removeEventListener(nr.DURATION_CHANGE),this.adDuration=Math.round(this.videoSlot.duration)}},{key:"onLoadedmetadataPlay",value:function(){this.removeEventListener(nr.LOAD_METADATA),this.resumeAd()}},{key:"onPause",value:function(){this.vastPlayerPaused||(this.vastPlayerPaused=!0,Ji(nn(n.prototype),"pauseAd",this).call(this))}},{key:"onPlay",value:function(){this.vastPlayerPaused&&(this.vastPlayerPaused=!1,Ji(nn(n.prototype),"resumeAd",this).call(this))}},{key:"onPlaying",value:function(){this.removeEventListener(nr.PLAYING),Ji(nn(n.prototype),"startAd",this).call(this),this.emit(lt.Type.VPAID.AD_IMPRESSION),this.emit(lt.Type.VPAID.AD_VIDEO_START)}},{key:"onEnded",value:function(){this.emitAdVideoComplete(),this.stopAd()}},{key:"onVolumeChange",value:function(){this.videoSlot.muted||0===this.videoSlot.volume?Ji(nn(n.prototype),"setAdVolume",this).call(this,!0):Ji(nn(n.prototype),"setAdVolume",this).call(this,!1)}},{key:"onTimeupdate",value:function(){var e=this.videoSlot.currentTime;this.tick(e)}}]),n}(er);function rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var ar=function(e,t){var n=t.indexOf(e);return-1===n?n:n+e.length},or=function(e){en(n,e);var t=rr(n);function n(e){var i,r=e.url;E(this,n);var a=function(e){var t=ar("v=",e);if(-1===t&&-1===(t=ar("video_id=",e)))throw new Error("Not found video ID");return e.substr(t,11)}(r);return(i=t.call(this,{url:r})).isPaused=!1,i.adSkippableState=!0,i.youtubePlayer=null,i.youtubeId=a,i.youtubeContainerDiv=document.createElement("div"),i.youtubeContainerDiv.setAttribute("id",i.youtubeId),i.youtubeApiScript=document.createElement("script"),i.youtubeApiScript.setAttribute("src","https://www.youtube.com/iframe_api"),i.bindFn={onReady:i.onReady.bind(Jt(i)),onError:i.onError.bind(Jt(i)),onStateChange:i.onStateChange.bind(Jt(i))},i}return T(n,[{key:"setAdVolume",value:function(e){this.youtubePlayer.setVolume(e),Ji(nn(n.prototype),"setAdVolume",this).call(this,this.youtubePlayer.getVolume())}},{key:"destroyAd",value:function(){try{this.youtubePlayer.removeEventListener("onReady",this.bindFn.onReady),this.youtubePlayer.removeEventListener("onError",this.bindFn.onError),this.youtubePlayer.removeEventListener("onStateChange",this.bindFn.onStateChange),clearInterval(this.adTimerInterval),this.youtubePlayer.stopVideo(),this.youtubePlayer.destroy()}catch(e){}}},{key:"initAd",value:function(e,t,i,r,a,o){o.slot.appendChild(this.youtubeContainerDiv),Ji(nn(n.prototype),"initAd",this).call(this,e,t,i,r,a,o)}},{key:"startAd",value:function(){var e=this;document.head.appendChild(this.youtubeApiScript),l(window.onYouTubeIframeAPIReady)||(window.onYouTubeIframeAPIReady=function(){e.youtubePlayer=new window.YT.Player(e.youtubeId,{playerVars:{controls:0,modestbranding:1,disablekb:0,autoplay:1,rel:0},videoId:e.youtubeId,height:"100%",width:"100%"}),e.youtubePlayer.addEventListener("onReady",e.bindFn.onReady),e.youtubePlayer.addEventListener("onError",e.bindFn.onError),e.youtubePlayer.addEventListener("onStateChange",e.bindFn.onStateChange)})}},{key:"stopAd",value:function(){this.destroyAd(),Ji(nn(n.prototype),"stopAd",this).call(this)}},{key:"skipAd",value:function(){this.destroyAd(),Ji(nn(n.prototype),"skipAd",this).call(this)}},{key:"resizeAd",value:function(e,t){this.youtubePlayer&&this.youtubePlayer.setSize(e,t)}},{key:"pauseAd",value:function(){this.isPaused||(this.isPaused=!0,this.youtubePlayer.pauseVideo())}},{key:"resumeAd",value:function(){this.isPaused&&(this.isPaused=!1,this.youtubePlayer.playVideo())}},{key:"onReady",value:function(e){this.adDuration=Math.round(e.target.getDuration()),this.setAdVolume(0),e.target.playVideo(),Ji(nn(n.prototype),"startAd",this).call(this),this.emit(lt.Type.VPAID.AD_IMPRESSION),this.emit(lt.Type.VPAID.AD_VIDEO_START)}},{key:"onError",value:function(e){this.emit(lt.Type.VPAID.AD_ERROR,{event:e})}},{key:"onStateChange",value:function(e){var t=this,i=e.data,r=window.YT;switch(i){case r.PlayerState.PLAYING:this.isPaused=!1,this.adTimerInterval=setInterval((function(){return t.adTimerTickCallback()}),1e3),Ji(nn(n.prototype),"resumeAd",this).call(this);break;case r.PlayerState.PAUSED:this.isPaused||this.emit(lt.Type.VPAID.AD_CLICK_THRU),this.isPaused=!0,clearInterval(this.adTimerInterval),Ji(nn(n.prototype),"pauseAd",this).call(this);break;case r.PlayerState.ENDED:this.emitAdVideoComplete(),this.stopAd();break;default:this.emit(lt.Type.VPAID.AD_LOG,{method:"onStateChange",data:i,crea:this})}}},{key:"adTimerTickCallback",value:function(){var e=this.youtubePlayer.getCurrentTime();this.tick(e)}}]),n}(er),sr=function(e){if(null!=e&&!(l((t=e).handshakeVersion)&&l(t.initAd)&&l(t.startAd)&&l(t.stopAd)&&l(t.skipAd)&&l(t.resizeAd)&&l(t.pauseAd)&&l(t.resumeAd)&&l(t.expandAd)&&l(t.collapseAd)&&l(t.subscribe)&&l(t.unsubscribe)))throw new Error("The VPAIDCreative doesn't conform to the VPAID spec");var t},cr=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};E(this,e),sr(t),this._creative=t,this.vpaidSlot=n,this.adMedia=i}var t;return T(e,[{key:"getAdLinear",value:function(){return this._creative.getAdLinear()}},{key:"getAdWidth",value:function(){return this._creative.getAdWidth()}},{key:"getAdHeight",value:function(){return this._creative.getAdHeight()}},{key:"getAdExpanded",value:function(){return this._creative.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return!0}},{key:"getAdRemainingTime",value:function(){var e=this._creative.getAdRemainingTime();return(e=e!==1/0?parseInt(e,10):0)>0&&(this.remainingTime=Math.round(e)),this.remainingTime}},{key:"getAdDuration",value:function(){var e=this._creative.getAdDuration();return(e=e!==1/0?parseInt(e,10):0)>0&&(this.duration=Math.round(e)),this.duration}},{key:"getAdCurrentTime",value:function(){return this.getAdDuration()-this.getAdRemainingTime()}},{key:"getAdCompanions",value:function(){return this._creative.getAdCompanions()}},{key:"getAdIcons",value:function(){return this._creative.getAdIcons()}},{key:"getAdVolume",value:function(){return this._creative.getAdVolume()}},{key:"setAdVolume",value:function(e){this._creative.setAdVolume(e)}},{key:"getAdSecondsForViewable",value:function(){return this.adMedia.type&&this.adMedia.type.includes("video")?2:1}},{key:"handshakeVersion",value:function(){return this._creative.handshakeVersion()}},{key:"initAd",value:function(e,t,n,i,r,a){this._creative.initAd(e,t,n,i,r,a)}},{key:"startAd",value:function(){this._creative.startAd()}},{key:"stopAd",value:function(){this._creative.stopAd()}},{key:"resizeAd",value:function(e,t,n){this._creative.resizeAd(e,t,n)}},{key:"pauseAd",value:function(){this._creative.pauseAd()}},{key:"resumeAd",value:function(){this._creative.resumeAd()}},{key:"expandAd",value:function(){this._creative.expandAd()}},{key:"collapseAd",value:function(){this._creative.collapseAd()}},{key:"skipAd",value:function(){this._creative.skipAd()}},{key:"subscribe",value:function(e,t,n){this._creative.subscribe(t,e,n)}},{key:"unsubscribe",value:function(e,t){this._creative.unsubscribe(t,e)}},{key:"adFactoryInitialize",value:function(e){try{this._creative.SMInitialize(e)}catch(e){}}}],[{key:"create",value:(t=b(C().mark((function t(n){var i,r,a,o,s,c,u,l;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.adMedia,r=n.slot,a=n.adParameters,o=n.loadingModuleTime,s=void 0===o?3e4:o,c=null,u=null,!Ci.isVPAID(i)){t.next=26;break}if(t.prev=4,!Ci.isJavascript(i)){t.next=13;break}return t.next=8,Dt(Qi({adMediaUrl:i.url,adParameters:a,slot:r}),s);case 8:l=t.sent,c=l.creative,u=l.vpaidSlot,t.next=18;break;case 13:if(!Ci.isFlash(i)){t.next=17;break}throw new Error("Flash is not supported");case 17:throw new Error("Unsupported media type");case 18:t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(4),L.error("Loading VPAID",t.t0),new yi(101,{reason:t.t0?t.t0.message:""});case 24:t.next=27;break;case 26:c=Ci.isYoutube(i)?new or(i):new ir(i);case 27:return t.abrupt("return",new e(c,u,i));case 28:case"end":return t.stop()}}),t,null,[[4,20]])}))),function(e){return t.apply(this,arguments)})}]),e}();function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var lr=function(e){en(n,e);var t=ur(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"startAd",value:function(){this.emit(lt.Type.VPAID.AD_STARTED),this.emit(lt.Type.VPAID.AD_IMPRESSION),this.emit(lt.Type.VPAID.AD_VIDEO_START),this.emit(lt.Type.VPAID.AD_STOPPED)}}]),n}(er);const dr={vpaidWrapperFactory:function(e){return cr.create(e)},reminderWrapperFactory:function(e){var t=new lr(e);return new cr(t,null,e)}};function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={},n=e.startsWith(Xn);return n&&(t.ratio="16:9"),t}function fr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=w(e._)?e:e._;if(R(n)){if(n=n.trim(),!t)return n;if(Ci.isHttps(n))return n}return null}function vr(e){f(Array.from(e.children).filter((function(e){return"VIDEO"!==e.tagName&&oe(e.dataset.deleting)})),(function(e){oe(e.className.includes("".concat(Y,"-vpaid-iframe")))?Ve(e):(We(e,{height:0,margin:0,visibility:"hidden"}),e.setAttribute("data-deleting",!0),function(e){setTimeout((function(){Ve(e)}),5e3)}(e))}))}var pr=Q;function mr(e){return Array.from(new URL(e).searchParams.entries()).reduce((function(e,t){return A(A({},e),{},p({},t[0],t[1]))}),{})}function Ar(e){var t,n=e.adTagUrl,i=e.macroValues,r=void 0===i?{}:i,a=n;if(n.includes("spotxchange")&&oe(n.includes("&ad_volume"))&&(a+="&ad_volume=0"),a=ve({str:a,values:r[pr]?A(A({},r),{},p({},pr,ue.encode(r[pr]))):r}),a.includes("vast.sunmedia.tv/creatives"))try{var o=function(e){var t=Ie(e.match(/^(http|https):\/\/vast.sunmedia.tv\/creatives\/([a-zA-Z0-9_.-]+)/)||[],3),n=t[1],i=t[2];return oe(n&&i)?{url:e}:{url:"".concat(n,"://").concat("creatives.sunmedia.tv","/").concat(i,"/").concat(i,".xml"),params:A({rnd:Math.abs(Math.floor(1e9*Math.random()))},mr(e))}}(a);a=o.url,t=o.params}catch(e){L.error("replacing ".concat(a," with direct xml VAST"),e)}return{url:a,tagMacros:t}}function yr(e){return ke(e)||i(e)||r(e)||Te()}var gr={},br=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];L.info.apply(L,["[HELPER getAdMediaFile]"].concat(t))},Er=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];L.warning.apply(L,["[HELPER getAdMediaFile]"].concat(t))};function kr(e){var t=function(e){var t=[],n=[],i=null,r=null;try{f(e,(function(e){var a={},o=fr(e,!0);if(null!==o){var s=e.$,c=s.type,u=void 0===c?"":c,l=s.codec,d=void 0===l?"":l,h=s.apiFramework,f=void 0===h?"":h,v=e.$,p=v.width,m=void 0===p?"":p,A=v.height,y=void 0===A?"":A,g=v.bitrate,b=void 0===g?"":g;if(""!==u){var E=o.split(".").pop().toLowerCase();if(a.url=o,a.type=u,""!==d&&(a.codec=d),a.apiFramework=f,Ci.isVPAID(a))return br("VPAID creative detected"),Ci.isJavascript(a)?void(i=a):Ci.isFlash(a)?void(r=a):void Er("no supported vpaid",u);Ci.isYoutube(a)?t=a:(""===m&&(m=0),""===y&&(y=0),(""===b||b<10)&&(b=0),a.width=parseInt(m,10),a.height=parseInt(y,10),a.bitrate=parseInt(b,10),ln.isDesktop()?E.indexOf("mp4")>-1&&n.push(a):(E.indexOf("mp4")>-1||E.indexOf("ogg")>-1||E.indexOf("webm")>-1||E.indexOf("mov")>-1&&ln.isIOs())&&n.push(a))}}}))}catch(e){e!==gr&&Er(e.message,e)}return{vpaidMediaFile:i||r,youtubeMediaFile:t,mediaFileItems:n}}(e),n=t.youtubeMediaFile,i=t.vpaidMediaFile,r=t.mediaFileItems,a=null;if(null!=i)a=i;else if(r.length>0){r.sort((function(e,t){return e.bitrate-t.bitrate}));var o=yr(r),s=o[0],c=o[1];o.slice(2);a=s,ln.isTablet()&&!w(c)?a=c:f(r,(function(e){e.bitrate>=512&&e.bitrate<720&&e.width>400&&e.width<800&&a.bitrate<e.bitrate&&(a=e)}))}else n&&(a=n);return br("selected mediafile",a),a}function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var Ir="VAST MANAGER",Cr=L.wrapWithName(Ir),wr={message:"VAST/EMPTY"},Rr=0,Sr=function(e){var t=null;try{t={},R(e)&&(-1!==e.indexOf("SM_NOSKIP")&&(t.skip=!1),-1!==e.indexOf("SM_NOAVA")&&(t.ava=!1),-1!==e.indexOf("SM_AUDIOON")&&(t.sound=!0),-1!==e.indexOf("SM_NORESTART")&&(t.restart=!1),-1!==e.indexOf("InVPAID")&&(t.InVPAIDSunMedia=!0))}catch(e){}return t},Dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A(A({},hr(e.fromTag)),Sr(e.adTitle))},Pr=function(e,t){return parseInt(e.$.sequence,10)-parseInt(t.$.sequence,10)},Mr=function(e){var t=e.event,n=e.node,i=e.trackingEvents,r=e.isUrl,a=void 0===r||r;f(n,(function(e){var n=fr(e,a);null!=n&&i.add({event:t,url:n})}))},xr=function(e){var t=e.node,n=void 0===t?{}:t,i=e.trackingEvents,r=n.Tracking,a=void 0===r?[]:r;a.length>0&&f(a,(function(e){var t=e.$.event,n=void 0===t?"":t;if(""!==n){var r=fr(e,!0);i.add({event:n,url:r})}}))},Or=function(e){var t=e.$,n=void 0===t?{}:t,i=e.Companion,r=void 0===i?[]:i;Cr.info("registerCompanions",n,r);var a=n.required,o=[];return f(r,(function(e){var t=e.StaticResource,n=void 0===t?[]:t,i=e.IFrameResource,r=void 0===i?[]:i,a=e.HTMLResource,s=void 0===a?[]:a,c=e.AltText,u=void 0===c?[]:c,l=e.TrackingEvents,d=void 0===l?[]:l,h=e.CompanionClickThrough,f=void 0===h?[]:h,v=e.CompanionClickTracking,p=void 0===v?[]:v,m=null,A=null,y=null;if(n.length>0){var g=n.shift();(m={}).$=g.$,m.content=fr(g,!0)}if(r.length>0){var b=r.shift();(A={}).$=b.$,A.content=fr(b,!0)}if(s.length>0){var E=s.shift();(y={}).$=E.$,y.content=fr(E)}if(null!=m&&m.content||null!=A&&A.content||null!=y&&y.content){var k={$:e.$,staticResource:m,iframeResource:A,htmlResource:y};u.length>0&&(k.altText=fr(u.shift())),f.length>0&&(k.clickThroughUrl=fr(f.shift(),!0));var T=pi();Mr({event:lt.Type.VAST.CLICK_TRACKING,node:p,trackingEvents:T}),xr({node:d.shift(),trackingEvents:T}),k.trackingEvents=T,o.push(k)}})),Gi.companionAdsFactory({required:a,companionList:o})},Lr=function(e,t){var n=t.clickThroughUrl,i=t.companionAds,r=t.adData,o=t.trackingEvents,s=e;return s.adClickThroughUrl=!e.adClickThroughUrl&&n?n:e.adClickThroughUrl,s.adCompanions=0===e.adCompanions.length&&i?i:e.adCompanions,s.adData=!e.adData&&r?r:e.adData,s.adTrackingEvents.trackers=[].concat(a(e.adTrackingEvents.trackers),a(o.trackers)),s},Vr=function(e){var t=e.code;if(e.trackingEvents.fire(lt.Type.VAST.ERROR,(function(e){return ve({str:e,values:S(t)?{errorCode:t}:{},pattern:/(\[)(ERRORCODE)(])/g,macros:{errorCode:"ERRORCODE"}})})),S(t))throw new yi(t);throw wr},Nr=function(e){en(o,e);var t,n,i,r,a=Tr(o);function o(e){var t,n=e.slot,i=e.macroValues,r=void 0===i?{}:i;return E(this,o),(t=a.call(this)).slot=n,t.macroValues=r,t.shouldStopExecution=!1,t}return T(o,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.adTagFeed=e,this.currentIndex=0,this.videoplazaWaterfallManager=null;var n=t.requestTimeout;this.requestTimeout=function(e){return l(n)?n(e):n}}},{key:"stopExecution",value:function(){this.shouldStopExecution=!0}},{key:"validateExecution",value:function(){if(this.shouldStopExecution)throw new Error("Load ads canceled")}},{key:"nextAdTag",value:function(){try{var e=this.adTagFeed[this.currentIndex],t=e.url;return this.currentIndex+=1,!1===t.startsWith("https")?this.nextAdTag():e}catch(e){return!1}}},{key:"loadAds",value:(r=b(C().mark((function e(){var t,n,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateExecution(),vr(this.slot),null==this.videoplazaWaterfallManager){e.next=13;break}if(!this.videoplazaWaterfallManager.hasNext()){e.next=12;break}return e.next=6,this.videoplazaWaterfallManager.loadAds();case 6:if(!(t=e.sent)){e.next=9;break}return e.abrupt("return",t);case 9:this.videoplazaWaterfallManager=null,e.next=13;break;case 12:this.videoplazaWaterfallManager.fireEmptyWaterfallError();case 13:if(!1!==(n=this.nextAdTag())){e.next=17;break}return this.emit(lt.Type.SDK.NO_MORE_TAGS),e.abrupt("return",null);case 17:return this.adTag=n,this.emit(lt.Type.SDK.REQUEST,this.adTag),i=this.adTag.url,e.abrupt("return",this.fetchAds(i));case 21:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchAds",value:(i=b(C().mark((function e(t){var n,i,r,a,o,s,c,u,l=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},this.validateExecution(),i=null,r=Ar({macroValues:this.macroValues,adTagUrl:t}),a=r.url,o=r.tagMacros,Cr.info("tag with macros replaced",a,o),!((Rr+=1)>$n)){e.next=8;break}throw new Error(ei);case 8:return e.prev=8,c=this.requestTimeout(a),e.prev=10,e.next=13,Wt.get(a,{withCredentials:!0,timeout:c});case 13:s=e.sent,e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(10),Cr.error(lt.Type.SDK.REQUEST_ERROR,e.t0),e.next=21,Wt.get(a,{withCredentials:!1,timeout:c});case 21:s=e.sent;case 22:e.next=29;break;case 24:return e.prev=24,e.t1=e.catch(8),this.emit(lt.Type.SDK.REQUEST_ERROR,this.adTag),Cr.error(lt.Type.SDK.REQUEST_ERROR,e.t1),e.abrupt("return",this.loadAds());case 29:return this.validateExecution(),e.prev=30,u=s.data,e.next=34,this.setVast(a,u,n);case 34:h(i=e.sent)&&o&&y(i,{tagMacros:o}),e.next=42;break;case 38:return e.prev=38,e.t2=e.catch(30),Cr.warning(e.t2.message,e.t2),e.abrupt("return",this.loadAds());case 42:return e.abrupt("return",i);case 43:case"end":return e.stop()}}),e,this,[[8,24],[10,16],[30,38]])}))),function(e){return i.apply(this,arguments)})},{key:"setVast",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cr.info("setVast",t,n);var i=n.companionAds,r=void 0===i?{}:i,a=n.trackingEvents,o=n.clickThroughUrl,s=pi();w(a)||(Cr.info("update ad tracker events with trackers from wrapper",a),s.concat(a));var c=t.VAST,u=void 0===c?[]:c;0===u.length&&Vr({code:101,trackingEvents:s});var l=u.Ad,d=u.Error,h=void 0===d?[]:d;return Mr({event:lt.Type.VAST.ERROR,node:h,trackingEvents:s}),w(l)&&Vr({trackingEvents:s}),this.filterAdPod(e,l,{trackingEvents:s,clickThroughUrl:o,companionAds:r})}},{key:"filterAdPod",value:function(e,t,n){Cr.info("filterAdPod",t);var i=[],r=[],a=null;return f(t,(function(e){var t=e.$.sequence;""===(void 0===t?"":t)?r.push(e):i.push(e)})),0===i.length&&r.length>0?(Cr.info("not in an ad pod - we only load the first standalone ad"),a=r.shift()):i.length>0&&(Cr.info("ad pod detected"),i.sort(Pr),a=i.shift()),le(a)&&Vr({code:200,trackingEvents:n.trackingEvents}),this.setAd(e,a,n)}},{key:"setAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cr.info("setAd",t);var i=t.InLine,r=void 0===i?[]:i,a=t.Wrapper,o=void 0===a?[]:a,s=t.$,c=void 0===s?{}:s,u=n.companionAds,l=void 0===u?{}:u,d=n.clickThroughUrl,h=n.trackingEvents;0===r.length&&0===o.length&&Vr({code:101,trackingEvents:h});var f,v=!1;o.length>0?(v=!0,f=o.shift()):f=r.shift();var p=f,m=p.VASTAdTagURI,A=void 0===m?[]:m,y=p.AdSystem,g=void 0===y?[]:y,b=p.AdTitle,E=void 0===b?[]:b,k=p.Impression,T=void 0===k?[]:k,I=p.AdServingId,C=void 0===I?[]:I,w=p.Category,R=void 0===w?[]:w,S=p.Description,D=void 0===S?[]:S,P=p.Advertiser,M=void 0===P?[]:P,x=p.Pricing,O=void 0===x?[]:x,L=p.Expires,V=void 0===L?[]:L,N=p.Error,F=void 0===N?[]:N,U=p.Creatives,_=void 0===U?[]:U,B=p.ViewableImpression,W=void 0===B?[]:B,z=c.id,G={fromTag:e,adId:z};A.length>0&&(G.vastAdTagURI=fr(A.shift())),g.length>0&&(G.adSystem=fr(g.shift())),E.length>0&&(G.adTitle=fr(E.shift())),C.length>0&&(G.adServingId=fr(C.shift())),R.length>0&&(G.category=fr(R.shift())),D.length>0&&(G.description=fr(D.shift())),M.length>0&&(G.advertiser=fr(M.shift())),O.length>0&&(G.pricing=fr(O.shift())),V.length>0&&(G.expires=fr(V.shift())),Mr({event:lt.Type.VAST.ERROR,node:F,trackingEvents:h}),Mr({event:lt.Type.VAST.IMPRESSION,node:T,trackingEvents:h}),W[0]&&(Mr({event:lt.Type.VAST.VIEWABLE,node:W[0].Viewable,trackingEvents:h,isUrl:!1}),Mr({event:lt.Type.VAST.NOT_VIEWABLE,node:W[0].NotViewable,trackingEvents:h,isUrl:!1}),Mr({event:lt.Type.VAST.VIEWABILITY_UNDETERMINED,node:W[0].ViewUndetermined,trackingEvents:h,isUrl:!1})),v&&!G.vastAdTagURI&&Vr({code:101,trackingEvents:h});var H=(null==_?void 0:_.shift())||{},j=H.Creative,Y=void 0===j?[]:j;return v||0!==Y.length||Vr({code:101,trackingEvents:h}),this.setCreatives({parentWrapper:{companionAds:l,trackingEvents:h,clickThroughUrl:d},creativeArr:Y,isWrapper:v,adData:G})}},{key:"setCreatives",value:(n=b(C().mark((function e(t){var n,i,r,a,o,s,c,u,l,d,h,v,p,m,y,g,b,E,k,T,I,w,R,S,D,P,M;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.creativeArr,i=t.parentWrapper,r=void 0===i?{}:i,a=t.isWrapper,o=t.adData,Cr.info("setCreatives",n),s=r.trackingEvents,c=r.companionAds,u=void 0===c?{}:c,l=r.clickThroughUrl,d=null,h=function(e){var t=e.ClickThrough,n=void 0===t?[]:t,i=e.ClickTracking,r=void 0===i?[]:i;n.length>0&&(l=fr(n.shift(),!0)),Mr({event:lt.Type.VAST.CLICK_TRACKING,node:r,trackingEvents:s});var a=new RegExp("\\be=".concat(qn,"\\b"),"g");Mr({event:lt.Type.VAST.USER_INTERACT,node:r.filter((function(e){return e._.includes(Qn)&&!!e._.match(a)})).map((function(e){return A(A({},e),{},{_:e._.replace(a,"e=".concat(Jn))})})),trackingEvents:s})},v=0;v<n.length;v+=1)p=n[v],m=p.Linear,y=void 0===m?[]:m,g=p.CompanionAds,(b=void 0===g?[]:g).length>0&&(u=Or(b.shift())),y.length>0&&(d=y.shift(),k=(E=d).TrackingEvents,T=void 0===k?[]:k,I=E.VideoClicks,w=void 0===I?[]:I,xr({node:T.shift(),trackingEvents:s}),w.length>0&&f(w,h));if(!a){e.next=22;break}if(Cr.info("following wrapper"),R=o.vastAdTagURI,S={url:R},!Ci.isNoVideoReminder(S)){e.next=16;break}return e.next=14,dr.reminderWrapperFactory(S);case 14:return D=e.sent,e.abrupt("return",{isNoVideoReminder:!0,initialAdTag:this.adTag,linearCreative:D,adClickThroughUrl:l,adTrackingEvents:s,adCompanions:u,adData:o,adConfig:Dr(o)});case 16:if(null===R){e.next=21;break}return P={clickThroughUrl:l,trackingEvents:s,companionAds:u},(M=this.fetchAds(R,P)).initialAdTag=this.adTag,e.abrupt("return",M);case 21:Vr({code:300,trackingEvents:s});case 22:return e.abrupt("return",this.setLinearMediaFile({linear:d,companionAds:u,trackingEvents:s,clickThroughUrl:l,adData:o}));case 23:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setLinearMediaFile",value:(t=b(C().mark((function e(t){var n,i,r,a,s,c,u,l,d,h,f,v,m,A,y,g,b,E,k,T;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.linear,i=t.companionAds,r=t.trackingEvents,a=t.clickThroughUrl,s=t.adData,this.validateExecution(),Cr.info("setLinearMediaFile",n),c="",e.prev=4,l=n.AdParameters,d=void 0===l?[]:l,h=n.MediaFiles,f=void 0===h?[]:h,d.length>0&&(c=fr(d.shift())),v=f.shift(),m=v.InteractiveCreativeFile,A=void 0===m?[]:m,y=v.MediaFile,g=void 0===y?[]:y,(u=A.length>0?(I=A.shift(),C=void 0,{apiFramework:(C=I.$).apiFramework,type:C.type,url:fr(I,!0)}):kr(g))&&0!==u.length){e.next=11;break}throw new Error;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),Vr({code:101,trackingEvents:r});case 16:if(!Ci.isVideoplaza(u)){e.next=32;break}return Cr.info("DETECTED Videoplaza Waterfall"),E=o.create({macroValues:this.macroValues,slot:this.slot}),k=p({},lt.Type.SDK.REQUEST_ERROR,Tt),xn(this)(E,{logWrapper:Ir,propagate:!0}).subscribe(k),this.videoplazaWaterfallManager=new Ii({adData:s,fromAdTag:this.adTag,adParametersData:c,vastManager:E}),e.next=24,this.videoplazaWaterfallManager.loadAds();case 24:b=e.sent,this.validateExecution(),E.offAll(),b||Vr({trackingEvents:r}),b=Lr(b,{clickThroughUrl:a,companionAds:i,adData:s,trackingEvents:r}),e.next=43;break;case 32:return e.prev=32,e.next=35,dr.vpaidWrapperFactory({adMedia:u,adParameters:c,slot:this.slot});case 35:T=e.sent,e.next=41;break;case 38:e.prev=38,e.t1=e.catch(32),Vr({code:101,trackingEvents:r});case 41:this.validateExecution(),b={linearCreative:T,adParametersData:c,adClickThroughUrl:a,adTrackingEvents:r,adCompanions:i,adData:s,adConfig:Dr(s),initialAdTag:this.adTag};case 43:return e.abrupt("return",b);case 44:case"end":return e.stop()}var I,C}),e,this,[[4,13],[32,38]])}))),function(e){return t.apply(this,arguments)})}],[{key:"create",value:function(e){return new o({slot:e.slot,macroValues:e.macroValues})}}]),o}(on);const Fr={vastManagerFactory:function(e){return Nr.create(e)}};var Ur=0,_r=1,Br=2,Wr=3,zr=-1;var Gr=[{hiddenProperty:"hidden",visibilityEvent:"visibilitychange"},{hiddenProperty:"msHidden",visibilityEvent:"msvisibilitychange"},{hiddenProperty:"mozHidden",visibilityEvent:"mozvisibilitychange"},{hiddenProperty:"webkitHidden",visibilityEvent:"webkitvisibilitychange"}],Hr=["onfocusin","onfocusout","onpageshow","onpagehide","onfocus","onblur"],jr=function(){return"visible"===document.visibilityState};function Yr(e){var t=function(){jr()&&(Hr.forEach((function(e){document[e]=null})),e())};Hr.forEach((function(e){document[e]=t}))}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce((function(e,t){return e&&e[t]}),e)}var Kr=[z.VIDEO],Xr=[z.SCROLLER,z.IMAGE,z.DISPLAY],Qr=[z.SOCIAL,z.SCROLLER,z.DISPLAY,z.PROGRAMMATIC_DISPLAY,z.SURVEY],qr=["counter","fullscreen","label","play","skip","videoPlayer","volume"];function Jr(e){var t=e.provider,n=e.type,i=e.ava,r=e.transparentBackground,a=e.controls,o=void 0===a?{}:a,s={};if("SM"!==t)return s;var c=function(e){return e.includes(n)};c(Kr)&&(s.ratio="16:9"),En(i)&&(s.ava=i),(r||c(Xr))&&(s.referenceBackground="transparent");var u=n===z.VIDEO;return qr.forEach((function(e){s[e]=u})),u&&(s.skip={enabled:!0,style:{left:"8.5%"}},s.label={enabled:!0,style:{left:"1.5%"}}),c(Qr)&&(s.skip={enabled:!0,class:ti}),A(A({},s),o)}function $r(e){if(R(e)){var t=!1;(window.document.hasFocus()||window.parent&&window.parent.document.hasFocus())&&(t=!0),t&&window.open(e)}}function ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var ta="AD",na="UI",ia="CONTROLLER",ra=L.wrapWithName(ia),aa=function(e){en(i,e);var t,n=ea(i);function i(e){var t,r=e.macroValues,a=e.vastManager,o=e.playerUI;return E(this,i),(t=n.call(this)).macroValues=r,t.vastManager=a,t.playerUI=o,t.options={},t.onVideoElemPlayingBind=t.onVideoElmPlaying.bind(Jt(t)),t.eventSubscriberFactory=xn(Jt(t)),t.currentAdSubscriber=null,t}return T(i,[{key:"resetAdState",value:function(e){this.options=e||this.options,this.adRatio=this.options.ratio,this.currentAd=null,this.adStarted=!1,this.adImpression=!1,this.videoStarted=!1,this.firstQuartileFired=!1,this.midpointFired=!1,this.thridQuartileFired=!1,this.videoCompleted=!1,this.adStopped=!1,this.skipBtnDisplayed=!1,this.adTimeCounter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.period,i=void 0===n?1e3:n,r=t.context,o=t.args,s=void 0===o?[]:o;if(!l(e))return null;var c=null,u=null;function d(){this.lastExecutionTime=Date.now();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(r,n)}function h(){clearInterval(c),clearTimeout(u)}function f(){var e=this;Object.keys(this).forEach((function(t){"state"!==t&&delete e[t]}))}function v(e){return new Promise((function(t){u=setTimeout(t,e)}))}return{state:Ur,lastExecutionTime:null,remainingTime:0,set:function(){this.state!==_r&&(c=setInterval.apply(void 0,[d.bind(this),i].concat(a(s))),this.state=_r)},start:function(){this.state!==_r&&(d.apply(this,s),this.set())},pause:function(){this.state!==_r&&this.state!==Wr||(this.remainingTime=i-(Date.now()-this.lastExecutionTime),h(),this.state=Br)},resume:function(){var e=this;return b(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state===Br){t.next=2;break}return t.abrupt("return");case 2:return e.state=Wr,t.next=5,v(e.remainingTime);case 5:e.start(),e.remainingTime=0;case 7:case"end":return t.stop()}}),t)})))()},restart:function(){h(),this.state=Ur,this.start()},cancel:function(){h(),this.state=zr,f.call(this)}}}(this.setRemainingTime,{period:1e3,context:this}),this.emitAdSkippedTimeout=null,this.emitVideoCompleteTimeout=null,this.emitAdStoppedTimeout=null}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.resetAdState(t),this.playerUI.init(t),this.subscribeToUIEvents(),this.subscribeToVastManagerEvents(),this.vastManager.init(e,this.options),this.loadAds()}},{key:"continueLoadingAds",value:function(){return this.clearAd(),this.resetAdState(),this.loadAds()}},{key:"loadAds",value:function(){var e=this;return this.playerUI.resetVideoPlayer(this.options),this.playerUI.displayMediaLayer(),this.vastManager.loadAds().then((function(t){if(e.currentAd=t,null!=e.currentAd){var n;e.subscribeToCurrentAdEvents();var i={AdParameters:e.currentAd.adParametersData,macros:e.currentAd.tagMacros},r={slot:e.playerUI.mediaLayerElem,videoSlot:e.playerUI.videoElem};null!=e.currentAd.linearCreative.vpaidSlot&&(r.slot=e.currentAd.linearCreative.vpaidSlot),e.updateOptions(null===(n=e.currentAd)||void 0===n?void 0:n.adConfig);try{var a=e.macroValues,o=a.width,s=a.height;e.currentAd.linearCreative.initAd(o,s,"normal",500,i,r)}catch(t){return ra.warning(t.message,t),e.continueLoadingAds()}}return t})).catch((function(t){ra.error("Loading ads",t),(null==t?void 0:t.message)===ei&&e.emit(lt.Type.SDK.MAX_REQUESTS_REACHED)}))}},{key:"obtainPlayerDimensions",value:function(){var e=this.playerUI.$adContainer.clientWidth;return{width:e,height:Nn("height")(e,this.adRatio)}}},{key:"subscribeToUIEvents",value:function(){var e,t={logWrapper:na,propagate:!0},n=this.eventSubscriberFactory(this.playerUI,t),i=(p(e={},lt.Type.UI.PLAY_CLICKED,this.onUIPlayClicked),p(e,lt.Type.UI.VOLUME_CHANGED,this.onUIVolumeChanged),p(e,lt.Type.UI.FULLSCREEN_CHANGED,this.onUIFullscreenChanged),e);n.subscribe(i);var r=p({},lt.Type.UI.SKIP_CLICKED,this.onUISkipClicked);n.subscribeOnce(r)}},{key:"subscribeToVastManagerEvents",value:function(){var e,t={logWrapper:na,propagate:!0},n=this.eventSubscriberFactory(this.vastManager,t),i=(p(e={},lt.Type.SDK.REQUEST,Tt),p(e,lt.Type.SDK.REQUEST_ERROR,Tt),p(e,lt.Type.SDK.NO_MORE_TAGS,Tt),e);n.subscribe(i)}},{key:"subscribeToCurrentAdEvents",value:function(){var e,t,n={logWrapper:ta,propagate:!0};this.currentAdSubscriber=this.eventSubscriberFactory(this.currentAd.linearCreative,n);var i=(p(e={},lt.Type.VPAID.AD_PAUSED,this.onAdPaused),p(e,lt.Type.VPAID.AD_PLAYING,this.onAdPlaying),p(e,lt.Type.VPAID.AD_VOLUME_CHANGE,this.onAdVolumeChange),p(e,lt.Type.VPAID.AD_SKIPPABLE_STATE_CHANGE,this.onAdSkippableStateChange),p(e,lt.Type.VPAID.AD_DURATION_CHANGE,this.onAdDurationChange),p(e,lt.Type.VPAID.AD_CLICK_THRU,this.onAdClickThru),p(e,lt.Type.VPAID.AD_EXPANDED_CHANGE,this.onAdExpandedChange),p(e,lt.Type.VPAID.AD_INTERACTION,this.onAdInteraction),p(e,lt.Type.VPAID.AD_LOG,this.onAdLog),e);this.currentAdSubscriber.subscribe(i);var r=(p(t={},lt.Type.VPAID.AD_ERROR,this.onAdError),p(t,lt.Type.VPAID.AD_LOADED,this.onAdLoaded),p(t,lt.Type.VPAID.AD_STARTED,this.onAdStarted),p(t,lt.Type.VPAID.AD_IMPRESSION,this.onAdImpression),p(t,lt.Type.VPAID.AD_VIDEO_START,this.onAdVideoStart),p(t,lt.Type.VPAID.AD_STOPPED,this.onAdStopped),p(t,lt.Type.VPAID.AD_SKIPPED,this.onAdSkipped),p(t,lt.Type.VPAID.AD_VIDEO_FIRST_QUARTILE,this.onAdVideoFirstQuartile),p(t,lt.Type.VPAID.AD_VIDEO_MIDPOINT,this.onAdVideoMidpoint),p(t,lt.Type.VPAID.AD_VIDEO_THIRD_QUARTILE,this.onAdVideoThirdQuartile),p(t,lt.Type.VPAID.AD_VIDEO_COMPLETE,this.onAdVideoComplete),p(t,lt.Type.SDK.AD_FACTORY,this.onAdFactory),p(t,lt.Type.SDK.AD_FACTORY_PROGRAMMATIC_DISPLAY,this.onAdFactoryProgrammaticDisplay),t);this.currentAdSubscriber.subscribeOnce(r)}},{key:"hasActuallyStarted",value:function(){return this.adStarted&&(this.adImpression||this.videoStarted)}},{key:"startAd",value:function(){!this.adStarted&&Zr(this.currentAd,"linearCreative")&&(this.adStarted=!0,this.currentAd.linearCreative.startAd())}},{key:"resizeAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";S(e)&&S(t)&&this.currentAd&&this.currentAd.linearCreative&&this.currentAd.linearCreative.resizeAd(e,t,n)}},{key:"setSkipDivVisibility",value:function(){Zr(this.currentAd,"linearCreative")&&(this.currentAd.linearCreative.getAdSkippableState()?(this.playerUI.displaySkipControl(),this.skipBtnDisplayed=!0):this.playerUI.hideSkipControl())}},{key:"trySetAdDuration",value:function(){Zr(this.currentAd,"linearCreative")&&!this.currentAd.duration&&(this.currentAd.duration=this.currentAd.linearCreative.getAdDuration()||this.currentAd.linearCreative.getAdRemainingTime()||null)}},{key:"shouldTryDisplaySkipBtn",value:function(e){var t=this.currentAd.duration-this.options.skipTime;return this.options.skip&&!this.skipBtnDisplayed&&pe(e)&&pe(t)&&e<=t}},{key:"setRemainingTime",value:function(){var e=this;if(this.trySetAdDuration(),Zr(this.currentAd,"linearCreative")&&this.currentAd.duration){var t=this.currentAd.linearCreative.getAdRemainingTime();this.playerUI.updateRemainingTime(t),this.shouldTryDisplaySkipBtn(t)&&this.setSkipDivVisibility(),t<=1&&!this.emitVideoCompleteTimeout&&(this.emitVideoCompleteTimeout=setTimeout((function(){e.currentAdSubscriber.emitEvent(lt.Type.VPAID.AD_VIDEO_COMPLETE)}),3500))}}},{key:"fireTrackingEvent",value:function(e){this.currentAd&&null!=this.currentAd.adTrackingEvents&&this.currentAd.adTrackingEvents.fire(e).then((function(t){ra.info("FIRE TRACKER",e,t)})).catch((function(t){ra.warning("FIRE TRACKER",e,t.message)}))}},{key:"onVideoElmPlaying",value:function(){this.currentAd&&null!=this.currentAd.linearCreative&&!this.adStarted&&this.currentAd.linearCreative.pauseAd()}},{key:"onUIPlayClicked",value:function(){this.currentAd&&null!=this.currentAd.linearCreative&&this.currentAd.linearCreative.resumeAd()}},{key:"onUISkipClicked",value:function(){this.skipAd()}},{key:"onUIVolumeChanged",value:function(e){var t=e.muted;this.currentAd&&this.currentAd.linearCreative&&(this.lastVolume=this.currentAd.linearCreative.getAdVolume(),this.currentAd.linearCreative.setAdVolume(t?0:1))}},{key:"onUIFullscreenChanged",value:function(e){var t=e.changedToFullscreen,n=void 0!==t&&t;if(this.currentAd&&this.currentAd.linearCreative)if(n){var i=window.screen,r=i.height,a=i.width,o=this.currentAd.dimensions.ratio,s={};a>=r?(s.width=Nn("width")(r,o),s.height=r):(s.width=a,s.height=Nn("height")(a,o));var c=s.height,u=s.width;this.currentAd.isAdFactory&&this.playerUI.mediaLayerElem.setAttribute("style","\n          left: 50%;\n          width: ".concat(u,"px;\n          margin-left: -").concat(u/2,"px;\n          top: 50%;\n          height: ").concat(c,"px;\n          margin-top: -").concat(c/2,"px;\n        ")),this.fireTrackingEvent(lt.Type.VAST.PLAYER_EXPAND),this.fireTrackingEvent(lt.Type.VAST.FULLSCREEN),this.currentAd.linearCreative.resizeAd(u,c,"fullscreen")}else{this.currentAd.isAdFactory&&this.playerUI.mediaLayerElem.removeAttribute("style"),this.fireTrackingEvent(lt.Type.VAST.PLAYER_COLLAPSE),this.fireTrackingEvent(lt.Type.VAST.EXIT_FULLSCREEN);var l=this.obtainPlayerDimensions(),d=l.width,h=l.height;this.currentAd.linearCreative.resizeAd(d,h)}}},{key:"isFullscreen",value:function(){return this.playerUI.isInFullscreenMode}},{key:"onAdFactory",value:function(e){try{if(!(e&&"SM"===e.provider))throw new Error("Wrong eventData received for adFactory");this.currentAd.isAdFactory=!0,this.currentAd.linearCreative.isAdFactory=!0,this.currentAd.isProgrammaticDisplay=e.type===z.PROGRAMMATIC_DISPLAY,this.currentAd.adFactory=e,this.currentAd.linearCreative.adFactoryInitialize({SMContainer:this.playerUI.mediaLayerElem,plugin:!0}),Ee(this.updateOptions.bind(this),Jr)(this.currentAd.adFactory)}catch(e){ra.warning(e)}}},{key:"onAdFactoryProgrammaticDisplay",value:function(e){try{var t=e.w,n=e.h,i=Nn("ratio")(t,n)||this.options.programmaticDisplayRatio;this.currentAd.dimensions={width:t,height:n,ratio:i},this.emit(lt.Type.SDK.RESIZE_PROGRAMMATIC_DISPLAY)}catch(e){ra.error(e)}}},{key:"setAdDimensions",value:function(){var e,t;if(this.currentAd.isAdFactory){var n=this.currentAd.adFactory;e=n.width,t=n.height}else{var i=Zr(this.currentAd,"linearCreative","adMedia")||{};e=i.width,t=i.height}e&&t&&(this.currentAd.isAdFactory||t>e)?this.adRatio=Nn("ratio")(e,t):(e=null,t=null),this.currentAd.dimensions={width:e,height:t,ratio:this.adRatio}}},{key:"onAdLoaded",value:function(){var e=this.currentAd,t=e.isProgrammaticDisplay,n=e.isNoVideoReminder;oe(t||n)&&this.setAdDimensions(),this.emit(lt.Type.SDK.AD_PRELOAD),this.playerUI.videoElem.addEventListener("playing",this.onVideoElemPlayingBind)}},{key:"onAdStarted",value:function(){this.adStarted=!0,ra.info("trackingEvents",this.currentAd.adTrackingEvents),this.fireTrackingEvent(lt.Type.VAST.CREATIVE_VIEW),this.currentAd.isNoVideoReminder||(this.adTimeCounter.start(),this.playerUI.displayInitialControls())}},{key:"onAdStopped",value:function(){this.adStopped||(oe(this.videoCompleted)&&oe(this.currentAd.isNoVideoReminder)&&this.currentAdSubscriber.emitEvent(lt.Type.VPAID.AD_VIDEO_COMPLETE,{close:!1}),this.clearAd(),this.adStopped=!0)}},{key:"onAdSkipped",value:function(){this.fireTrackingEvent(lt.Type.VAST.SKIP),this.clearAd()}},{key:"onAdVolumeChange",value:function(){var e=this.currentAd.linearCreative.getAdVolume(),t=null;0===e&&this.lastVolume>0&&(t=lt.Type.VAST.MUTE),e>0&&0===this.lastVolume&&(t=lt.Type.VAST.UNMUTE),t&&this.fireTrackingEvent(t)}},{key:"onAdSkippableStateChange",value:function(){oe(this.adStarted)||this.skipBtnDisplayed||this.setSkipDivVisibility()}},{key:"onAdDurationChange",value:function(){this.adTimeCounter.restart(),this.currentAd.duration=this.currentAd.linearCreative.getAdDuration()}},{key:"onAdImpression",value:function(){this.adImpression||(this.fireTrackingEvent(lt.Type.VAST.IMPRESSION),this.adImpression=!0)}},{key:"onAdClickThru",value:(t=b(C().mark((function e(t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fireTrackingEvent(lt.Type.VAST.CLICK_TRACKING),this.adPausedByClick=!0,this.currentAd.linearCreative.pauseAd(),!1!==Zr(t,"playerHandles")&&(n=w(t)||h(t)?Zr(t,"url")||this.currentAd.adClickThroughUrl:t,Cn(Pt,$r)(n)),this.playerUI.exitFullscreen(),!t||!t.playing){e.next=10;break}return e.next=9,new Promise((function(e){var t=function(){return e()},n=(Gr.find((function(e){return e.hiddenProperty in document}))||{}).visibilityEvent;n?Fn(document,n,t,jr):Yr(t)}));case 9:this.onUIPlayClicked();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onAdExpandedChange",value:function(){this.currentAd.isAdFactory&&(this.currentAd.expanded=this.currentAd.linearCreative.getAdExpanded())}},{key:"onAdInteraction",value:function(){this.fireTrackingEvent(lt.Type.VAST.USER_INTERACT)}},{key:"onAdVideoStart",value:function(){this.videoStarted||(this.fireTrackingEvent(lt.Type.VAST.START),this.videoStarted=!0)}},{key:"onAdVideoFirstQuartile",value:function(){this.firstQuartileFired||(this.onAdVideoStart(),this.fireTrackingEvent(lt.Type.VAST.FIRST_QUARTILE),this.firstQuartileFired=!0)}},{key:"onAdVideoMidpoint",value:function(){this.midpointFired||(this.onAdVideoFirstQuartile(),this.fireTrackingEvent(lt.Type.VAST.MIDPOINT),this.midpointFired=!0)}},{key:"onAdVideoThirdQuartile",value:function(){this.thridQuartileFired||(this.onAdVideoMidpoint(),this.fireTrackingEvent(lt.Type.VAST.THIRD_QUARTILE),this.thridQuartileFired=!0)}},{key:"onAdVideoComplete",value:function(e){var t=this;this.videoCompleted||(clearTimeout(this.emitVideoCompleteTimeout),this.adTimeCounter.pause(),this.currentAdSubscriber.unsubscribe(lt.Type.VPAID.AD_PAUSED),this.onAdVideoThirdQuartile(),this.fireTrackingEvent(lt.Type.VAST.COMPLETE),this.playerUI.exitFullscreen(),this.videoCompleted=!0,!1!==Zr(e,"close")&&(this.emitAdStoppedTimeout=setTimeout((function(){t.currentAdSubscriber.emitEvent(lt.Type.VPAID.AD_STOPPED)}),1e3)))}},{key:"onAdPaused",value:function(){this.fireTrackingEvent(lt.Type.VAST.PAUSE),this.adPausedByClick&&this.playerUI.displayPlayControl(),this.adTimeCounter.pause()}},{key:"onAdPlaying",value:function(){this.fireTrackingEvent(lt.Type.VAST.RESUME),this.playerUI.hidePlayControl(),this.adPausedByClick=null,this.adTimeCounter.resume()}},{key:"onAdError",value:function(){this.fireTrackingEvent(lt.Type.VAST.ERROR),this.hasActuallyStarted()&&(this.playerUI.exitFullscreen(),this.clearAd())}},{key:"onAdLog",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ra.info.apply(ra,t.concat([this]))}},{key:"updateOptions",value:function(e){oe(Object.keys(e||{}).length)||(e.ratio&&(this.adRatio=e.ratio),this.playerUI.updateVideoPlayer(e),this.emit(lt.Type.SDK.UPDATE_OPTIONS,e))}},{key:"skipAd",value:function(){var e,t=this;null!==(e=this.currentAd)&&void 0!==e&&e.linearCreative&&(this.emitAdSkippedTimeout=setTimeout((function(){t.currentAdSubscriber.emitEvent(lt.Type.VPAID.AD_SKIPPED)}),1e3),this.playerUI.exitFullscreen(),this.currentAd.linearCreative.skipAd())}},{key:"clearAd",value:function(){var e,t,n;null===(e=this.adTimeCounter)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e),clearTimeout(this.emitAdStoppedTimeout),clearTimeout(this.emitAdSkippedTimeout),clearTimeout(this.emitVideoCompleteTimeout),this.playerUI.hideControls(),this.playerUI.hideMediaLayer(),this.playerUI.resetVideoSource(),this.playerUI.videoElem.removeEventListener("playing",this.onVideoElemPlayingBind),null===(n=this.currentAdSubscriber)||void 0===n||n.unsubscribeAll()}},{key:"destroy",value:function(){this.vastManager.stopExecution(),this.clearAd(),this.currentAd=null,this.playerUI.destroy()}}]),i}(on),oa=function(e){var t=e.$adContainer,n=e.macroValues,i=void 0===n?{}:n,r=hi.playerUIFactory({$adContainer:t}),a=Fr.vastManagerFactory({slot:r.mediaLayerElem,macroValues:i});return new aa({playerUI:r,vastManager:a,macroValues:i})},sa={AD_CONTAINER:"\n    .".concat(Y,"-ad-container {\n      position: absolute;\n      visibility: hidden;\n    }")},ca={STARTED:"ReminderStarted",CLICK:"ReminderClick",ENDED:"ReminderEnded",ERROR:"ReminderError",SKIPPED:"ReminderSkipped"},ua={VIDEO_REMINDER:2e4,NO_VIDEO_REMINDER:3e4},la={RESTART:"RESTART",CLOSE:"CLOSE"},da=1,ha=2,fa=3,va=4,pa=5,ma=6,Aa=7,ya=8,ga=9,ba="initialPosition",Ea="mainPosition",ka="avaPosition",Ta="expandedPosition",Ia="styles";function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var wa=function(e){en(n,e);var t=Ca(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"hasNativeSupport",value:function(){return oe(w(window.ResizeObserver))}},{key:"getElementDimensions",value:function(){return ze(this.getTarget())}},{key:"createInterval",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return setInterval((function(){return e(t.getElementDimensions())}),n)}},{key:"createObserver",value:function(e){var t=this,n=this.getTarget(),i=new ResizeObserver((function(n){var i,r,a,o=null!==(i=null!==(r=null===(a=n[0])||void 0===a?void 0:a.contentRect)&&void 0!==r?r:t.getElementDimensions())&&void 0!==i?i:{},s=o.width,c=o.height;e({width:s,height:c})}));return i.observe(n),i}}],[{key:"createObservable",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zn(n,t)}}]),n}(Gn),Ra="always",Sa="empty",Da="fixed",Pa="ava",Ma="AlternativeMounted",xa="AlternativeContentLoaded",Oa="AlternativeEnded",La="AlternativeError",Va={publisher:"publisherId"},Na={FIXED:{NO_IFRAME:{MAIN:{display:"block",overflow:"hidden",position:"relative",top:"50%",transform:"translateY(-50%)","margin-left":"auto","margin-right":"auto","text-align":"center"},CONTAINER_ADAPTS:{top:"unset",transform:"unset"}},IN_IFRAME:{MAIN:{display:"block",overflow:"hidden",position:"relative",top:"50%","margin-left":"50%",transform:"translate(-50%, -50%)"},CONTAINER_ADAPTS:{top:"unset",transform:"translateX(-50%)"}},CONTENT_LOADED:{"max-height":"100%"}},AVA:{display:"block",overflow:"hidden",position:"fixed","z-index":"99999"},IFRAME:{display:"block",position:"absolute",top:"0px",left:"0px",height:"100%",border:"0px"},CLOSE:{display:"none",position:"absolute",top:"10px",right:"10px",width:"26px",height:"26px","background-image":"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAANf8AYAAAAkFBMVEUAAAAAAAD+/v4rKyv8/Pz39/f8/Pz39/eLi4vR0dH+/v7V1dWKioqFhYV/f3/////Nzc0AAAD+/v78/Pz9/f3u7u7s7Ozr6+vp6ekSEhL+/v7w8PB0dHT39/fS0tKnp6f19fXu7u7z8/Pv7+/MzMzJyckAAADy8vLi4uL4+Pjv7+8AAADZ2dnDw8OdnZ1fX18QcjD1AAAAMHRSTlMmEvgt7tbr2EZ7/IJFREH9eAH77fS1saynKfnAPtp/Vs+2yLl1cx/DmN66CoZtUDim/7c5AAABu0lEQVRIx+2V126DMBiFARtjhg0OEGYYCWlWx/u/XX9HbRSIw1CvWtVXCPTpyGcITejaovMihAbIUkhbfvR/5qcMorTsf+x/UzE03qb0CWMftq6S2UYkVkIo2EREyZQpWeGYKRDbzA3zTekBjbFDEv7ABKZhWK7aN4BAqSiHKhvDMG30zGuWYD9MvN67SqrYI/nwInRIy+9UOsvILReNZVomxAnbm1LmSpX9RA+8FpSS7zvtLbiLm011h7dkFRZcPiIXEKtD033zktDHCZPpS5VqVkfLAnKKKURp5Bsbzes1ByNwfJQqwewtMGhEFOUyyvn7oW3k+/4pQEs29wqM0/AFO0WVmfuOH57ZfKaC65+a0MFrbyaDgmst6RmvyJrOYrJr+kGmsTVMY+fNYfam3EsmG7GGcFM+ySB3AypfudAdKB34FBOY9+l7KfZx6o0yyLagY3cT4wcwYkdHmMyWKr2J8ZQMLdd7SCAdG0zM20nLmZqR14daPnSMSssLpmY6GeVwYjfLmZI54siqkGoaRRg1tZpptp265SxtCjXzXtegoobq+uO3/Rv/CPOymLloYimkC00IfdG5CPEJRJcY90Ps4pAAAAAASUVORK5CYII=')","background-size":"contain","background-repeat":"no-repeat","z-index":5e4,cursor:"pointer"}};function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}function Ua(e,t){var n=Ne(Oe({content:t}),!0).children;Le(e,Array.from(n))}var _a=function(e){en(a,e);var t,n,i,r=Fa(a);function a(e){var t;E(this,a),(t=r.call(this)).api=e.api,t.config=e.config,t.instanceIndex=e.instanceIndex,t.availablePositions=e.availablePositions,t.wind=e.wind,t.macroValues=e.macroValues,t.device=e.device,t.playedAdCount=e.playedAdCount;var n=t.availablePositions,i=n.mainPosition,o=n.avaPosition;return t.position=o?{$container:o.$container,getStyles:o.getPositionStyles,closeButton:Na.CLOSE,containerAdpatsToContent:!1,isAva:!0}:{$container:i.$container,getStyles:i.getPositionStyles,closeButton:i.closeButton?A(A({},Na.CLOSE),i.closeButton):null,containerAdpatsToContent:Boolean(i.containerAdpatsToContent),isMain:!0},t.alternativeConfig=t.config.alternative,t.$alternative=null,t.$iframe=null,t.$close=null,t.onIframeLoaded=t.onIframeLoaded.bind(Jt(t)),t.closeAlternative=t.closeAlternative.bind(Jt(t)),t.getIframeDimensions=t.getIframeDimensions.bind(Jt(t)),t}return T(a,[{key:"replaceContentMacros",value:function(e){var t=this;return Ee((function(e){return ve({str:e,values:t.macroValues})}),(function(e){return ve({str:e,values:t.config,macros:Va})}))(e)}},{key:"init",value:function(){try{if(oe(a.hasAlternativeToDisplay(this.config,this.playedAdCount)))throw new Error("It has no alternative to display");this.build()}catch(e){this.emit(La,e)}}},{key:"build",value:function(){this.$alternative=this.createAlternativeElement(),Le(this.position.$container,this.$alternative),this.emit(Ma,this.position),this.alternativeConfig.iframe?this.loadAlternativeInFrame():this.loadAlternative()}},{key:"createAlternativeElement",value:function(){if(this.position.closeButton){var e={name:"close",style:this.position.closeButton,events:{click:this.closeAlternative}};this.$close=Oe(e)}return Oe({name:"alternative",id:this.api,style:this.getAlternativeStyles(),attributes:{data:{it:this.config.it,index:this.instanceIndex,device:this.device}},children:this.$close})}},{key:"getAlternativeStyles",value:function(){var e,t=this.position,n=t.getStyles,i=t.isAva,r=t.containerAdpatsToContent,a=this.alternativeConfig,o=a.position,s=a.margin,c=a.bottom,u=a.iframe;if(l(n))return n();var d=u?"IN_IFRAME":"NO_IFRAME";return i?A(A({},Na.AVA),{},(p(e={},o,s),p(e,"bottom",c),e)):A(A({},Na.FIXED[d].MAIN),r&&Na.FIXED[d].CONTAINER_ADAPTS)}},{key:"loadAlternative",value:function(){var e=this,t=this.replaceContentMacros(this.alternativeConfig.content);Ua(this.$alternative,t),this.alternativeResizeSubscription=wa.createObservable(this.$alternative).subscribe((function(t){null!=t&&t.height&&(e.alternativeResizeSubscription.unsubscribe(),e.onContentLoaded(t))}))}},{key:"loadAlternativeInFrame",value:(i=b(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="\n      <script>var inDapIF = true;<\/script>\n      ".concat(this.replaceContentMacros(this.alternativeConfig.content),"\n    "),this.$iframe=Oe({type:"iframe",style:Na.IFRAME,attributes:{scrolling:"no"}}),Le(this.$alternative,this.$iframe),e.next=5,this.loadIFrame(t);case 5:this.onIframeLoaded();case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"loadIFrame",value:(n=b(C().mark((function e(t){var n,i,r=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return new Promise((function(t){Fn(r.$iframe,"load",(function(){return t()}));var n=(r.$iframe.contentDocument||r.$iframe.contentWindow.document).open();e&&n.write("<body>".concat(e,"</body>")),n.close()}))},e.prev=1,e.next=4,Dt(n(),1e3);case 4:Ua(null==(i=this.$iframe.contentDocument||this.$iframe.contentWindow.document)?void 0:i.body,t),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,n(t);case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return n.apply(this,arguments)})},{key:"onIframeLoaded",value:(t=b(C().mark((function e(){var t,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,We(null==(t=this.$iframe.contentDocument||this.$iframe.contentWindow.document)?void 0:t.body,{margin:0}),e.next=5,ji(this.getIframeDimensions,{attempts:121});case 5:n=e.sent,this.onContentLoaded(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),L.info("Failed to get alternative iframe dimensions");case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"getIframeDimensions",value:function(){var e=this;return new Promise((function(t,n){var i,r=De(i=e.$iframe)&&"IFRAME"===i.nodeName?{height:i.contentWindow.document.body.scrollHeight,width:i.contentWindow.document.body.scrollWidth}:null,a=r.width,o=r.height;oe(a)||oe(o)?n():t({width:a,height:o})}))}},{key:"onContentLoaded",value:function(e){var t=e.width,n=e.height;We(this.$alternative,A({width:t,height:n},this.position.isMain&&Na.FIXED.CONTENT_LOADED)),this.alternativeConfig.iframe&&We(this.$iframe,{width:"100%"}),this.$close&&We(this.$close,{display:"block"}),this.emit(xa,this.position)}},{key:"closeAlternative",value:function(){Ve(this.$alternative),this.emit(Oa,{userInteraction:!0})}}],[{key:"hasAlternativeToDisplay",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Boolean(null===(e=t.alternative)||void 0===e?void 0:e.content)&&(t.alternative.schedule===Ra||t.alternative.schedule===Sa&&0===n)}},{key:"isDisplayAva",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==t||null===(e=t.alternative)||void 0===e?void 0:e.display)===Pa}}]),a}(on);const Ba={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _a(e)},hasAlternativeToDisplay:_a.hasAlternativeToDisplay,isDisplayAva:_a.isDisplayAva};function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var za=function(e){en(n,e);var t=Wa(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"hasNativeSupport",value:function(){return!0}},{key:"createObserver",value:function(e){var t=this.getTarget(),n=new IntersectionObserver((function(t){var n=yr(t),i=n[0];n.slice(1);e(i)}),{threshold:[0,1]});return n.observe(t),n}}],[{key:"createObservable",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zn(n,t)}}]),n}(Gn);function Ga(e){var t=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Object.create(e.methods||null);return y(r,e.props),e.hooks.length&&(r.hooks=(r.hooks||[]).concat(e.hooks)),(e.init||[]).forEach((function(e){e.call.apply(e,[r].concat(n))})),r}}(e);return t.compose=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ja.apply(this,t)},y(t.compose,e),t}function Ha(e,t){var n,i=l(n=t)&&l(n.compose)?t.compose:t;return oe(function(e){return h(e)||l(e)}(i))||(e.props=v(e.props,i.props),e.methods=y(e.methods||{},i.methods),e.init=(e.init||[]).concat(i.init||[]),e.hooks=(e.hooks||[]).concat(i.hooks||[])),e}function ja(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d(this)&&t.unshift(this);var i=t.reduce(Ha,{});return Ga(i)}const Ya=ja;var Za=Ya({init:function(){this.emitter=Object.create(new on)},methods:{emit:function(e,t){this.emitter.emit(e,t)}}}),Ka="\n  .".concat(Y,"-companion-container .").concat(Y,"-controls.").concat(Y,"-companion-close {\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDUgNzkuMTY0NTkwLCAyMDIwLzEyLzA5LTExOjU3OjQ0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDhUMDk6Mjc6MDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTA4VDEyOjI2OjMyKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTA4VDEyOjI2OjMyKzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMSIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRvdCBHYWluIDE1JSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0OGMyMTEwZS1iYzQ2LTRhNzAtOWVkMy0zN2NjYTJhZDU3MTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NWJiY2M0YjQtMjY1Zi00YzgyLWJiNWMtZjljNzEzNjRlNDZiIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NWJiY2M0YjQtMjY1Zi00YzgyLWJiNWMtZjljNzEzNjRlNDZiIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1YmJjYzRiNC0yNjVmLTRjODItYmI1Yy1mOWM3MTM2NGU0NmIiIHN0RXZ0OndoZW49IjIwMjEtMDItMDhUMDk6Mjc6MDcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4xIChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0OGMyMTEwZS1iYzQ2LTRhNzAtOWVkMy0zN2NjYTJhZDU3MTAiIHN0RXZ0OndoZW49IjIwMjEtMDItMDhUMTI6MjY6MzIrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4xIChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv9bcmgAAACdSURBVDiN7ZNLEoMgEERfUzmZ4KUjHE06C81GUPPZpFLOcmoezXSDzPsVPmAu6Cvotm0kZ0Yt6QkDwXfQoZKVmGxgBRukfz0likWggieitgMNVDBBickVnBnVnttRKswEJeRCFNRXIBAzXhdxZ2THcrlQlSj21oVdyJkokEZK5++o7S1JgTEg53PLB2eGFQmAFJ+RHSmd14+/8n+EHjIPOOda016cAAAAAElFTkSuQmCC');\n    background-repeat: no-repeat;\n    background-size: contain;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: none;\n    float: none;\n    position: absolute;\n    z-index: 12;\n  }\n"),Xa={REMINDER:"\n    .".concat(Y,"-companion-container {\n      display: none;\n      margin: 0;\n    }\n\n    .").concat(Y,"-companion-container.").concat(Y,"-main {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background-color: #ffffff;\n    }\n    .").concat(Y,"-companion-container.").concat(Y,"-overlap {\n      position: absolute;\n      visibility: visible;\n    }\n    .").concat(Y,"-companion-container.").concat(Y,"-ava {\n      overflow: hidden;\n      position: fixed;\n    }\n    .").concat(Y,"-companion-container[data-type='Main'] {\n      z-index: 99999;\n    }\n    .").concat(Y,"-companion-container[data-type='Remember'] {\n      z-index: 99998;\n    }\n    \n    ").concat(Ka,"\n\n    .").concat(Y,"-companion-container .").concat(Y,"-resource-container {\n      width: 100%;\n      height: 100%;\n    }\n    .").concat(Y,"-companion-container .").concat(Y,"-resource-container iframe {\n        border: none;\n    }\n    .").concat(Y,"-companion-container .").concat(Y,"-companion-click-layer {\n        background: transparent;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 10;\n        cursor: pointer;\n    }\n    .").concat(Y,"-companion-container .").concat(Y,"-controls.").concat(Y,"-companion-close {\n      right: 5px;\n      top: 5px;\n    }\n  "),CLOSE:{WIDTH:25,HEIGHT:25}};function Qa(e){return Ya({init:function(e){this.companion=e.companion,this.container=e.$container,this.getPositionStyles=e.getPositionStyles,this.options=e.options,this.device=e.device,this.ava=e.ava,this.it=e.it,this.maxDimensions=e.maxDimensions,this.onClickThrough=this.onClickThrough.bind(this),this.onSkip=this.onSkip.bind(this),this.dimensions=this.getDimensions()},methods:{start:function(){var e=this;if(!this.dimensions)return L.error("Reminder missing dimensions"),void this.emit(ca.ERROR);this.createReminderElements(),Ue("reminder-styles",Xa.REMINDER),this.appendReminderElements(),this.companion.loadAd(this.$resourceContainer).then((function(){e.displayCloseButton(),e.companion.trackingEvents.fire(lt.Type.VAST.CREATIVE_VIEW),e.emit(ca.STARTED)})).catch((function(t){L.error("Starting reminder",t),e.destroy(),e.emit(ca.ERROR)}))},createReminderElements:function(){var e=this.dimensions,t=this.it,n=this.device,i=this.companion,r={name:"companion-container",style:e,attributes:{class:this.getContainerClass(),data:{it:t,device:n,type:i.id}}};this.$companionContainer=Oe(r);var a={events:{click:this.onClickThrough}},o=A({name:"resource-container",attributes:{alt:i.altText||""}},a);this.$resourceContainer=Oe(o);var s={name:"companion-close",style:{width:"".concat(Xa.CLOSE.WIDTH,"px"),height:"".concat(Xa.CLOSE.HEIGHT,"px")},attributes:{class:"sm-controls"},events:{click:this.onSkip}};if(this.$close=Oe(s),i.clickThroughUrl){var c=A({name:"companion-click-layer"},a);this.$clickLayer=Oe(c)}},onClickThrough:function(){$r(this.companion.clickThroughUrl),this.companion.trackingEvents.fire(lt.Type.VAST.CLICK_TRACKING),this.emit(ca.CLICK)},onSkip:function(){this.emit(ca.SKIPPED)},displayCloseButton:function(){var e=this;return b(C().mark((function t(){var n,i,r,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(null===(n=e.options)||void 0===n||null===(i=n.reminder)||void 0===i?void 0:i.displayCloseBtnTime)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Un(null===(r=e.options)||void 0===r||null===(a=r.reminder)||void 0===a?void 0:a.displayCloseBtnTime);case 4:We(e.$close,{display:"block"});case 5:case"end":return t.stop()}}),t)})))()},appendReminderElements:function(){var e=this.container,t=this.$close,n=this.$clickLayer,i=this.$resourceContainer,r=this.$companionContainer,a=[i,t];n&&a.push(n),Le(r,a),Le(e,r)},destroy:function(){Ve(this.$companionContainer)},show:function(){We(this.$companionContainer,{display:"block"})},hide:function(){We(this.$companionContainer,{display:"none"})}}}).compose(e,Za)}function qa(e){var t=e.dimensions,n=void 0===t?{}:t,i=e.maxWidth,r=e.maxHeight,a=n.width,o=n.height,s=n.ratio;if(oe(s))return A({},n);var c={width:a,height:o};return at(i)&&a>i&&(c.width=i,c.height=Nn("height")(i,s)),at(r)&&o>r&&(c.width=Nn("width")(r,s),c.height=r),A(A({},c),{},{ratio:s})}function Ja(e,t){var n=t.maxWidth,i=t.maxHeight,r=A({},e);oe(r.width&&r.height)&&(r.width=n,r.height=Nn("height")(n,r.ratio));var a=qa({dimensions:r,maxWidth:n,maxHeight:i});return{width:Bn(a.width,2),height:Bn(a.height,2),ratio:a.ratio}}var $a=Qa({methods:{getDimensions:function(){var e,t,n,i=this.companion,r=i.width,a=i.height,o=ze(this.container),s=o.width,c=o.height;if(oe(at(r)&&at(a))){var u=this.options.reminder.mainRatio;n={ratio:u,width:s,height:Nn("height")(s,u)}}else n={width:r,height:a,ratio:Nn("ratio")(r,a)};var l=Ja(n,{maxWidth:Math.min(s,(null===(e=this.maxDimensions)||void 0===e?void 0:e.width)||1/0),maxHeight:Math.min(c,(null===(t=this.maxDimensions)||void 0===t?void 0:t.height)||1/0)});return{width:l.width,height:l.height}},getContainerClass:function(){return"".concat(Y,"-main")}}}),eo={"200x200":{reduceAvaWidth:{mobile:.66,desktop:!1}},"300x100":{reduceAvaWidth:{mobile:!0,desktop:!1}},"300x250":{reduceAvaWidth:{mobile:.66,desktop:!1}},"300x600":{reduceAvaWidth:{mobile:.5,desktop:!0}},"320x50":{reduceAvaWidth:{mobile:!0,desktop:!1}},"320x100":{reduceAvaWidth:{mobile:!0,desktop:!1}},"320x480":{reduceAvaWidth:{mobile:.66,desktop:!0}},"450x563":{reduceAvaWidth:{mobile:.66,desktop:!0}},"450x800":{reduceAvaWidth:{mobile:.5,desktop:!0}},"640x360":{reduceAvaWidth:{mobile:.66,desktop:!1}},"728x90":{},"800x600":{reduceAvaWidth:{mobile:.66,desktop:!1}},"970x250":{reduceAvaWidth:{mobile:!0,desktop:!1}},"980x90":{}};function to(e,t){var n,i=t.maxWidth,r=t.defaultRatio,a=t.forceSize,o=t.device,s=A({},e),c=eo["".concat(s.width,"x").concat(s.height)];if(oe(c)||a)return oe(s.width&&s.height)&&(s.width=i,s.height=Nn("height")(i,s.ratio)),qa({dimensions:s,maxWidth:i,maxHeight:Nn("height")(i,r)});var u=null==c||null===(n=c.reduceAvaWidth)||void 0===n?void 0:n[o];if(u){var l=pe(u)?i*u:.5*s.width;s.width=Bn(l),s.height=Nn("height")(s.width,s.ratio)}return qa({dimensions:s,maxWidth:i})}var no={WIDTH:250,HEIGHT:300},io=Qa({init:function(e){this.ava=e.ava},methods:{getDimensions:function(){var e,t,n,i=this.companion,r=i.width,a=i.height,o=this.ava,s=o.maxWidth,c=o.forceSize,u=this.options.ratio;if(oe(at(r)&&at(a)))if("Main"===this.companion.id){var l=this.options.reminder.mainRatio;r=s,a=Nn("height")(s,l)}else r=no.WIDTH,a=no.HEIGHT;var d=qa({dimensions:to({width:r,height:a,ratio:Nn("ratio")(r,a)},{maxWidth:s,forceSize:c,defaultRatio:u,device:this.device}),maxWidth:(null===(e=this.maxDimensions)||void 0===e?void 0:e.width)||1/0,maxHeight:(null===(t=this.maxDimensions)||void 0===t?void 0:t.height)||1/0}),h=this.ava,f=h.bottom,v=h.position,m=h.margin,A=Ie(v.split("_"),2),y=A[0],g=A[1];return p(n={width:d.width,height:d.height},y,f),p(n,g,m),n},getContainerClass:function(){return"".concat(Y,"-ava")}}}),ro=Qa({methods:{getDimensions:function(){var e=this.companion,t=e.width,n=e.height,i=e.isRemember,r=Nn("ratio")(t,n),a=this.options.reminder.mainRatio,o=this.maxDimensions;return i&&o?A(A({},o),qa({dimensions:{width:t,height:n,ratio:r},maxWidth:o.width,maxHeight:o.height})):this.getPositionStyles({width:t,height:n,ratio:r||a})},getContainerClass:function(){return"".concat(Y,"-overlap")}}});function ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var oo=function(e){en(n,e);var t=ao(n);function n(e){var i,r,a;E(this,n),(a=t.call(this)).kwargs=e;var o=a.kwargs;return a.ava=o.ava,a.companionAds=o.companionAds,a.availablePositions=o.availablePositions,a.mainCompanion=null===(i=a.companionAds)||void 0===i?void 0:i.find((function(e){return e.isEndcard&&!e.isRemember})),a.rememberCompanion=null===(r=a.companionAds)||void 0===r?void 0:r.find((function(e){return e.isEndcard&&e.isRemember})),a.main=null,a.remember=null,a.eventLog={},a.viewportPosSubscription=null,a.eventSubscriberFactory=xn(Jt(a)),a.start=a.start.bind(Jt(a)),a.toggleAvaReminder=a.toggleAvaReminder.bind(Jt(a)),a.durationTimeout=null,a.duration=e.isNoVideoReminder?ua.NO_VIDEO_REMINDER:ua.VIDEO_REMINDER,a}return T(n,[{key:"init",value:function(){try{if(!this.mainCompanion&&!this.rememberCompanion)throw new Error("No reminders found");this.build(),this.start()}catch(e){this.emit(ca.ERROR,e)}}},{key:"build",value:function(){var e=this.availablePositions||{},t=e.mainPosition,n=e.avaPosition,i=e.overlapPosition;if(oe(t||n||i))this.emit(ca.ERROR);else{if(this.mainCompanion){var r=A(A({},this.kwargs),{},{companion:this.mainCompanion});n&&oe(t||i)?this.main=io(A(A({},r),n)):t?this.main=$a(A(A({},r),t)):i&&(this.main=ro(A(A({},r),i))),this.subscribeToMainEvents()}if(this.rememberCompanion){var a=oe((t||i)&&n)&&this.main?this.main.dimensions:void 0,o=A(A({},this.kwargs),{},{companion:this.rememberCompanion,maxDimensions:a});n?this.remember=io(A(A({},o),n)):t?this.remember=$a(A(A({},o),t)):i&&(this.remember=ro(A(A({},o),i))),this.subscribeToRememberEvents()}}}},{key:"start",value:function(){var e,t;null===(e=this.main)||void 0===e||e.start(),null===(t=this.remember)||void 0===t||t.start()}},{key:"subscribeToMainEvents",value:function(){var e,t=this,n=this.eventSubscriberFactory(this.main.emitter);n.subscribeOnce((p(e={},ca.STARTED,this.onMainStarted),p(e,ca.SKIPPED,this.onSkipped),p(e,ca.ERROR,this.onMainError),e)),n.subscribe(p({},ca.CLICK,(function(){return t.emit(ca.CLICK)})))}},{key:"subscribeToRememberEvents",value:function(){var e,t=this,n=this.eventSubscriberFactory(this.remember.emitter);n.subscribeOnce((p(e={},ca.STARTED,this.onRememberStarted),p(e,ca.SKIPPED,this.onSkipped),p(e,ca.ERROR,this.onRememberError),e)),n.subscribe(p({},ca.CLICK,(function(){return t.emit(ca.CLICK)})))}},{key:"onMainStarted",value:function(){this.setDurationTime(),this.emitEventOnce(ca.STARTED),this.main.show()}},{key:"onMainError",value:function(){delete this.main,this.remember||this.emit(ca.ERROR),clearTimeout(this.durationTimeout)}},{key:"onRememberStarted",value:function(){this.setDurationTime(),this.emitEventOnce(ca.STARTED);var e=this.availablePositions,t=e.avaPosition,n=e.mainPosition,i=e.overlapPosition;t&&(n||i)&&this.main?this.viewportPosSubscription=za.createObservable((null==n?void 0:n.$container)||(null==i?void 0:i.$container)).subscribe(this.toggleAvaReminder):this.remember.show()}},{key:"toggleAvaReminder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intersectionRatio;1===t?this.remember.hide():this.remember.show()}},{key:"onRememberError",value:function(){delete this.remember,this.main||this.emit(ca.ERROR),clearTimeout(this.durationTimeout)}},{key:"onSkipped",value:function(){this.destroyReminders(),clearTimeout(this.durationTimeout),this.emitEventOnce(ca.SKIPPED)}},{key:"setDurationTime",value:function(){var e=this;this.durationTimeout||(this.durationTimeout=setTimeout((function(){return e.stopReminders()}),this.duration))}},{key:"stopReminders",value:function(){this.destroyReminders(),clearTimeout(this.durationTimeout),this.emitEventOnce(ca.ENDED)}},{key:"destroyReminders",value:function(){var e,t,n;null===(e=this.main)||void 0===e||e.destroy(),delete this.main,null===(t=this.remember)||void 0===t||t.destroy(),null===(n=this.viewportPosSubscription)||void 0===n||n.unsubscribe(),delete this.remember}},{key:"emitEventOnce",value:function(e){this.eventLog[e]||(this.eventLog[e]=!0,this.emit(e))}}]),n}(on);var so={createController:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new oo(e)}},co=function(){function e(t,n){E(this,e),this.api=t.api,this.macroValues=t.macroValues,this.integrationScript=t.integrationScript,this.instanceIndex=t.instanceIndex,this.config=t.config,this.appTrackingEvents=t.appTrackingEvents,this.hooksManager=new vn(this),this.plugin=n()(this),this.freezedOriginalConfig=null,this.state=da,this.wind=window,this.device=ln.device,this.adPosition=null,this.displayRestart=this.config.options.restart,this.adControllerInstance=null,this.adCtrlSubscriber=null,this.eventSubscriberFactory=xn(this),this.movingTimeout=null,this.$adContainer=null,this.adContainerCurrentStyles=null,this.sunmediaRequestCount=0,this.clientRequestCount=0,this.sunmediaAdCount=0,this.clientAdCount=0,this.playedAdCount=0,this.adEnded=!1,this.loopIntents=1,this.start=this.start.bind(this),this.restart=this.restart.bind(this),this.windowHeight=je(),this.useScreenWidth=ln.isMobile()}var t,n,i,r,a,o;return T(e,[{key:"setUseScreenWidth",value:function(e){this.useScreenWidth=e}},{key:"updateMacroValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.macroValues=A(A({},this.macroValues),e)}},{key:"setDefaultDimensionMacroValues",value:function(){var e,t=(null===(e=ze(this.$adContainer))||void 0===e?void 0:e.width)||Math.min(He(),640),n=Nn("height")(t,this.config.options.ratio);this.macroValues=A({width:Bn(t),height:Bn(n)},this.macroValues)}},{key:"reset",value:function(){this.config=Ct(this.freezedOriginalConfig),this.adEnded=!1,this.adPosition=null,this.plugin.reset()}},{key:"init",value:(o=b(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.build();case 3:return e.next=5,this.manageStart();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.extra?L.info("Plugin stopped by extra"):L.error("Initializing outstream plugin",e.t0),this.close({err:e.t0});case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return o.apply(this,arguments)})},{key:"build",value:(a=b(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hooksManager.beforeBuild(),e.next=3,this.plugin.build();case 3:this.hooksManager.beforeMount(),this.mountComponent(),this.hooksManager.mounted();case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"manageStart",value:(r=b(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==ga){e.next=2;break}return e.abrupt("return");case 2:if("mobile"!==this.device||!this.config.options.touchstart){e.next=6;break}Fn(this.wind,"touchstart",this.start),e.next=8;break;case 6:return e.next=8,this.start();case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"start",value:(i=b(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.setDefaultDimensionMacroValues(),this.initAdController(),this.state=ha,this.plugin.createObservables(),this.freezedOriginalConfig=Object.freeze(Ct(this.config)),this.startAdController()}catch(e){L.error("Starting outstream plugin",e),this.close({err:e})}case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"restart",value:(n=b(C().mark((function e(){var t,n=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]&&n[0];try{this.wind.removeEventListener("scroll",this.restart,!0),this.loopIntents+=1,this.appTrackingEvents.setLoop(this.loopIntents),this.mountAdContainer(),this.initAdController(),this.state=ha,this.startAdController(t)}catch(e){L.error("Start outstream plugin",e),this.close({err:e})}case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"mountComponent",value:function(){var e=this.config,t=e.it,n=e.options;Cn(n.css,(function(){return Ue("styles-".concat(t),"".concat(n.css))}))(),Ue(Ia,sa.AD_CONTAINER),this.plugin.mount(),this.mountAdContainer()}},{key:"mountAdContainer",value:function(){this.$adContainer=this.createAdContainer(),this.insertAdContainer(),this.plugin.adContainerMounted()}},{key:"unmountAdContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=oe(le(this.$adContainer));if(t){var n=this.$adContainer;this.$adContainer=null,this.adContainerCurrentStyles=null;var i={height:0,margin:0,visibility:"hidden"};We(n,i),this.plugin.adContainerUnmounted();var r=e?0:this.config.options.removeMs;Un(r).then((function(){Ve(n),n=null}))}}},{key:"createAdContainer",value:function(){return Oe({name:"ad-container",id:"".concat(this.api,"-").concat(this.loopIntents),attributes:{data:{it:this.config.it,index:this.instanceIndex,device:this.device}}})}},{key:"insertAdContainer",value:function(){Le(this.plugin.getAdContainerParent(),this.$adContainer),this.plugin.updateAdPosition(ba)}},{key:"moveAdContainer",value:function(e){var t=this;clearTimeout(this.movingTimeout),_e(this.$adContainer,"add","sm-moving");try{e()}catch(e){L.warning(e)}this.movingTimeout=setTimeout((function(){_e(t.$adContainer,"remove","sm-moving")}),200)}},{key:"batchMoveAdChanges",value:function(e,t){var n,i;(n=this.adContainerCurrentStyles,i=e,h(n)&&h(i)&&wn(n,i)&&wn(i,n))||(this.moveAdContainer(t),this.adContainerCurrentStyles=e)}},{key:"disableAva",value:function(){this.config.ava.enabled=!1,this.config.ava.forceStart=!1}},{key:"restoreAva",value:function(){this.config.ava=Ct(this.freezedOriginalConfig.ava)}},{key:"stopLoop",value:function(){this.loopIntents=this.config.loop.times}},{key:"itShouldLoop",value:function(e){var t=this.config.loop,n=t.enabled,i=t.times,r=t.onlyOneVideo;return n&&(0===i||this.loopIntents<i)&&oe(e&&r)}},{key:"initAdController",value:function(){this.adControllerInstance=oa({$adContainer:this.$adContainer,macroValues:this.macroValues}),this.subscribeToAdControllerEvents()}},{key:"startAdController",value:(t=b(C().mark((function e(t){var n,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.config.adTags,i=t?n.filter((function(e){return e.isSunmedia})):n,e.next=4,this.adControllerInstance.start(i,this.config.options);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"subscribeToAdControllerEvents",value:function(){var e,t;null===(e=this.adCtrlSubscriber)||void 0===e||e.unsubscribeAll(),this.adCtrlSubscriber=this.eventSubscriberFactory(this.adControllerInstance,{emitHooks:!0});var n=(p(t={},lt.Type.SDK.REQUEST,this.onAdRequest),p(t,lt.Type.SDK.REQUEST_ERROR,Tt),p(t,lt.Type.SDK.NO_MORE_TAGS,this.onSDKNoMoreTags),p(t,lt.Type.SDK.UPDATE_OPTIONS,this.onSDKUpdateOptions),p(t,lt.Type.SDK.AD_PRELOAD,this.onAdPreload),p(t,lt.Type.SDK.RESIZE_PROGRAMMATIC_DISPLAY,this.onResizeProgrammaticDisplay),p(t,lt.Type.VPAID.AD_LOADED,this.onAdLoaded),p(t,lt.Type.VPAID.AD_STARTED,this.onAdStarted),p(t,lt.Type.VPAID.AD_PAUSED,this.onAdPaused),p(t,lt.Type.VPAID.AD_PLAYING,this.onAdPlaying),p(t,lt.Type.VPAID.AD_CLICK_THRU,Tt),p(t,lt.Type.VPAID.AD_IMPRESSION,this.onAdImpression),p(t,lt.Type.VPAID.AD_VIDEO_START,Tt),p(t,lt.Type.VPAID.AD_VIDEO_FIRST_QUARTILE,Tt),p(t,lt.Type.VPAID.AD_VIDEO_MIDPOINT,Tt),p(t,lt.Type.VPAID.AD_VIDEO_THIRD_QUARTILE,Tt),p(t,lt.Type.VPAID.AD_VIDEO_COMPLETE,this.onAdVideoComplete),p(t,lt.Type.VPAID.AD_SKIPPED,this.onAdSkipped),p(t,lt.Type.VPAID.AD_STOPPED,this.onAdStopped),p(t,lt.Type.VPAID.AD_ERROR,this.onAdError),p(t,lt.Type.VPAID.AD_EXPANDED_CHANGE,this.onAdExpandedChange),t);this.adCtrlSubscriber.subscribe(n);var i=p({},lt.Type.SDK.MAX_REQUESTS_REACHED,this.onSMMaxRequestsReached);this.adCtrlSubscriber.subscribeOnce(i)}},{key:"onAdRequest",value:function(e){le(null==e?void 0:e.isSunmedia)||(e.isSunmedia?this.sunmediaRequestCount+=1:this.clientRequestCount+=1)}},{key:"onSMMaxRequestsReached",value:function(){this.stopLoop(),this.displayRestart=!1,this.endAd()}},{key:"onSDKNoMoreTags",value:function(){this.adControllerInstance.currentAd=null,this.endAd()}},{key:"onSDKUpdateOptions",value:function(e){this.plugin.updateConfigOptions(e)}},{key:"onAdPreload",value:function(){this.plugin.adPreload()}},{key:"onAdLoaded",value:function(){this.state=fa,this.adControllerInstance.currentAd.isProgrammaticDisplay?this.startAd():this.plugin.startAd()}},{key:"startAd",value:function(){this.state>=va||(this.state=va,this.adControllerInstance.startAd())}},{key:"onAdStarted",value:function(){this.state=pa,this.playedAdCount+=1,this.plugin.adStarted()}},{key:"onAdPaused",value:function(){this.state=Aa}},{key:"onAdPlaying",value:function(){this.state=ma}},{key:"onAdImpression",value:function(){this.adControllerInstance.currentAd.initialAdTag.isSunmedia?this.sunmediaAdCount+=1:this.clientAdCount+=1}},{key:"onAdVideoComplete",value:function(){this.state=ya}},{key:"onAdSkipped",value:function(){this.endAdByUserInteraction()}},{key:"endAdByUserInteraction",value:function(){this.stopLoop(),this.endAd({userInteraction:!0})}},{key:"onAdStopped",value:function(){var e,t=(this.adControllerInstance||{}).currentAd,n=null==t||null===(e=t.adCompanions)||void 0===e?void 0:e.endcardCompanions;if(null!=n&&n.length)return this.plugin.adStoppedWithReminder(),this.unsubscribeAll(),this.unmountAdContainer(t.isNoVideoReminder),void this.displayReminder(n);this.endAd()}},{key:"onAdError",value:function(){this.adControllerInstance.hasActuallyStarted()?this.endAd():(this.reset(),this.plugin.updateAdPosition(ba),this.adControllerInstance.continueLoadingAds())}},{key:"onAdExpandedChange",value:function(){this.plugin.adExpandedChange()}},{key:"onResizeProgrammaticDisplay",value:function(){this.plugin.programmaticDisplayLoaded()}},{key:"endAd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userInteraction,i=void 0!==n&&n;if(!this.adEnded){this.hooksManager.beforeEndAd({userInteraction:i}),this.adEnded=!0;var r=this.adControllerInstance||{},a=r.currentAd,o=oe(le(a));if(this.itShouldLoop(o))return this.reset(),this.unmountAdContainer(),void(!o||this.config.loop.autoStart?this.restart():this.wind.addEventListener("scroll",this.restart,!0));if(Ba.hasAlternativeToDisplay(this.config,this.playedAdCount))return this.displayRestart=!1,this.unmountAdContainer(),void this.displayAlternative(o);var s=this.displayRestart&&this.playedAdCount>0;if(s)return this.reset(),this.unmountAdContainer(),void this.plugin.displayRestart().then((function(t){switch(t.action){case la.RESTART:e.restart(!0);break;case la.CLOSE:e.displayRestart=!1,e.close({adHasBeenPlayed:!1,userInteraction:!0})}})).catch((function(t){e.close({adHasBeenPlayed:!1,err:t})}));this.close({adHasBeenPlayed:o,userInteraction:i})}}},{key:"close",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.adHasBeenPlayed,i=t.userInteraction,r=t.err;this.state!==ga&&(this.hooksManager.beforeClose({adHasBeenPlayed:n,err:r}),this.state=ga,this.unsubscribeAll(),Cn(this.adControllerInstance,(function(){e.adControllerInstance.destroy()}))(),this.unmountAdContainer(),this.removeElements(i),this.hooksManager.afterClose())}},{key:"unsubscribeAll",value:function(){this.wind.removeEventListener("touchstart",this.start,!1)}},{key:"displayReminder",value:function(e){var t,n,i=this,r=this.config,a=r.it,o=r.ava,s=r.options,c=(null===(t=this.adControllerInstance)||void 0===t?void 0:t.currentAd)||{},u=c.adTrackingEvents,l=c.isNoVideoReminder,d=this.plugin.getAvailablePositions({hasAva:o.enabled,isReminder:!0}),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userInteraction,n=e.err;Cn(n,(function(){return L.error("Creating the reminder",n)}))(),t?i.endAdByUserInteraction():i.endAd()},f=so.createController({companionAds:e,it:a,ava:o,options:s,isNoVideoReminder:l,availablePositions:d,device:this.device}),v=this.eventSubscriberFactory(f,{emitHooks:!0});v.subscribeOnce((p(n={},ca.STARTED,Tt),p(n,ca.SKIPPED,(function(){return h({userInteraction:!0})})),p(n,ca.ENDED,(function(){return h()})),p(n,ca.ERROR,(function(e){return h({err:e})})),n)),v.subscribe(p({},ca.CLICK,(function(){u.fire(lt.Type.VAST.CLICK_TRACKING)}))),f.init()}},{key:"displayAlternative",value:function(e){var t,n=this,i=Ba.isDisplayAva(this.config),r=this.plugin.getAvailablePositions({hasAva:i,isAlternative:!0}),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.userInteraction,r=t.err;Cn(r,(function(){return L.error("Creating Alternative",r)}))(),delete n.config.alternative,n.state<ga?n.close({adHasBeenPlayed:e}):n.removeElements(i)},o=Ba.create({api:this.api,wind:this.wind,config:this.config,instanceIndex:this.instanceIndex,device:this.device,macroValues:this.macroValues,playedAdCount:this.playedAdCount,availablePositions:r});this.eventSubscriberFactory(o,{emitHooks:!0}).subscribeOnce((p(t={},Ma,(function(){n.close({adHasBeenPlayed:e})})),p(t,xa,Tt),p(t,Oa,(function(){a.apply(void 0,arguments)})),p(t,La,(function(e){a({err:e})})),t)),o.init()}},{key:"removeElements",value:function(e){var t=this;this.plugin.removeElements(e),this.cleanAllElements(),this.noMoreContentAvailable()&&Un(this.config.options.removeMs).then((function(){t.hooksManager.noMoreContentAvailable()}))}},{key:"noMoreContentAvailable",value:function(){return oe(Ba.hasAlternativeToDisplay(this.config,this.playedAdCount))&&oe(this.displayRestart)&&this.plugin.hasEffectiveTrackerBeenFired()}},{key:"cleanAllElements",value:function(){try{var e=".".concat(Y,"-companion-container.").concat(Y,'-ava[data-it="').concat(this.config.it,'"]');Ve(this.wind.document.querySelector(e))}catch(e){}}}]),e}();const uo=function(e){return{create:function(t){return new co(t,e)}}};var lo="expirationTime";function ho(){return Math.floor(Date.now()/1e3)}var fo=function(e){return R(e)?window.btoa(e):e},vo=function(e){return R(e)?window.atob(e):e},po=ye((function(e,t){return localStorage.setItem(t,e)})),mo=function(e){return localStorage.getItem(e)},Ao=function(e){return localStorage.removeItem(e)};function yo(e){try{return Ee(Ao,fo)(e),!0}catch(t){return L.error("removing ".concat(e," from the cache"),t),!1}}var go={set:function(e,t,n){if(oe(e&&t&&n))return L.error("an argument is missing setting to the cache",{key:e,value:t,timeToExpire:n}),!1;try{var i=Ee(fo,JSON.stringify),r=function(e){return ho()+e}(n),a=i(A(A({},t),{},p({},lo,r)));return Ee(po(a),fo)(e),!0}catch(t){return L.error("setting ".concat(e," to cache"),t),!1}},get:function(e){try{var t=Ee(JSON.parse,vo,mo,fo)(e);return oe(t)?null:ho()>=t.expirationTime?(yo(e),null):(delete t.expirationTime,t)}catch(t){return L.error("getting ".concat(e," from cache"),t),yo(e),null}},remove:yo};const bo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ya({init:function(e){var t=e.httpClient;this.httpClient=t},methods:{transformResponse:function(e,t){return{key:e,data:t}},fetch:function(e){var t=this;return b(C().mark((function n(){var i,r;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i={},!oe(R(e))){n.next=3;break}return n.abrupt("return",i);case 3:return n.prev=3,n.next=6,t.httpClient.get(e);case 6:r=n.sent,i=r.data,n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:return n.abrupt("return",i);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))()}}});return t.compose(e)};var Eo="".concat("https://services.sunmedia.tv","/geotarget/geocity.php"),ko="geoTarget",To=bo({methods:{fetchGeolocation:function(){var e=this;return b(C().mark((function t(){var n,i,r,a,o;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!oe(o=go.get(ko))){t.next=6;break}return t.next=4,e.fetch(Eo);case 4:o=t.sent,go.set(ko,o,3600);case 6:return t.abrupt("return",e.transformResponse(ko,A(A({},o),{},{country:null===(n=o)||void 0===n||null===(i=n.city)||void 0===i?void 0:i.country,eu_country:null===(r=o)||void 0===r||null===(a=r.city)||void 0===a?void 0:a.EU})));case 7:case"end":return t.stop()}}),t)})))()}}}),Io=To({httpClient:Wt});Io.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return To(e)};const Co=Io;var wo="".concat("https://static.sunmedia.tv","/SMSdk/tracker"),Ro=function(e,t){return R(e)&&R(t)?"".concat(wo,"/").concat(e,"/").concat(t):null},So=bo({methods:{fetchDefaultTrackers:function(e,t){var n=this;return b(C().mark((function i(){var r,a;return C().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=Ro(e,t),i.next=3,n.fetch(r);case 3:return a=i.sent,i.abrupt("return",n.transformResponse("defaultTrackers",a.default_tracker));case 5:case"end":return i.stop()}}),i)})))()},fetchDefaultTags:function(e,t){var n=this;return b(C().mark((function i(){var r,a,o,s;return C().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=Ro(e,t),i.next=3,n.fetch(r);case 3:return a=i.sent,o=ln.device,s=o.toUpperCase(),i.abrupt("return",n.transformResponse("defaultTags",a[s]));case 7:case"end":return i.stop()}}),i)})))()}}}),Do=So({httpClient:Wt});Do.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return So(e)};const Po=Do;function Mo(e){var t=e.client,n=e.defaultTrackers,i=e.defaultTags,r=e.defaultTrackersPath,a=e.defaultTagsPath,o=e.options,s=[function(){return Co.fetchGeolocation()}];return oe(n)&&s.push((function(){return Po.fetchDefaultTrackers(t,r)})),oe(i||(null==o?void 0:o.ignoreDefaultTags))&&s.push((function(){return Po.fetchDefaultTags(t,a)})),s}function xo(e){if(!e.options.allowDuplicates){var t=bt.fetchInstancesOfIntegration(e.it).some((function(e){return e.wind===window}));if(t)throw new Error("Integration canceled since it is duplicated")}}var Oo=["safeframe.googlesyndication.com"],Lo=X;const Vo={hooks:{beforeInit:function(e){var t,n=window.location.href,i=e.macroValues[Lo]||n;if(t=i,Oo.some((function(e){return t.includes(e)})))throw new Error("The referrer ".concat(i," is not allowed"))}}};var No=["517","438","45","165","755"],Fo=$,Uo=J,_o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;try{if(l(n[t]))return n[t]}catch(e){return null}return n===n.top?null:e(t,n.parent)},Bo=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gdprApplies,i=t.consentString,r=t.noCmpFound,a=t.areVendorsAuthorized;return r?{noCmpFound:!0}:A((p(e={},Uo,n?H:j),p(e,Fo,i||G),e),i&&{areVendorsAuthorized:a})},Wo=function(e){Ee(Ae(2,bt.setState.bind(bt))(Z),Bo)(e)},zo=function(e,t){if(!oe(t&&e)){var n=e.gdprApplies,i=e.tcString,r=e.vendor;if(!n||!oe(Ze(i))){var a=Ze(i)&&No.every((function(e){var t;return null==r||null===(t=r.consents)||void 0===t?void 0:t[e]}));Wo({gdprApplies:n,consentString:i,areVendorsAuthorized:a})}}};const Go={hooks:{beforeCreate:function(){if(!!!bt.getState(Z)){bt.setState(Z,{});var e=_o("__tcfapi");if(e){e("addEventListener",2,zo)}else L.warning("No consent data function found"),Wo({noCmpFound:!0})}}}};var Ho=[/(https:\/\/vod\.addevweb\.com)(.*)(3CQHtX)/i,/(https:\/\/search\.spotxchange\.com\/vast\/2\.0\/270673)(.*)/i,/(https:\/\/tpc\.googlesyndication\.com\/ima3vpaid)(.*)(https%3A%2F%2Fpubads\.g\.doubleclick.net)(.*)(iu%3D%2F143394101%2Fca-video-pub-8221793852898543-tag%2FADXPEPSISONIDOON)/i];const jo={hooks:{beforeAdLoaded:function(e){if("mobile"===e.device){var t,n=((null===(t=e.adControllerInstance)||void 0===t?void 0:t.currentAd)||{}).adData,i=(void 0===n?{}:n).fromTag;Ho.some((function(e){return null!=i.match(e)}))&&(e.config.options.up=!0,e.config.ava.enabled=!0,e.config.ava.forceStart=!0,e.config.ava.position="top",e.config.ava.procterApplies=!0)}},beforeAdStarted:function(e){if(!0===e.config.ava.procterApplies){var t=e.adControllerInstance.playerUI;t.updateVideoPlayer({skip:!1}),setTimeout((function(){var n,i,r;t.isMuted&&(t.isMuted=t.onStateChange(t.isMuted,"sm-volume-off"),null==e||null===(n=e.adControllerInstance)||void 0===n||null===(i=n.currentAd)||void 0===i||null===(r=i.linearCreative)||void 0===r||r.setAdVolume(.001))}),2e3)}}}};function Yo(e){var t=Ie(e.toLowerCase(),1)[0];return function(e,n){return function(e,t,n){return function(i,r){var a=i.type,o=i.trafficType,s=i.position,c=void 0===s?r+1:s,u=Ie(o.toLowerCase(),1)[0],l=a||"".concat(e).concat(t).concat(n).concat(c);return A(A({},i),{},{pbt:u,pbid:l,isSunmedia:!0})}}(e,n,t)}}function Zo(e,t){return'\n    div.sm-ad-container[data-it="'.concat(e,'"],\n    div.sm-it-main-container[data-it="').concat(e,'"] .sm-reference,\n    div.sm-companion-container[data-it="').concat(e,"\"][data-type='Main'],\n    div.sm-companion-container[data-it=\"").concat(e,"\"][data-type='Remember'] {\n      opacity: 0;\n    }\n    div.sm-ad-container[data-it=\"").concat(e,'"],\n    div.sm-companion-container[data-it="').concat(e,"\"][data-type='Main'] {\n      z-index: ").concat(t,' !important;\n    }\n    div.sm-companion-container[data-it="').concat(e,"\"][data-type='Remember'] {\n      z-index: ").concat(t-1," !important;\n    }")}function Ko(e){return e.inblock&&!0===e.inblock.enabled&&!e.inblock.exceptCountries.includes(e.geoTarget.country)}function Xo(e){var t;if(oe(Ko(e)))return e;var n=Nn("height")(e.ava.width,e.options.ratio),i=Zo(e.it,-5e4),r=e.integrationInstances.map((function(t,r){if(0===r)return A({},t);var a=n*r+e.inblock.avaMargin;return i+=t.css||"",A(A({},t),{},{config:A(A({},t.config),{},{ava:{bottom:a},silentTrackers:!0,alternative:{content:null}})})}));return A(A({},e),{},{integrationInstances:r,options:A(A({},e.options),{},{css:"".concat((null===(t=e.options)||void 0===t?void 0:t.css)||""," ").concat(i)}),ava:A(A({},e.ava),{},{enabled:!0,forceStart:!0,position:"bottom_left"})})}function Qo(e){var t=e.length,n=0;return t>1&&(n=Math.floor(Math.random()*t)),e[n]}var qo=function(e){return u(e)?e:[e]},Jo=function(e){var t,n=null;return Ze(null==e?void 0:e.content)?n=e.content:Ze(e)&&(n=e),{content:n,iframe:null!==(t=null==e?void 0:e.iframe)&&void 0!==t&&t}},$o=function(e){return A(A({},e),{},{content:null!=e&&e.content?ue.decode(e.content):null==e?void 0:e.content})};function es(e){var t=function(e){var t=e.alternative,n=e.banner;return v(t,void 0===n?{}:n)}(e),n=Ee($o,Jo,Qo,qo)(t.tag);return A(A({},e),{},{alternative:A(A({},t),{},{tag:void 0},n)})}var ts=function(e){var t=e.reminder,n=e.skipReminder,i=e.skipReminderTime,r=n&&S(i)?i:t.displayCloseBtnTime;return A(A({},t),{},{displayCloseBtnTime:1e3*r})};function ns(e){var t,n,i,r,a,o,s=e.options,c=A(A(A(A({},s),{},{css:(a=s,o=a.css,R(o)?o.replace(/\r?\n|\r/g,""):o),muted:!!s.autoplay||s.muted},"margin"in s&&{margin:(i=s,r=i.margin,pe(r)&&r>0?r:0)}),"class"in s&&{classList:(t=s,n=t.class,R(n)?n.trim().split(","):n)}),{},{reminder:ts(s)});return delete c.skipReminder,delete c.skipReminderTime,A(A({},e),{},{options:c})}function is(e){var t=e.priority===F;return A(A({},e),{},{isSunmediaPriority:t})}function rs(e){var t=e.inblock,n=e.options.inblock||t.enabled;return A(A({},e),{},{inblock:A(A({},t),{},{enabled:n})})}const as={DEBUG:!1,type:"outstream",path:"outstream-sdk-js/display-web",platformPlugin:"displayweb",platformVersion:"1-0",geoTarget:{},defaultTrackers:null,defaultTags:null,seekerSettings:{maxIntents:20,findTimeout:500},userConsentSettings:{attempts:5,delay:500},it:null,category:null,sdkType:null,defaultTrackersPath:null,defaultTagsPath:null,integrationInstances:null,options:{skip:!0,skipTime:20,reminder:{mainRatio:"16:9",displayCloseBtnTime:10},class:[],classPosition:0,classMandatory:!0,adPosition:null,excludeNodeTagNames:[],margin:0,callback:"",css:"",autoplay:!0,muted:!0,restart:!1,fold:!0,pod:!1,up:!1,touchstart:!1,ratio:"6:5",mainContainer:{foldHeight:0,marginTop:0,marginBottom:0,expandAlways:!1},reference:{backgroundColor:"#e7e7e7"},useSaferWayToFindPosition:!1,windowHeightPadding:40,programmaticDisplayRatio:"16:9",removeMs:8e3,adContainerParent:null,containingBlock:null,allowDuplicates:!1},inblock:{enabled:!1,items:3,exceptCountries:["ES","MX","CO"],avaMargin:10},tags:{client:{desktop:[],mobile:[]},sm:{desktop:[],mobile:[]}},priority:{desktop:"",mobile:""},ava:{desktop:{enabled:!1,forceSize:!1,width:420,position:"bottom_right",margin:20,bottom:60},mobile:{enabled:!1,forceSize:!1,position:"bottom_right",margin:20,bottom:60,widthCoefficient:{generic:.5,spain:.63}}},loop:{desktop:{enabled:!1,times:3,autoStart:!0,onlyOneVideo:!1},mobile:{enabled:!1,times:3,autoStart:!0,onlyOneVideo:!1}},alternative:{desktop:{tag:[],schedule:"empty",display:"fixed",position:"right",margin:20,bottom:20},mobile:{tag:[],schedule:"empty",display:"fixed",position:"right",margin:20,bottom:20}}};function os(e,t){return'.sm-it-main-container[data-it="'.concat(e,'"][data-index="').concat(t,'"] {\n    display: none !important;\n  }')}function ss(){return bt.fetchAllInstances().some((function(e){return e.config.ava.enabled}))}function cs(){return bt.fetchAllInstances().some((function(e){return e.config.alternative.display===Pa}))}function us(e){var t=e.it,n=e.inblock,i=bt.nextInstanceIndex(t),r=Ko(e),a=r?n.items:1,o=Array.from(Array(a)).map((function(e,t){return{index:i+t,config:{}}}));return r&&(o=o.map((function(e,n){return A(A({},e),n>0&&{css:os(t,e.index)})}))),A(A({},e),{},{integrationInstances:o})}var ls=Ae(2,ge((function(e,t){var n=(null==t?void 0:t.split("#")[1])||"",i={};n.split("&").forEach((function(e){var t=Ie(e.split("="),2),n=t[0],r=t[1],a=decodeURIComponent(null==r?void 0:r.trim());i=A(A(A({},i),N.TAGS.includes(n)&&A({},function(e){return{adTags:[{url:e,trafficType:"DIRECT",isSunmedia:!0}],loop:{enabled:!1}}}(a))),N.RATIO.includes(n)&&A({},function(e){return _.includes(e)?{options:{ratio:e}}:{}}(a)))}));var r=i,a=r.adTags,o=r.loop,s=r.options;return A(A(A(A({},e),a&&{adTags:a}),o&&{loop:o}),s&&{options:A(A({},e.options),s)})}))),ds=Ae(3,ge((function(e,t,n){var i=e.ava,r=e.options,a=e.geoTarget,o=i.enabled&&r.up,s=function(e){return["left","right"].includes(e)?"bottom_".concat(e):e}(i.position),c=0!==i.bottom?i.bottom:n[t].bottom,u=function(e){var t=e.ava,n=e.geoTarget,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mobile",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=t.width,o=t.margin,s=t.position,c=t.widthCoefficient;if(at(a))return a;if("desktop"===i)return 0;var u,l=r.screen.width;if(Ie((null==s?void 0:s.split("_"))||[],2)[1]){u=l*("ES"===(null==n?void 0:n.country)?c.spain:c.generic)}else u=l-2*o;return Bn(u)}({ava:i,geoTarget:a},t,we());return A(A({},e),{},{ava:A(A({},i),{},{forceStart:o,position:s,bottom:c,maxWidth:u})})}))),hs=Ae(2,ge((function(e,t){var n=["desktop","mobile"];if(!n.includes(t))throw Error("The provided device does not exist");return function e(i){var r,a,o;return u(i)?r=Ce((function(t){return e(t)}),i):l(i)?r=void 0:d(i)?(o=(a=i).constructor?new a.constructor:{},f(a,(function(i,r){var a=null==r?void 0:r.toLowerCase();a===t?o=e(i):n.includes(a)||(o[r]=e(i))})),r=o):r=i,r}(e)}))),fs=Ae(2,ge((function(e,t){var n,i=e.tags,r=void 0===i?{}:i,o=e.defaultTags,s=void 0===o?{}:o,c=e.priority,u=void 0===c?F:c,l=e.options,d=void 0===l?{}:l,h=B,f=W,v=r||{},m=v.sm,y=void 0===m?[]:m,g=v.client,b=void 0===g?[]:g,E=d.ignoreDefaultTags?{}:s||{},k=E.BANNER,T=void 0===k?[]:k,I=E.VAST,C=void 0===I?[]:I,w=Yo(t),R=C.map(w(h.DEFAULT,f.VAST)),S=y.map(w(h.INTEGRATION,f.VAST)),D=T.map(w(h.DEFAULT,f.BANNER)),P=(p(n={},F,[].concat(a(R),a(S),a(D))),p(n,U,a(b.map((function(e){return{url:e,isSunmedia:!1}})))),n),M=u!==F?F:U,x=(d.pod?[].concat(a(P[u]),a(P[M])):P[u]).filter((function(e){var t=e.url;return t&&t.length>0}));return A(A({},e),{},{adTags:x})})));const vs={hooks:{beforeCreate:function(defaultConfig){var e=ln.device,t=document.location.href,n=as.ava;y(defaultConfig,Ee(Xo,ls(t),fs(e),es,ds(n,e),us,ns,is,rs,hs(e))(defaultConfig)),delete defaultConfig.tags,delete defaultConfig.defaultTags,delete defaultConfig.priority}}};var ps="bottom_right",ms=["MADRID","BARCELONA","MIAMI"];function As(e){return Ze(e)&&oe(ms.includes(e))}function ys(){return oe(Math.floor(3*Math.random()))}const gs={allowDuplicates:{hooks:{beforeCreate:function(e){(e||{}).options.allowDuplicates=!0}}},dixen1AndAva:{hooks:{beforeCreate:function(e){var t,n=e.it,i=e.ava,r=e.options,a=e.geoTarget;As(null==a||null===(t=a.city)||void 0===t?void 0:t.findname)&&(i.enabled=!0,i.forceStart=!0,i.position=ps,r.up=!0,r.css+=Zo(n,-1))}}},dixen50kAndAva:{hooks:{beforeCreate:function(e){var t,n=e.it,i=e.ava,r=e.options,a=e.geoTarget;As(null==a||null===(t=a.city)||void 0===t?void 0:t.findname)&&(i.enabled=!0,i.forceStart=!0,i.position=ps,r.up=!0,r.css+=Zo(n,-5e4))}}},dixen50kRAndAva:{hooks:{beforeCreate:function(e){var t,n=e.it,i=e.ava,r=e.options,a=e.geoTarget;As(null==a||null===(t=a.city)||void 0===t?void 0:t.findname)&&ys()&&(i.enabled=!0,i.forceStart=!0,i.position=ps,r.up=!0,r.css+=Zo(n,-5e4))}}},forceAvaSize:{hooks:{beforeCreate:function(e){e.ava.forceSize=!0}}}};function bs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length&&!t.length;n+=1)try{t=e[n]()||[]}catch(e){}return t}function Es(e,t){var n=e.document;return[function(){var e=n.getElementById(t);return e?[e]:[]},function(){return n.getElementsByClassName(t)},function(){return n.querySelectorAll(t)},function(){return[].concat(a(n.querySelectorAll("div[itemprop='".concat(t,"']"))),a(n.querySelectorAll("article[itemprop='".concat(t,"']"))))}]}function ks(e,t,n){var i,r=function(e,t){for(var n=[],i=0;i<t.length&&!n.length;i+=1)n=bs(Es(e,t[i].trim()))||[];return n}(e,t||[]);if(!w(r)){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;return e<0?(n=t.length-1+e)<0&&(n=0):e>=t.length&&(n=t.length>0?t.length-1:0),n}(n,r);if(w(i=r[a]))i=Ie(r,1)[0]}return i}function Ts(){return Is.apply(this,arguments)}function Is(){return Is=b(C().mark((function e(){var t,n=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w(t=ks.apply(void 0,n))){e.next=3;break}throw new Error("Container not found");case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Cs(e){return ws.apply(this,arguments)}function ws(){return ws=b(C().mark((function e(t){var n,i,r,a,o,s,c,u,l,d,h,f,v,p,m;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wind,i=t.integrationScript,r=void 0===i?{}:i,a=t.placementOptions,o=void 0===a?{}:a,s=t.options,c=void 0===s?{}:s,u=o.classList,l=o.classPosition,d=o.classMandatory,h=c.maxIntents,f=void 0===h?20:h,v=c.findTimeout,p=void 0===v?500:v,!(u.length>0)){e.next=14;break}return e.prev=4,e.next=7,ji(Ts,{args:[n,u,l],attempts:f,delay:p});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),!d){e.next=14;break}throw new Error("Container not found with class mandatory");case 14:if(!w(m=r.containerElem)){e.next=17;break}throw new Error("Container not found");case 17:return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e,null,[[4,10]])}))),ws.apply(this,arguments)}function Rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var Ss,Ds=function(e){en(n,e);var t=Rs(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"hasNativeSupport",value:function(){return!0}},{key:"createObserver",value:function(e){var t=this.getTarget(),n=new IntersectionObserver((function(n){n.forEach((function(n){var i=n.isIntersecting,r=Ye(t).isBelow;(i||r)&&e()}))}),{threshold:0});return n.observe(t),n}}],[{key:"createObservable",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zn(n,t)}}]),n}(Gn),Ps=new Error("No user consent"),Ms=J,xs=$,Os=(p(Ss={},xs,G),p(Ss,Ms,j),Ss);function Ls(){var e=bt.getState(Z)||{};return Ze(e[xs])&&e.areVendorsAuthorized?Promise.resolve(e):Promise.reject(Ps)}function Vs(){return Ns.apply(this,arguments)}function Ns(){return Ns=b(C().mark((function e(){var t,n,i,r,a,o,s,c,u,l,d,h,f,v,m,A,y,g,b=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>0&&void 0!==b[0]?b[0]:{},o=a.isInEuCountry,s=a.gdprMacroValues,c=void 0===s?{}:s,u=a.settings,d=(l=void 0===u?{}:u).attempts,h=l.delay,f=bt.getState(Z)||{},v=null!==(t=null!==(n=c[Ms])&&void 0!==n?n:f[Ms])&&void 0!==t?t:Number(o),!oe(w(c[xs]))){e.next=6;break}return e.abrupt("return",(p(m={},xs,c[xs]),p(m,Ms,v),m));case 6:if(!(A=f.noCmpFound)||!oe(v)){e.next=9;break}return e.abrupt("return",Os);case 9:if(!A){e.next=11;break}throw Ps;case 11:return y={},e.prev=12,L.info("Fetching user consent."),e.next=16,ji(Ls,{attempts:v?-1:d,delay:h});case 16:if(e.t0=e.sent,e.t0){e.next=19;break}e.t0={};case 19:y=e.t0,e.next=27;break;case 22:if(e.prev=22,e.t1=e.catch(12),!v){e.next=26;break}throw e.t1;case 26:return e.abrupt("return",Os);case 27:return p(r={},xs,y[xs]),p(r,Ms,null!==(i=c[Ms])&&void 0!==i?i:y[Ms]),g=r,e.abrupt("return",g);case 29:case"end":return e.stop()}}),e,null,[[12,22]])}))),Ns.apply(this,arguments)}var Fs={AVA:"\n    .".concat(Y,"-ad-container.ava {\n      position: fixed;\n      z-index: 99999;\n    }\n  ")},Us={EXPANDED:"\n    .".concat(Y,"-ad-container.expanded {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: ").concat("2147483647",";\n    }\n  ")},_s={build:Tt,mount:Tt,adContainerMounted:Tt,adContainerUnmounted:Tt,createObservables:Tt,getContainerWidth:function(){return 0},getAdContainerParent:Tt,updateAdPosition:Tt,adPreload:Tt,startAd:Tt,programmaticDisplayLoaded:Tt,adStarted:Tt,adStoppedWithReminder:Tt,updateConfigOptions:Tt,adExpandedChange:Tt,getAvailablePositions:Tt,displayRestart:function(){return Promise.reject()},reset:Tt,removeElements:Tt};var Bs={init:function(){this.effectiveListener=this.effectiveListener.bind(this)},props:{$effectiveTarget:null,effectiveSubscription:null,fireRequestTried:!1,fireUnfilledTried:!1},methods:{setEffectiveTarget:function(e){this.$effectiveTarget=e},isAdCountEqualTo:function(e){return this.outstreamInstance.playedAdCount===e},isLookingForFirstAd:function(){return this.isAdCountEqualTo(0)},isPlayingFirstAd:function(){return this.isAdCountEqualTo(1)},isOnlyForSunMedia:function(e){return[lt.Type.DWH.OPPORTUNITY,lt.Type.DWH.REQUEST,lt.Type.DWH.EFFECTIVE,lt.Type.DWH.UNFILLED].includes(e)},hasEffectiveTrackerBeenFired:function(){return this.outstreamInstance.appTrackingEvents.hasBeenFired(lt.Type.DWH.EFFECTIVE,1)},setEffectiveTrackerAsFired:function(){this.outstreamInstance.appTrackingEvents.firedTrackerByName["".concat(lt.Type.DWH.EFFECTIVE,"-1")]=1},fireTracker:function(e,t,n){var i=this;return b(C().mark((function r(){var a,o,s,c,u,l;return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=i.outstreamInstance,o=a.adControllerInstance,s=a.appTrackingEvents,c=a.macroValues,u={macroValues:c,errorMsg:n},S(t)?u.pb=t:i.isOnlyForSunMedia(e)?u.pb=1:null!=o&&o.currentAd&&(l=o.currentAd,u.pb=l.initialAdTag.isSunmedia?1:0,u.pbt=l.initialAdTag.pbt,u.pbid=l.initialAdTag.pbid,u.adDataValues=l.adData),r.next=6,s.fire(e,u);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),L.error("Firing the tracker ".concat(e),r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},createEffectiveObservable:function(){oe(De(this.$effectiveTarget))?L.error("Trying to create EFFECTIVE observe without setting the $effectiveTarget element first"):this.effectiveSubscription=Ds.createObservable(this.$effectiveTarget).subscribeOnce(this.effectiveListener)},effectiveListener:function(){var e=this.outstreamInstance.state;this.fireTracker(lt.Type.DWH.EFFECTIVE),e===ga&&(this.tryToFireUnfilled(),this.outstreamInstance.removeElements())},tryToFireUnfilled:function(){oe(this.fireUnfilledTried)&&(this.fireUnfilledTried=!0,this.tryToFireUnfilledForClient(),this.tryToFireUnfilledForSunMedia())},tryToFireUnfilledForClient:function(){var e=this.outstreamInstance,t=e.clientAdCount,n=e.clientRequestCount;t>0||0===n||this.fireTracker(lt.Type.DWH.UNFILLED,0)},tryToFireUnfilledForSunMedia:function(){var e=this.outstreamInstance,t=e.sunmediaAdCount,n=e.sunmediaRequestCount;t>0||0===n||this.fireTracker(lt.Type.DWH.UNFILLED)}},hooks:{beforeInit:function(){var e=this.outstreamInstance,t=e.appTrackingEvents,n=e.config;t.setMode(n.silentTrackers)},beforeBuild:function(){this.fireTracker(lt.Type.DWH.OPPORTUNITY)},mounted:function(){this.outstreamInstance.config.ava.forceStart?this.fireTracker(lt.Type.DWH.EFFECTIVE):this.createEffectiveObservable()},beforeSMRequest:function(){this.fireRequestTried||(this.fireRequestTried=!0,this.fireTracker(lt.Type.DWH.REQUEST))},beforeSMRequestError:function(e,t,n){var i=n.isSunmedia;if(this.isLookingForFirstAd()){var r=i?1:0;this.fireTracker(lt.Type.DWH.REQUEST_ERROR,r)}},beforeAdImpression:function(){this.fireTracker(lt.Type.DWH.IMPRESSION)},beforeAdVideoStart:function(){this.isPlayingFirstAd()&&this.fireTracker(lt.Type.DWH.START)},beforeAdVideoFirstQuartile:function(){this.isPlayingFirstAd()&&this.fireTracker(lt.Type.DWH.FIRST_QUARTILE)},beforeAdVideoMidpoint:function(){this.isPlayingFirstAd()&&this.fireTracker(lt.Type.DWH.MIDPOINT)},beforeAdVideoThirdQuartile:function(){this.isPlayingFirstAd()&&this.fireTracker(lt.Type.DWH.THIRD_QUARTILE)},beforeAdVideoComplete:function(){this.isPlayingFirstAd()&&this.fireTracker(lt.Type.DWH.COMPLETE)},beforeAdClickThru:function(){this.fireTracker(lt.Type.DWH.CLICK)},beforeAdSkipped:function(){this.fireTracker(lt.Type.DWH.SKIP)},beforeClose:function(e,t,n){if(null==n?void 0:n.err){var i=ue.encode(n.err);this.fireTracker(lt.Type.DWH.ERROR,1,i)}else this.hasEffectiveTrackerBeenFired()&&this.tryToFireUnfilled()},beforeAlternativeMounted:function(){this.outstreamInstance.appTrackingEvents.logTracker(lt.Type.DWH.ALTERNATIVE)},beforeReminderStarted:function(){this.outstreamInstance.appTrackingEvents.logTracker(lt.Type.DWH.REMINDER)},beforeReminderClick:function(){this.fireTracker(lt.Type.DWH.CLICK)}}};var Ws={MAIN_CONTAINER:"\n    .".concat(Y,"-it-main-container {\n      margin: auto;\n      position: relative;\n    }\n  "),REFERENCE:"\n    .".concat(Y,"-reference {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      margin: auto;\n    }\n  "),LOADING:"\n    .".concat(Y,"-loading {\n      display: none;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 64px;\n      height: 64px;\n      margin-top: -32px;\n      margin-left: -32px;\n      z-index: 20;\n    }\n    .").concat(Y,"-loading div {\n      box-sizing: border-box;\n      display: block;\n      position: absolute;\n      width: 51px;\n      height: 51px;\n      margin: 6px;\n      border: 6px solid;\n      border-radius: 50%;\n      animation: SMLoading 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n      border-color: #ff8f00 transparent transparent transparent;\n    }\n    .").concat(Y,"-loading div:nth-child(1) {\n      animation-delay: -0.45s;\n    }\n    .").concat(Y,"-loading div:nth-child(2) {\n      animation-delay: -0.3s;\n    }\n    .").concat(Y,"-loading div:nth-child(3) {\n      animation-delay: -0.15s;\n    }\n    @keyframes SMLoading {\n      0% {transform: rotate(0deg);}\n      100% {transform: rotate(360deg);}\n    }\n  ")};function zs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t.length<=1)){var i=t[0],r=t[1],o=t.slice(2);Le(i,r),zs.apply(void 0,[r].concat(a(o)))}}var Gs={init:function(){var e=this.outstreamInstance.config;this.needToUnfold=e.options.fold},props:{hasMainPosition:!0,needToUnfold:null,$mainPositionParent:null,$mainContainer:null,$reference:null,$loading:null},methods:{setMainPositionParent:function(){var e=this;return b(C().mark((function t(){var n,i,r,a,o,s;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.outstreamInstance,i=n.config,r=n.integrationScript,a=n.wind,o=i.seekerSettings,s=i.options,t.next=4,Cs({wind:a,integrationScript:r,placementOptions:s,options:o});case 4:e.$mainPositionParent=t.sent;case 5:case"end":return t.stop()}}),t)})))()},mountMainPosition:function(){var e,t,n=this.outstreamInstance.config;Ue(Ia,"\n        ".concat(Ws.MAIN_CONTAINER,"\n        ").concat(Ws.REFERENCE,"\n        ").concat(Ws.LOADING,"\n      "),{concat:!0}),this.$mainContainer=function(e,t){var n=e.api,i=e.config,r=e.device,a=e.instanceIndex;return Oe({name:"it-main-container",id:n,attributes:{data:{it:i.it,device:r,index:a}},style:t})}(this.outstreamInstance,A({width:this.calculateMainContainerWidth(),height:n.options.mainContainer.foldHeight},oe(n.options.fold)&&this.getUnfoldStyles())),this.$reference=(e=this.outstreamInstance,t={"background-color":n.options.reference.backgroundColor},Oe({name:"reference",id:e.api,style:t})),this.$loading=Oe({name:"loading",id:this.outstreamInstance.api,children:[{},{},{},{}]}),zs(this.$mainContainer,this.$reference,this.$loading);var i=n.options,r=i.domPosition,a=void 0===r?0:r,o=i.excludeNodeTagNames,s=function(e,t){return Se(e)?Me(e).filter((function(e){return!t.includes(e.tagName.toLowerCase())})):[]}(this.$mainPositionParent,o);this.$mainPositionParent.insertBefore(this.$mainContainer,s[a])},getUnfoldStyles:function(){var e=this.outstreamInstance.config.options,t=e.mainContainer,n=t.marginTop,i=t.marginBottom,r=e.forceSize,a=this.getMainContainerDefaultHeight(),o=this.calculateAdDimensions(!1).height;return{height:r||this.hasToForceDefaultHeight()||o<=a?a:o,"margin-top":n,"margin-bottom":i,overflow:"hidden"}},unfoldMainContainer:function(e){if(!oe(this.needToUnfold)){var t=this.getUnfoldStyles();We(this.$mainContainer,A(A({},t),e&&{height:"auto"})),this.needToUnfold=!1}},getMainContainerDefaultHeight:function(){var e,t=this.outstreamInstance,n=t.config,i=t.windowHeight,r=n.options.ratio,a=(null===(e=this.getMainContainerDimensions())||void 0===e?void 0:e.width)||this.calculateMainContainerWidth(),o=Nn("height")(a,r);return Math.min(i,o)},hasToForceDefaultHeight:function(){var e=this.outstreamInstance,t=e.config,n=e.adControllerInstance,i=t.ava.enabled,r=(n||{}).currentAd;return oe(r)||r.isNoVideoReminder||i&&r.isProgrammaticDisplay},calculateMainContainerWidth:function(){var e,t=this.outstreamInstance.config.options.margin;return((null===(e=ze(this.$mainPositionParent))||void 0===e?void 0:e.width)||this.getContainerWidth())-t},getMainContainerDimensions:function(){if(oe(this.$mainContainer))return{};var e=parseFloat(this.$mainContainer.style.width),t=parseFloat(this.$mainContainer.style.height);return{width:e,height:t,ratio:Nn("ratio")(e,t)}},requestResizeMainContainer:function(e){var t,n=this.outstreamInstance.config;if(this.needToUnfold)return this.unfoldMainContainer(),!0;if(n.options.forceSize)return!0;var i,r=this.getMainContainerDimensions().height;if(pe(e))i=e;else{var a=this.calculateAdDimensions(!1).height,o=this.getMainContainerDefaultHeight();i=this.hasToForceDefaultHeight()||a<=o?o:a}return i===r||!oe(n.options.mainContainer.expandAlways||(null===(t=Ye(this.$mainContainer))||void 0===t?void 0:t.isAbove))&&(We(this.$mainContainer,{height:i}),!0)},updateMainContainerDimensions:function(){var e=this.getMainContainerDimensions(),t=this.calculateMainContainerWidth();e.width!==t&&We(this.$mainContainer,{width:t,height:Nn("height")(t,e.ratio)})},getReferencePosition:function(){var e=this.outstreamInstance.config;return e.options.useSaferWayToFindPosition?function(e,t){if(!De(e))return{};var n=me((function(){return document.querySelector(t)})),i=function e(t){if(!t||t===n)return{top:0,left:0};var i=t.offsetParent;null===i&&(i=t.parentNode);var r=e(i),a=t.offsetTop||0,o=t.offsetLeft||0;return{top:a+r.top,left:o+r.left}}(e),r=i.top,a=i.left,o=e.getBoundingClientRect();return{top:r,left:a,width:o.width,height:o.height}}(this.$reference,e.options.containingBlock):Pe(this.$reference)},obtainAdMainPosition:function(){var e=this.calculateAdDimensions(!0),t=e.width,n=e.height,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return{top:Bn(e.top+(e.height-t.height)/2,n),left:Bn(e.left+(e.width-t.width)/2,n)}}(this.getReferencePosition(),{width:t,height:n});return{top:i.top,left:i.left,width:t,height:n,visibility:"visible"}},calculateAdDimensions:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.outstreamInstance,n=t.config,i=t.windowHeight,r=t.adControllerInstance,a=r||{},o=a.currentAd;if(oe(null==o?void 0:o.dimensions))return{width:0,height:0};var s=this.getMainContainerDimensions(),c=s.width,u=s.height,l=Math.min(i-n.options.windowHeightPadding,e?u:1/0);return Ja(null==o?void 0:o.dimensions,{maxWidth:c,maxHeight:l})},showMainPositionBackground:function(){var e=this.outstreamInstance.config.options.reference.backgroundColor;We(this.$reference,{"background-color":e})},hideMainPositionBackground:function(){We(this.$reference,{"background-color":"transparent"})},showLoading:function(){We(this.$loading,{display:"block"})},hideLoading:function(){We(this.$loading,{display:"none"})},removeMainContainer:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n){var i;if(oe(e.$mainContainer))n(!0);else{var r=t||(null===(i=Ye(e.$mainContainer))||void 0===i?void 0:i.isAbove);r&&(Ve(e.$mainContainer),e.$mainContainer=null,e.outstreamInstance.hooksManager.afterRemoveMainContainer()),L.info(r?"Main container removed":"Remove main container is not possible without generating CLS"),n(r)}})).catch((function(e){return L.error("Removing mainContainer",e)}))}},hooks:{beforeEndAd:function(){var e=this.outstreamInstance,t=e.adControllerInstance,n=e.playedAdCount,i=oe(le(null==t?void 0:t.currentAd));this.outstreamInstance.itShouldLoop(i)&&n>0&&this.showLoading()},afterAlternativeMounted:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isMain;i&&this.needToUnfold&&We(this.$mainContainer,{height:"auto"})},afterAlternativeContentLoaded:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isMain,r=this.outstreamInstance.config;i&&this.unfoldMainContainer(oe(r.options.forceSize))}}},Hs={props:{hasAvaPosition:!0},methods:{mountAvaPosition:function(){Ue(Ia,Fs.AVA,{concat:!0})},obtainAdAvaPosition:function(){var e,t,n=this.outstreamInstance,i=n.config,r=n.device,a=n.adControllerInstance,o=i.options.ratio,s=A({},null==a||null===(e=a.currentAd)||void 0===e?void 0:e.dimensions),c=i.ava,u=c.bottom,l=c.position,d=c.margin,h=c.forceSize,f=c.maxWidth,v=Ie(l.split("_"),2),m=v[0],y=v[1],g=void 0===y?"left":y;return p(t={width:(s=to(s,{maxWidth:f,forceSize:h,defaultRatio:o,device:r})).width,height:s.height},m,u),p(t,g,d),p(t,"visibility","visible"),t},obtainDefaultAvaPosition:function(){var e,t=this.outstreamInstance.config,n=t.options.ratio,i=t.ava,r=i.bottom,a=i.position,o=i.margin,s=i.maxWidth,c=Ie(a.split("_"),2),u=c[0],l=c[1],d=void 0===l?"left":l;return p(e={width:s,height:Nn("height")(s,n)},u,r),p(e,d,o),e}}},js={props:{hasExpandedPosition:!0},methods:{mountExpandedPosition:function(){Ue(Ia,Us.EXPANDED,{concat:!0})},obtainAdExpandedPosition:function(){return{width:He(),height:je(),visibility:"visible"}}}};var Ys={ATTRIBUTES:"attributes",CHARACTER_DATA:"characterData",CHILD_LIST:"childList"};function Zs(e){return oe(function(e){return[Ys.ATTRIBUTES,Ys.CHILD_LIST].includes(e)}(e))}function Ks(e){return t=e,n="".concat(Y,"-"),Array.from((null==t?void 0:t.classList)||[]).some((function(e){return e.startsWith(n)}));var t,n}function Xs(e){var t=e.type,n=e.addedNodes,i=void 0===n?[]:n,r=e.removedNodes,a=void 0===r?[]:r;return t===Ys.CHILD_LIST&&0===a.length&&oe(function(e){return Array.from(e).some((function(e){if(oe(e.style))return!0;if("none"===e.style.display)return!1;var t=e.width,n=e.height,i=parseFloat(t),r=parseFloat(n);return!!oe(pe(i)||pe(r))||i>1||r>1}))}(i))}function Qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return tn(this,n)}}var qs=function(e){en(n,e);var t=Qs(n);function n(){return E(this,n),t.apply(this,arguments)}return T(n,[{key:"hasNativeSupport",value:function(){return!0}},{key:"createObserver",value:function(e){var t=this.getTarget(),n=new MutationObserver((function(t){t.some((function(t){var n=t.type,i=t.target;return!(Zs(n)||Ks(i)||Xs(t))&&(e(),!0)}))}));return n.observe(t,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["id","class","style","height","width"]}),n}}],[{key:"createObservable",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return zn(n,t)}}]),n}(Gn);var Js={init:function(){this.domChangeListener=function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return M(e,"func"),function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];r&&t||(r||clearTimeout(t),t=setTimeout((function(){t=null,e.apply(n,o)}),i))}}(this.domChangeListener.bind(this),200,!0)},props:{relocateAdTarget:null,beforeRelocateAdHook:null,domChangeSubscription:null},methods:{setRelocateAdTarget:function(e){this.$relocateAdTarget=e},relocateAdOnDomChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=this.outstreamInstance.wind;this.beforeRelocateAdHook=e,this.domChangeSubscription=qs.createObservable(t.document.body).subscribe(this.domChangeListener),t.addEventListener("resize",this.domChangeListener,!1)},domChangeListener:function(){var e,t,n=this.outstreamInstance,i=n.adControllerInstance,r=n.wind,a=[ga];(null==i?void 0:i.isFullscreen())||a.includes(this.state)||(oe((e=this.$relocateAdTarget,t=r,!oe(e)&&t.document.body.contains(e)))?this.outstreamInstance.close({adHasBeenPlayed:!1,err:new Error("target to relocate the adContainer gone")}):(this.beforeRelocateAdHook(),this.relocateAdContainer()))},relocateAdContainer:function(){var e=this.outstreamInstance.adPosition;e!==ka&&this.updateAdPosition(e,!0)},unsubscribeRelocateAd:function(){var e,t=this.outstreamInstance.wind;null===(e=this.domChangeSubscription)||void 0===e||e.unsubscribe(),t.removeEventListener("resize",this.domChangeListener,!1)}},hooks:{afterClose:function(){this.outstreamInstance.noMoreContentAvailable()&&this.unsubscribeRelocateAd()},afterAlternativeEnded:function(){this.unsubscribeRelocateAd()}}},$s={RESTART:"\n    .".concat(Y,"-restart-layer {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: block;\n      background: #000 no-repeat 50% 50%;\n      background-color: rgb(245, 245, 245);\n    }\n    .").concat(Y,"-restart-layer div {\n      position: absolute;\n      background-size: contain;\n      background-repeat: no-repeat;\n      cursor: pointer;\n    }\n    .").concat(Y,"-restart-layer .").concat(Y,"-restart {\n      top: 50%;\n      left: 50%;\n      width: 23%;\n      height: 15%;\n      min-width: 100px;\n      min-height: 49px;\n      transform: translateY(-50%) translateX(-50%);\n      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAACDCAMAAAAJdXayAAAAwFBMVEUAAAD9/f38/PwAAAAHBwf7+/v4+PiIiIgZGRkiIiISEhL6+vr5+fnp6elLS0sqKirn5+fW1taAgID39/f19fXv7+/Dw8M9PT3y8vLu7u7f39+np6deXl7c3Ny/v7+tra3k5OTQ0NCUlJT29vbr6+sAAAAAAAAAAAAAAAAAAADw8PDi4uLMzMzIyMi6urp4eHgzMzMODg7FxcWbm5uOjo5vb2/Y2Nizs7NRUVFERESioqKfn59VVVVkZGT+/v7///8ErcY9AAAAPnRSTlOA/v0AhPz5roiKh/v66paN6Nuq+PXwzpL07+K+neDMwefXtPfseHBAIAjx5dTSyaePhtC3sKPdxZiUu7man5f3stsAAARKSURBVHja7dxZW9pQEAbgmUACgYQdZJdN2VTEglptv/n//6pA+6itymJOb07mveaG75lMhrNAiURiOr4k9anL8XQT0iaoyQWpvS4m26AmpA6aJGiq9XSEiymNSR1hTNrHj6ExKaWUUkoppZRSSimllEmZ9rdasTnv9ebF7uAxQ+q99LpbKDPe4nLYXWtab2VSnTLjIzzsL5akdh5rLymxO6wWer1CWB26/JJV9zspeuy72GIvrC18epUv1cKAAQiyVzmKudyVBwG43F+k6T0/1QmwVb6LdVX5rRlDwGFquad/NRgAz87TFFfrngPA6ZVor2SqsPtcs03xNPAAOIVNNR2SWYUMQSVFMZS/c0VQOfeP+/RDBYKg5lPc+PfutpxydKx2gUXcqyTFS24EIFtLn1KCNReC5hnFSW7Op7ec5LMHcYq3FB/+iAXlEp3qKYBwMz5jwm0HgrBNp1tUIdyPTVLXjqDcpq9IBRD3huJhkBVUSl8fviT4RnHQ9oBsir7qaROz90j28+cQ7ibpq5Y1FnRi0KZajmAU5XtmRoBr/8OXqwKVHEXxowJUrZ87r1icB4rmhsHXZLfHACjkKZr8CChbXlJFwElRVCtHcEU2y2UFvSVFtQyBrNUl1YVwiaJbMWDzfJ6pAyGZ0ABmFu+NlhhsZgJ6YvCCrFUEhj6ZcOvB4naeKQNFMqMD1K1dFv7JQInMWAGOtdvHN0A2TWbkHaBFlioAIZlSBZpkKQ/okil9oE52SjOwIFMGgGtpN/8BsE+mnIHZ0l8xAyBLxiQd5hJZ6QYYkjke8zlZyXD7rbOtq3f3wIjMaTDfk5WKZiefkNmuQcoR/CYb+MOjyArMc7IJyweyWlHvpPiDnBZGfsMUySbJO8g/UKPoKoBlb71lKP/o+RRdANg2R7U9+Qu3jUzmwJoscw55w0wh5AC27pRipiOvcE8mfAOy9q0e5OvyopojE4p2rkeVWP7gFBkxAzpkoZcZoZYkE25d+156O35DdhpkxhPg/iAb/fRkY7gmM3pA1b5evvMMU5PBRj4L1MhOyaJIJ0NmtAC29vre2ajhmwq9AplZ+uQZtYKl7zzD0gUgG787jqd7dsB3pA7JN4B6rK/3n3DOvEvqkHUQh5sL0eULEMf+uzCRJfssaFp8ItiUlgtUrT2UaDInkcDSUyymvNwpfiC1X3JVh/BVDK5/RtQKII5d28P/Q/rBgzh96/aoTPNrLoSLeVJ7tWcscO90gNrvrFuGYPigfXyvzHODAZRj+Y9kJ0jtYnI7urKyz21rBhHwaKCP3efyg2aALa+r6yqfSH4f9KsOdoJrHQreyd00C2Gj7jn4gxstfeg+UKowXnH9uq37dweCciqdVk5T+sxZqzif31+fl840I6WUUkoppZRSSimllIruktRRMY1JHWFM0wtSB11MKTEhddAkQYnERGvqgItJYhtUYjrWjr7H5Xi6CekXgBywZ8giZv8AAAAASUVORK5CYII=');\n    }\n    .").concat(Y,"-restart-layer .").concat(Y,"-close {\n      top: 10px;\n      right: 10px;\n      width: 26px;\n      height: 26px;\n      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAMAAAANf8AYAAAAkFBMVEUAAAAAAAD+/v4rKyv8/Pz39/f8/Pz39/eLi4vR0dH+/v7V1dWKioqFhYV/f3/////Nzc0AAAD+/v78/Pz9/f3u7u7s7Ozr6+vp6ekSEhL+/v7w8PB0dHT39/fS0tKnp6f19fXu7u7z8/Pv7+/MzMzJyckAAADy8vLi4uL4+Pjv7+8AAADZ2dnDw8OdnZ1fX18QcjD1AAAAMHRSTlMmEvgt7tbr2EZ7/IJFREH9eAH77fS1saynKfnAPtp/Vs+2yLl1cx/DmN66CoZtUDim/7c5AAABu0lEQVRIx+2V126DMBiFARtjhg0OEGYYCWlWx/u/XX9HbRSIw1CvWtVXCPTpyGcITejaovMihAbIUkhbfvR/5qcMorTsf+x/UzE03qb0CWMftq6S2UYkVkIo2EREyZQpWeGYKRDbzA3zTekBjbFDEv7ABKZhWK7aN4BAqSiHKhvDMG30zGuWYD9MvN67SqrYI/nwInRIy+9UOsvILReNZVomxAnbm1LmSpX9RA+8FpSS7zvtLbiLm011h7dkFRZcPiIXEKtD033zktDHCZPpS5VqVkfLAnKKKURp5Bsbzes1ByNwfJQqwewtMGhEFOUyyvn7oW3k+/4pQEs29wqM0/AFO0WVmfuOH57ZfKaC65+a0MFrbyaDgmst6RmvyJrOYrJr+kGmsTVMY+fNYfam3EsmG7GGcFM+ySB3AypfudAdKB34FBOY9+l7KfZx6o0yyLagY3cT4wcwYkdHmMyWKr2J8ZQMLdd7SCAdG0zM20nLmZqR14daPnSMSssLpmY6GeVwYjfLmZI54siqkGoaRRg1tZpptp265SxtCjXzXtegoobq+uO3/Rv/CPOymLloYimkC00IfdG5CPEJRJcY90Ps4pAAAAAASUVORK5CYII=');\n    }\n    ")},ec={methods:{mountRestartLayer:function(e){return new Promise((function(t,n){try{var i;Ue(Ia,$s.RESTART,{concat:!0});var r=Oe({name:"close",events:{click:function(e){Ve(i),t({action:la.CLOSE,event:e})}}}),a=Oe({name:"restart",events:{click:function(e){Ve(i),t({action:la.RESTART,event:e})}}});i=Oe({name:"restart-layer",children:[a,r]}),Le(e,i)}catch(e){n(e)}}))}}},tc=function(e){return Ee(oe,Ze)(e)},nc={props:{optionsCallbackFired:{}},methods:{fireOptionsCallbackOnce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!tc(e)&&!this.optionsCallbackFired[e]){this.optionsCallbackFired[e]=!0;var n=this.outstreamInstance.config.options;wt(n,A(A({},t),{},{status:e}))}}},hooks:{afterAdImpression:function(){this.fireOptionsCallbackOnce("SunMediaStart")},beforeClose:function(e,t){var n,i=e.adControllerInstance,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.adHasBeenPlayed,o=this.getAvailablePositions({hasAva:!1})||{},s=o.mainPosition;this.fireOptionsCallbackOnce("SunMediaEnd",{container:null==s||null===(n=s.$container)||void 0===n?void 0:n.parentElement,playerUI:null==i?void 0:i.playerUI,ads:a?1:0})}}},ic=$,rc=J;const ac=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ya({init:function(t){var n,i=this;this.outstreamInstance=t,this.name=null==t||null===(n=t.config)||void 0===n?void 0:n.platformPlugin,(this.hooks||[]).forEach((function(e){f(e,(function(e,n){t.hooksManager.add(n,e.bind(i))}))})),delete this.hooks,this.pluginDefinition=e},methods:A({},_s)});return t.compose.apply(t,[e].concat(a(e.mixins||[])))}({mixins:[Bs,Gs,Hs,js,Js,ec,nc],init:function(){var e=this.outstreamInstance,t=e.config,n=e.instanceIndex;this.outstreamInstance.config=function(e,t){var n=e.integrationInstances,i=e.inblock,r=A({ava:{},alternative:{}},((n||[]).find((function(e){return e.index===t}))||{}).config);return oe(i.enabled)&&(Cn(ss,(function(){r.ava.enabled=!1}))(),Cn(cs,(function(){r.alternative.display=Da}))()),v(e,r)}(t,n),this.startAdListener=this.startAdListener.bind(this),this.deleteMainContainerListener=this.deleteMainContainerListener.bind(this),this.resizeMainContainerListener=this.resizeMainContainerListener.bind(this),this.windowTop=we()},props:{viewportPosition$:null,startAdSubscription:null,programmaticAvaSubscription:null,deleteMainContainerSusbcription:null,resizeMainContainerSusbcription:null,mainContainerResizeAllowed:!1,windowTop:null},methods:{reset:function(){this.mainContainerResizeAllowed=!1},build:function(){var e=this;return b(C().mark((function t(){var n,i,r,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.outstreamInstance,r=i.config,a=i.macroValues,t.t0=e.outstreamInstance,t.t1=A,t.t2={},t.next=6,Vs({isInEuCountry:r.geoTarget.eu_country,gdprMacroValues:(n={},p(n,ic,a[ic]),p(n,rc,a[rc]),n),settings:r.userConsentSettings});case 6:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t0.updateMacroValues.call(t.t0,t.t4),t.next=11,e.setMainPositionParent();case 11:case"end":return t.stop()}}),t)})))()},mount:function(){var e=this.outstreamInstance.config;if(this.mountMainPosition(),e.ava.enabled){var t=e.options.css,n="\n          ".concat(sa.AD_CONTAINER,"\n          ").concat(Fs.AVA,"\n          ").concat(Us.EXPANDED,"\n          ").concat(ii,"\n          ").concat(t,"\n        ");Ue("".concat(Ia,"-").concat(e.it),n,{wind:this.windowTop}),this.mountAvaPosition(),this.mountExpandedPosition()}this.setEffectiveTarget(this.$mainContainer),this.setRelocateAdTarget(this.$mainContainer)},getContainerWidth:function(){return He(this.outstreamInstance.wind)},getAdContainerParent:function(e){var t=this.outstreamInstance.config,n=t.ava,i=t.options,r=(le(e)?n.enabled:e)?this.windowTop:this.outstreamInstance.wind;return(i.adContainerParent?ks(r,[i.adContainerParent],0):void 0)||r.document.body},createObservables:function(){this.relocateAdOnDomChange(this.onBeforeRelocateAd),this.viewportPosition$=za.createObservable(this.$mainContainer)},onBeforeRelocateAd:function(){this.outstreamInstance.windowHeight=je(),this.updateMainContainerDimensions()},startAdListener:function(e){if(e.isIntersecting){var t;null===(t=this.startAdSubscription)||void 0===t||t.unsubscribe();var n=this.outstreamInstance.config.ava.enabled?ka:Ea;this.updateAdPosition(n),this.outstreamInstance.startAd()}},resizeMainContainerListener:function(){var e;(this.mainContainerResizeAllowed=this.requestResizeMainContainer(),this.mainContainerResizeAllowed)&&(null===(e=this.resizeMainContainerSusbcription)||void 0===e||e.unsubscribe(),this.outstreamInstance.adPosition===Ea&&(this.outstreamInstance.adPosition=null,this.updateAdPosition(Ea)))},deleteMainContainerListener:function(e){var t,n,i=oe(e.isVisible)&&(null===(t=Ye(this.$mainContainer))||void 0===t?void 0:t.isAbove);(i||oe(this.$mainContainer))&&(null===(n=this.deleteMainContainerSusbcription)||void 0===n||n.unsubscribe());i&&this.removeMainContainer()},updateAdPosition:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.outstreamInstance,a=r.state,o=r.adControllerInstance,s=r.config,c=r.adPosition,u=r.$adContainer;if(!oe(u)){var l=(null==o||null===(t=o.currentAd)||void 0===t?void 0:t.dimensions)&&a>ha&&a<ga;if(!oe(l)||e===ba)switch(e){case ba:if(c===ba&&oe(i))break;var d;s.ava.enabled?(d=this.obtainDefaultAvaPosition(),this.showMainPositionBackground(),_e(u,"remove","expanded"),_e(u,"add","ava")):(d=this.getReferencePosition(),_e(u,"remove",["ava","expanded"])),We(u,d,!0),this.outstreamInstance.adPosition=ba;break;case Ea:if(c===Ea&&oe(i))break;var h=this.obtainAdMainPosition();this.outstreamInstance.batchMoveAdChanges(h,(function(){n.hideMainPositionBackground(),_e(u,"remove",["ava","expanded"]),We(u,h,!0),o.resizeAd(h.width,h.height)})),this.outstreamInstance.adPosition=Ea;break;case ka:if(oe(s.ava.enabled)||c===ka&&oe(i))break;var f=this.obtainAdAvaPosition();this.outstreamInstance.batchMoveAdChanges(f,(function(){n.showMainPositionBackground(),_e(u,"remove","expanded"),_e(u,"add","ava"),We(u,f,!0);var e=o.currentAd.isAdFactory?"ava":void 0;o.resizeAd(f.width,f.height,e)})),this.outstreamInstance.adPosition=ka;break;case Ta:if(c===Ta&&oe(i))break;var v=this.obtainAdExpandedPosition();this.outstreamInstance.batchMoveAdChanges(v,(function(){_e(u,"remove","ava"),_e(u,"add","expanded"),We(u,v,!0),o.resizeAd(v.width,v.height)})),this.outstreamInstance.adPosition=Ta}}},displayRestart:function(){var e=this,t=this.$mainContainer;return this.hideLoading(),this.mountRestartLayer(t).then((function(t){return t.action===la.RESTART&&e.showLoading(),t})).catch((function(e){throw e}))},unsubscribeAll:function(){var e,t,n;null===(e=this.startAdSubscription)||void 0===e||e.unsubscribe(),null===(t=this.programmaticAvaSubscription)||void 0===t||t.unsubscribe(),null===(n=this.resizeMainContainerSusbcription)||void 0===n||n.unsubscribe()},removeElements:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.outstreamInstance.config;Ve(this.$reference),n.options.forceSize||oe(this.outstreamInstance.noMoreContentAvailable())||this.removeMainContainer(t).then((function(t){var n;t?null===(n=e.deleteMainContainerSusbcription)||void 0===n||n.unsubscribe():e.deleteMainContainerSusbcription=e.deleteMainContainerSusbcription||e.viewportPosition$.subscribe(e.deleteMainContainerListener)})).catch((function(e){return L.error(e)}))},adPreload:function(){var e=this.outstreamInstance.adControllerInstance.currentAd;oe(null==e?void 0:e.isProgrammaticDisplay)&&(this.mainContainerResizeAllowed=this.requestResizeMainContainer())},programmaticDisplayLoaded:function(){var e=this,t=this.outstreamInstance.config;this.mainContainerResizeAllowed=this.requestResizeMainContainer(),t.ava.enabled&&(t.ava.forceStart||this.hasEffectiveTrackerBeenFired())?this.updateAdPosition(ka):(this.updateAdPosition(Ea),t.ava.enabled&&(this.programmaticAvaSubscription=Ds.createObservable(this.$mainContainer).subscribeOnce((function(){return e.updateAdPosition(ka)}))))},getAvailablePositions:function(e){var t=e.hasAva;return t?{avaPosition:{$container:this.getAdContainerParent(t)}}:{mainPosition:{$container:this.$mainContainer}}},startAd:function(){var e=this.outstreamInstance.config,t=Ye(this.$mainContainer),n=t.isIntersecting&&oe(e.ava.enabled),i=e.ava.enabled&&(e.ava.forceStart||t.isBelow||this.hasEffectiveTrackerBeenFired()),r=null;if(n?r=Ea:i&&(r=ka),r)return this.updateAdPosition(r),void this.outstreamInstance.startAd();this.startAdSubscription=this.viewportPosition$.subscribe(this.startAdListener)},adStarted:function(){this.hideLoading(),oe(this.mainContainerResizeAllowed)&&(this.resizeMainContainerSusbcription=this.viewportPosition$.subscribe(this.resizeMainContainerListener))},updateConfigOptions:function(e){var t=e.restart,n=e.referenceBackground,i=this.outstreamInstance.config.options;!1===t&&(this.outstreamInstance.displayRestart=!1),n&&(i.reference.backgroundColor=n)},adExpandedChange:function(){var e=this.outstreamInstance,t=e.adControllerInstance,n=e.config,i=(t||{}).currentAd,r=null;if(null!=i&&i.expanded)r=Ta;else{var a=Ye(this.$mainContainer).isIntersecting;r=n.ava.enabled&&oe(a)?ka:Ea}this.updateAdPosition(r,!0)},adStoppedWithReminder:function(){this.unsubscribeAll(),this.outstreamInstance.config.ava.enabled&&Ue("reminder-styles",Xa.REMINDER,{wind:this.windowTop}),this.hideMainPositionBackground()}},hooks:{beforeEndAd:function(){this.unsubscribeAll()},beforeClose:function(){this.unsubscribeAll()},beforeAdError:function(){this.unsubscribeAll()}}})};var oc={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultConfig,defaultConfig=void 0===t?{}:t,n=e.currentScript;
defaultConfig = {"tags":{"sm":{"mobile":[{"url":"https:\/\/es-sunicontent.videoplaza.tv\/proxy\/distributor\/v2?s=WeblogsDisplay\/VidaExtraMobile&tt=p&rt=vast_2.0&rnd=${random}&pf=html5&xpb=1&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}&ru=${request.referrerurl}&vht=${request.height}&vwt=${request.width}&cp.schain=${supply_chain}&t=${VALUE}","trafficType":"DIRECT"},{"url":"","trafficType":"DIRECT"},{"url":"","trafficType":"DIRECT"}],"desktop":[{"url":"https:\/\/es-sunicontent.videoplaza.tv\/proxy\/distributor\/v2?s=WeblogsDisplay\/VidaExtraDesktop&tt=p&rt=vast_2.0&rnd=${random}&pf=fl_11&dcid=pc&xpb=1&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}&ru=${request.referrerurl}&vht=${request.height}&vwt=${request.width}&cp.schain=${supply_chain}&t=${VALUE}","trafficType":"DIRECT"},{"url":"","trafficType":"DIRECT"},{"url":"","trafficType":"DIRECT"}]},"client":{"mobile":["","",""],"desktop":["","",""]}},"priority":{"mobile":"sm","desktop":"sm"},"options":{"skip":true,"skipTime":30,"skipReminder":false,"skipReminderTime":0,"classMandatory":false,"restart":false,"pod":true,"inblock":false,"ignoreDefaultTags":false,"forceSize":false,"up":false,"fold":false,"audio":false,"class":[],"classPosition":0,"adPosition":[],"margin":0},"ava":{"desktop":{"enabled":false,"position":"bottom_right","bottom":0},"mobile":{"enabled":false,"position":"bottom_right","bottom":0}},"loop":{"desktop":{"enabled":false,"times":1,"autoStart":false,"onlyOneVideo":false},"mobile":{"enabled":false,"times":1,"autoStart":false,"onlyOneVideo":false}},"alternative":{"desktop":{"schedule":"always","display":"fixed","position":"right","cls":true,"tag":[{"content":"<script async src=\"https:\/\/securepubads.g.doubleclick.net\/tag\/js\/gpt.js\"><\/script> <div id=\"gpt-passback-${random}\">   <script>     window.googletag = window.googletag || {cmd: []};     googletag.cmd.push(function() {     googletag.defineSlot('\/143394101,1018282\/ca-pub-8221793852898543-tag\/Vidaextra_DisplayWeb', [300, 250], 'gpt-passback-${random}').addService(googletag.pubads());     googletag.pubads().set('page_url', 'www.vidaextra.com');     googletag.enableServices();     googletag.display('gpt-passback-${random}');     });   <\/script> <\/div>","iframe":true},{"content":"<script> var partner = 'sunmedia'; web = ''; slot = ''; window.document.getElementById('passbackjs').addEventListener('load', function() { \/\/launch passback passback(partner, web, slot); });  var pb = document.createElement('script'); pb.src = 'https:\/\/img.weblogssl.com\/projects\/pbwsl.js'; pb.id = 'passbackjs'; window.document.body.appendChild(pb);   <\/script>","iframe":false}]},"mobile":{"schedule":"always","display":"fixed","position":"right","cls":true,"tag":[{"content":"<script async src=\"https:\/\/securepubads.g.doubleclick.net\/tag\/js\/gpt.js\"><\/script> <div id=\"gpt-passback-${random}\">   <script>     window.googletag = window.googletag || {cmd: []};     googletag.cmd.push(function() {     googletag.defineSlot('\/143394101,1018282\/ca-pub-8221793852898543-tag\/Vidaextra_DisplayWeb', [300, 250], 'gpt-passback-${random}').addService(googletag.pubads());     googletag.pubads().set('page_url', 'www.vidaextra.com');     googletag.enableServices();     googletag.display('gpt-passback-${random}');     });   <\/script> <\/div>","iframe":true},{"content":"<script> var partner = 'sunmedia'; web = ''; slot = ''; window.document.getElementById('passbackjs').addEventListener('load', function() { \/\/launch passback passback(partner, web, slot); });  var pb = document.createElement('script'); pb.src = 'https:\/\/img.weblogssl.com\/projects\/pbwsl.js'; pb.id = 'passbackjs'; window.document.body.appendChild(pb);   <\/script>","iframe":false}]}},"whitelist":[],"mobileNetBlackList":[],"category":"Technolgy & Computer","it":"63d48a0d-7b22-49d6-9a82-08185b65137f","publisher":"06bc430c-4bbf-4fe2-9dd1-1fe39a5b9be4","client":"8254f813-df2e-4a55-b37f-75555aee94e8","sdkType":"displayit-1-0","defaultTrackersPath":"displayweb.json","defaultTagsPath":"displayit-1-0.json","defaultTags":{"MOBILE":{"VAST":[{"url":"https:\/\/vast.sunmedia.tv\/creatives\/6be28a33-e20e-490a-849b-794ecf28259b?schain=${supply_chain}&t=${VALUE}&gdpr_consent=${gdpr_consent}","trafficType":"DIRECT","position":1,"type":"dvm1"},{"url":"https:\/\/vast.sunmedia.tv\/creatives\/c27ca7f0-d1cd-41fb-8298-a613d48ddbb5?schain=${supply_chain}&t=${VALUE}&gdpr_consent=${gdpr_consent}","trafficType":"DIRECT","position":2,"type":"dvm2"},{"url":"https:\/\/vast.sunmedia.tv\/creatives\/6325579a-7b1a-457c-9a94-296e18813ae6?referrerurl=${request.referrerurl}&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}&schain=1.0,1!adpone.com,1813bfe577448f6ef478,1,,,","trafficType":"DIRECT","position":3,"type":"dvm3"}],"BANNER":[{"url":"https:\/\/search.spotxchange.com\/vast\/2.0\/314240?VPAID=JS&content_page_url=${request.referrerurl}&cb=${random}&player_width=${request.width}&player_height=${request.height}&media_transcoding=low&ad_volume=0&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}&schain=${supply_chain}&custom[content_type][]=${VALUE}","trafficType":"DIRECT","position":1,"type":"dbm1"},{"url":"","trafficType":"DIRECT","position":2,"type":"dbm2"},{"url":"","trafficType":"DIRECT","position":3,"type":"dbm3"}]},"DESKTOP":{"VAST":[{"url":"https:\/\/vast.sunmedia.tv\/creatives\/6be28a33-e20e-490a-849b-794ecf28259b?schain=${supply_chain}&t=${VALUE}&gdpr_consent=${gdpr_consent}","trafficType":"DIRECT","position":1,"type":"dvd1"},{"url":"https:\/\/vast.sunmedia.tv\/creatives\/c27ca7f0-d1cd-41fb-8298-a613d48ddbb5?schain=${supply_chain}&t=${VALUE}&gdpr_consent=${gdpr_consent}","trafficType":"DIRECT","position":2,"type":"dvd2"},{"url":"https:\/\/vast.sunmedia.tv\/creatives\/6325579a-7b1a-457c-9a94-296e18813ae6?referrerurl=${request.referrerurl}&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}&schain=1.0,1!adpone.com,1813bfe577448f6ef478,1,,,","trafficType":"DIRECT","position":3,"type":"dvd3"}],"BANNER":[{"url":"https:\/\/vast.sunmedia.tv\/creatives\/2cda9eed-462d-4d4c-a308-786a00b8bf95?schain=${supply_chain}&t=${VALUE}&gdpr_consent=${gdpr_consent}","trafficType":"DIRECT","position":1,"type":"dbd1"},{"url":"","trafficType":"DIRECT","position":2,"type":"dbd2"},{"url":"","trafficType":"DIRECT","position":3,"type":"dbd3"}]}},"defaultTrackers":[{"type":"script","event":"opportunity","data":"<script type=\"text\/javascript\"> try{ var h = document.createElement(\"script\"); h.async = true; h.src = \"https:\/\/pghub.io\/js\/pandg-sdk.js\"; h.onload=function(){ var metadata = {gdpr: \"${gdpr}\", gdpr_consent: \"${gdpr_consent}\", ccpa: null, bp_id: \"sunmedia\"}; var config = {name: \"P&G\", pixelUrl: \"https:\/\/pandg.tapad.com\/tag\"}; var tagger = Tapad.init(metadata, config); var data = {category: \"${page_category}\"}; tagger.sync(data).then(console.log); }; document.body.appendChild(h); } catch(e){} <\/script>"},{"type":"script","event":"request","data":"<script>(function() {function loadScript () { if (window.document.body) window.document.body.appendChild(f); else if (current_intent < intent) { current_intent++; setTimeout(loadScript(), 1000); } } raEuconsent = '${gdpr_consent}'; raReferrer = '${request.referrerurl}'; var intent = 10; var current_intent = 0; var f = document.createElement('script'); f.src = 'https:\/\/sync.richaudience.com\/DF2886F390D432DF0C8E98D69702ED6F\/'; loadScript();})();<\/script>"},{"type":"script","event":"impression","data":"<script> window.sm_conscore_rnda = Math.floor(100000000 + Math.random() * 900000000); window.sm_conscore_rndb = Math.floor(1000000 + Math.random() * 9000000); var url = 'https:\/\/sb.scorecardresearch.com\/p?c1=2&c2=21892462&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=[REPLACE1]&ns_st_ec=1&ns_st_cn=1&ns_st_ev=play&ns_st_ct=va00&ns_st_cl=0&ns_st_pt=0&c3=*null&c4=*null&c6=*null&ns_ts=[REPLACE2]&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}'; url = url.replace('[REPLACE1]', window.sm_conscore_rnda); url = url.replace('[REPLACE2]', window.sm_conscore_rndb); var i = new Image(); i.src = url; i.alt = 'comscoreLoad'; document.body.appendChild(i).setAttribute('style', 'width: 1px !important; height: 1px !important;'); <\/script>"},{"type":"script","event":"complete","data":"<script> if(!window.sm_conscore_rnda)window.sm_conscore_rnda = Math.floor(100000000 + Math.random() * 900000000); if(!window.sm_conscore_rndb)window.sm_conscore_rndb = Math.floor(100000000 + Math.random() * 900000000); var url = 'https:\/\/sb.scorecardresearch.com\/p?c1=2&c2=21892462&ns_ap_sv=2.1511.10&ns_type=hidden&ns_st_it=a&ns_st_sv=4.0.0&ns_st_ad=1&ns_st_sq=1&ns_st_id=[REPLACE1]&ns_st_ec=1&ns_st_cn=1&ns_st_ev=end&ns_st_ct=va00&ns_st_cl=0&ns_st_pt=0&c3=*null&c4=*null&c6=*null&ns_ts=[REPLACE2]&gdpr=${gdpr}&gdpr_consent=${gdpr_consent}'; url = url.replace('[REPLACE1]', window.sm_conscore_rnda); url = url.replace('[REPLACE2]', window.sm_conscore_rndb); var i = new Image(); i.src = url; i.alt = 'comscoreComplete'; document.body.appendChild(i).setAttribute('style', 'width: 1px !important; height: 1px !important;'); <\/script>"}]};if(!defaultConfig.it)throw new Error("Missing default config!");var i=v(as,defaultConfig);return In.create({config:i,pluginFactory:uo(ac),services:a(Mo(i)),components:[vs,Vo,Go,jo],genericExtras:gs,currentScript:n,validateIntegration:xo})}};const sc=oc;var cc=document.currentScript;sc.create({currentScript:cc}).init()})()})();
