function loadCMP(){
	raCMPObject = window.top.__cmp;
	if(window.self!=window.top){
		current = window.parent;
		let i=0;
		while(current!=window.top){
			if (typeof current.__cmp === 'undefined'){
				current=current.parent;
				i++
				if(i>20){
					break;
				}
			}else{
				var raCMPObject = current.__cmp;
				break;
			}
		}
		if (typeof raCMPObject === 'undefined') {
			var raCMPObject = current.__cmp;
		}
	}else{
		if (typeof __cmp != "undefined") {
			raCMPObject = __cmp;
		}
	}

	if (typeof raCMPObject === 'undefined') {
			raCMPObject = window.top.__tcfapi;
			if(window.self!=window.top){
				current = window.parent;
				let i=0;
				while(current!=window.top){
					if (typeof current.__tcfapi === 'undefined'){
						current=current.parent;
						i++
						if(i>20){
							break;
						}
					}else{
						var raCMPObject = current.__tcfapi;
						break;
					}
				}
				if (typeof raCMPObject === 'undefined') {
					var raCMPObject = current.__tcfapi;
				}
			}else{
				if (typeof __tcfapi != "undefined") {
					raCMPObject = __tcfapi;
				}
			}
		
			if (typeof raCMPObject === 'undefined') {
				//DONOTHING
			}else{
				__tcfapi('getTCData', 2, (tcData, success) => { if(success) { 
					var raEuconsent = tcData.tcString; 
					if(raEuconsent!="" && raEuconsent != null){
						let raSyncIframe = document.createElement('iframe');
						raSyncIframe.width=0;
						raSyncIframe.height=0;
						raSyncIframe.frameBorder=0;
						raSyncIframe.scrolling='no';
						raSyncIframe.src='https://sync.richaudience.com/b3adde1f4bbb31c3485562d6e3ddceb4/?consentString='+raEuconsent+"&st=2"; 
						document.body.appendChild(raSyncIframe);						
					}
					
				}});
			}
	}else{
		raCMPObject('getConsentData', null, function(result) {raPrepareCall(result);});
		
		function raPrepareCall(cmpObject){ 
			if (typeof cmpObject.consentData === 'undefined') {
				console.log("UNDEFINED");			
			}else{
				var raEuconsent = cmpObject.consentData;
			
				if(raEuconsent!="" && raEuconsent != null){
					let raSyncIframe = document.createElement('iframe');
					raSyncIframe.width=0;
					raSyncIframe.height=0;
					raSyncIframe.frameBorder=0;
					raSyncIframe.scrolling='no';
					raSyncIframe.src='https://sync.richaudience.com/b3adde1f4bbb31c3485562d6e3ddceb4/?consentString='+raEuconsent+"&st=1";
					document.body.appendChild(raSyncIframe);
				}	 
			}
		}
	}	
}

raConsentString = "";
raReferrerDomain = "";

if(raConsentString == ""){
	if(typeof raEuconsent != 'undefined' && raEuconsent != ''){
		raConsentString = raEuconsent;
	}
}

if(raConsentString != ''){
	raHasConsent = "1";
}else{
	raHasConsent = "0";
}


if(raReferrerDomain == ""){
	if(typeof raReferrer != 'undefined' && raReferrer != ''){
		raReferrerDomain = raReferrer;
	}
}

if(raConsentString.length>20){
	raIfSync = document.createElement('iframe');
	raIfSync.src = "https://sync.richaudience.com/dcf3528a0b8aa83634892d50e91c306e/?ord=326957&consentString="+raConsentString+"&hasConsent="+raHasConsent+"&st=0";
	raIfSync.id = "raiCsync";
	raIfSync.setAttribute('scrolling','no');
	raIfSync.style.width = "0";
	raIfSync.style.height = "0";
	raIfSync.style.cssFloat = "left";
	raIfSync.style.borderStyle="none";
	raIfSync.style.frameBorder = 0;
	document.body.appendChild(raIfSync);	
}else{
	loadCMP();
}

